<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#!/usr/bin/env python3</span>
<span class="comment">""" Helper functions and classes for GUI controls """</span>
<span class="keyword">import</span> <span class="identifier">gettext</span>
<span class="keyword">import</span> <span class="identifier">logging</span>
<span class="keyword">import</span> <span class="identifier">re</span>

<span class="keyword">import</span> <span class="identifier">tkinter</span> <span class="keyword">as</span> <span class="identifier">tk</span>
<span class="keyword">from</span> <span class="identifier">tkinter</span> <span class="keyword">import</span> <span class="identifier">colorchooser</span><span class="punctuation">,</span> <span class="identifier">ttk</span>
<span class="keyword">from</span> <span class="identifier">itertools</span> <span class="keyword">import</span> <span class="identifier">zip_longest</span>
<span class="keyword">from</span> <span class="identifier">functools</span> <span class="keyword">import</span> <span class="identifier">partial</span>

<span class="keyword">from</span> <span class="identifier">_tkinter</span> <span class="keyword">import</span> <span class="identifier">Tcl_Obj</span><span class="punctuation">,</span> <span class="identifier">TclError</span>

<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">custom_widgets</span> <span class="keyword">import</span> <span class="identifier">ContextMenu</span><span class="punctuation">,</span> <span class="identifier">MultiOption</span><span class="punctuation">,</span> <span class="identifier">ToggledFrame</span><span class="punctuation">,</span> <span class="identifier">Tooltip</span>
<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">utils</span> <span class="keyword">import</span> <span class="identifier">FileHandler</span><span class="punctuation">,</span> <span class="identifier">get_config</span><span class="punctuation">,</span> <span class="identifier">get_images</span>

<span class="identifier">logger</span> <span class="arithmetic-assignment">=</span> <span class="identifier">logging</span><span class="punctuation">.</span><span class="identifier">getLogger</span><span class="grouping">(</span><span class="identifier">__name__</span><span class="grouping">)</span>  <span class="comment"># pylint: disable=invalid-name</span>

<span class="comment"># LOCALES</span>
<span class="identifier">_LANG</span> <span class="arithmetic-assignment">=</span> <span class="identifier">gettext</span><span class="punctuation">.</span><span class="identifier">translation</span><span class="grouping">(</span><span class="string-literal">"gui.tooltips", localedir="locales"</span><span class="punctuation">,</span> <span class="identifier">fallback</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
<span class="identifier">_</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_LANG</span><span class="punctuation">.</span><span class="identifier">gettext</span>

<span class="comment"># We store Tooltips, ContextMenus and Commands globally when they are created</span>
<span class="comment"># Because we need to add them back to newly cloned widgets (they are not easily accessible from</span>
<span class="comment"># original config or are prone to getting destroyed when the original widget is destroyed)</span>
<span class="identifier">_RECREATE_OBJECTS</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">tooltips</span><span class="arithmetic-assignment">=</span><span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">commands</span><span class="arithmetic-assignment">=</span><span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">contextmenus</span><span class="arithmetic-assignment">=</span><span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">widget</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">text_variable</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Store the tooltip layout and widget id in _TOOLTIPS and return a tooltip """</span>
    <span class="identifier">_RECREATE_OBJECTS</span><span class="grouping">[</span><span class="string-literal">"tooltips"][str(widget)] = {"text"</span><span class="punctuation">:</span> <span class="identifier">text</span><span class="punctuation">,</span>
                                                  <span class="string-literal">"text_variable"</span><span class="punctuation">:</span> <span class="identifier">text_variable</span><span class="punctuation">,</span>
                                                  <span class="string-literal">"wrap_length"</span><span class="punctuation">:</span> <span class="identifier">wrap_length</span><span class="grouping">}</span>
    <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Adding to tooltips dict: (widget: %s. text: '%s', wrap_length: %s)"</span><span class="punctuation">,</span>
                 <span class="identifier">widget</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="grouping">)</span>
    <span class="keyword">return</span> <span class="identifier">Tooltip</span><span class="grouping">(</span><span class="identifier">widget</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">text_variable</span><span class="arithmetic-assignment">=</span><span class="identifier">text_variable</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="identifier">wrap_length</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">_get_contextmenu</span><span class="grouping">(</span><span class="identifier">widget</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Create a context menu, store its mapping and return """</span>
    <span class="identifier">rc_menu</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ContextMenu</span><span class="grouping">(</span><span class="identifier">widget</span><span class="grouping">)</span>
    <span class="identifier">_RECREATE_OBJECTS</span><span class="grouping">[</span><span class="string-literal">"contextmenus"</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">widget</span><span class="grouping">)</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">rc_menu</span>
    <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Adding to Context menu: (widget: %s. rc_menu: %s)"</span><span class="punctuation">,</span>
                 <span class="identifier">widget</span><span class="punctuation">,</span> <span class="identifier">rc_menu</span><span class="grouping">)</span>
    <span class="keyword">return</span> <span class="identifier">rc_menu</span>


<span class="keyword">def</span> <span class="identifier">_add_command</span><span class="grouping">(</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">func</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" For controls that execute commands, the command must be added to the _COMMAND list so that
        it can be added back to the widget during cloning """</span>
    <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Adding to commands: %s - %s"</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">func</span><span class="grouping">)</span>
    <span class="identifier">_RECREATE_OBJECTS</span><span class="grouping">[</span><span class="string-literal">"commands"</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">name</span><span class="grouping">)</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">func</span>


<span class="keyword">def</span> <span class="identifier">set_slider_rounding</span><span class="grouping">(</span><span class="identifier">value</span><span class="punctuation">,</span> <span class="identifier">var</span><span class="punctuation">,</span> <span class="identifier">d_type</span><span class="punctuation">,</span> <span class="identifier">round_to</span><span class="punctuation">,</span> <span class="identifier">min_max</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Set the value of sliders underlying variable based on their datatype,
    rounding value and min/max.

    Parameters
    ----------
    var: tkinter.Var
        The variable to set the value for
    d_type: [:class:`int`, :class:`float`]
        The type of value that is stored in :attr:`var`
    round_to: int or list
        If :attr:`d_type` is :class:`float` then this is the decimal place rounding for
        :attr:`var`. If :attr:`d_type` is :class:`int` then this is the number of steps between
        each increment for :attr:`var`. If a list is provided, then this must be a list of
        discreet values that are of the correct :attr:`d_type`.
    min_max: tuple (`int`, `int`)
        The (``min``, ``max``) values that this slider accepts
    """</span>
    <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">round_to</span><span class="punctuation">,</span> <span class="identifier">list</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment"># Lock to nearest item</span>
        <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">min</span><span class="grouping">(</span><span class="identifier">round_to</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="arithmetic-assignment">=</span><span class="keyword">lambda</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="identifier">abs</span><span class="grouping">(</span><span class="identifier">x</span><span class="arithmetic-operator">-</span><span class="identifier">float</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
    <span class="keyword">elif</span> <span class="identifier">d_type</span> <span class="relational-operator">==</span> <span class="identifier">float</span><span class="punctuation">:</span>
        <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">round</span><span class="grouping">(</span><span class="identifier">float</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">round_to</span><span class="grouping">)</span><span class="grouping">)</span>
    <span class="keyword">else</span><span class="punctuation">:</span>
        <span class="identifier">steps</span> <span class="arithmetic-assignment">=</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">min_max</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">min_max</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="identifier">round_to</span><span class="punctuation">,</span> <span class="identifier">round_to</span><span class="grouping">)</span>
        <span class="identifier">value</span> <span class="arithmetic-assignment">=</span> <span class="identifier">min</span><span class="grouping">(</span><span class="identifier">steps</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="arithmetic-assignment">=</span><span class="keyword">lambda</span> <span class="identifier">x</span><span class="punctuation">:</span> <span class="identifier">abs</span><span class="grouping">(</span><span class="identifier">x</span> <span class="arithmetic-operator">-</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">float</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">ControlPanelOption</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    A class to hold a control panel option. A list of these is expected
    to be passed to the ControlPanel object.

    Parameters
    ----------
    title: str
        Title of the control. Will be used for label text and control naming
    dtype: datatype object
        Datatype of the control.
    group: str, optional
        The group that this control should sit with. If provided, all controls in the same
        group will be placed together. Default: None
    subgroup: str, optional
        The subgroup that this option belongs to. If provided, will group options in the same
        subgroups together for the same layout as option/check boxes. Default: ``None``
    default: str, optional
        Default value for the control. If None is provided, then action will be dictated by
        whether "blank_nones" is set in ControlPanel
    initial_value: str, optional
        Initial value for the control. If None, default will be used
    choices: list or tuple, object
        Used for combo boxes and radio control option setting. Set to `"colorchooser"` for a color
        selection dialog.
    is_radio: bool, optional
        Specifies to use a Radio control instead of combobox if choices are passed
    is_multi_option:
        Specifies to use a Multi Check Button option group for the specified control
    rounding: int or float, optional
        For slider controls. Sets the stepping
    min_max: int or float, optional
        For slider controls. Sets the min and max values
    sysbrowser: dict, optional
        Adds Filesystem browser buttons to ttk.Entry options.
        Expects a dict: {sysbrowser: str, filetypes: str}
    helptext: str, optional
        Sets the tooltip text
    track_modified: bool, optional
        Set whether to set a callback trace indicating that the parameter has been modified.
        Default: False
    command: str, optional
        Required if tracking modified. The command that this option belongs to. Default: None
    """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">title</span><span class="punctuation">,</span> <span class="identifier">dtype</span><span class="punctuation">,</span>  <span class="comment"># pylint:disable=too-many-arguments</span>
                 <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">subgroup</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">initial_value</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
                 <span class="identifier">is_radio</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span> <span class="identifier">is_multi_option</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span> <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
                 <span class="identifier">sysbrowser</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">helptext</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">track_modified</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s: (title: '%s', dtype: %s, group: %s, subgroup: %s, "</span>
                     <span class="string-literal">"default: %s, initial_value: %s, choices: %s, is_radio: %s, "</span>
                     <span class="string-literal">"is_multi_option: %s, rounding: %s, min_max: %s, sysbrowser: %s, "</span>
                     <span class="string-literal">"helptext: '%s', track_modified: %s, command: '%s')"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span>
                     <span class="identifier">title</span><span class="punctuation">,</span> <span class="identifier">dtype</span><span class="punctuation">,</span> <span class="identifier">group</span><span class="punctuation">,</span> <span class="identifier">subgroup</span><span class="punctuation">,</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="punctuation">,</span> <span class="identifier">initial_value</span><span class="punctuation">,</span> <span class="identifier">choices</span><span class="punctuation">,</span> <span class="identifier">is_radio</span><span class="punctuation">,</span>
                     <span class="identifier">is_multi_option</span><span class="punctuation">,</span> <span class="identifier">rounding</span><span class="punctuation">,</span> <span class="identifier">min_max</span><span class="punctuation">,</span> <span class="identifier">sysbrowser</span><span class="punctuation">,</span> <span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">track_modified</span><span class="punctuation">,</span>
                     <span class="identifier">command</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dtype</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">sysbrowser</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sysbrowser</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_command</span> <span class="arithmetic-assignment">=</span> <span class="identifier">command</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">title</span><span class="arithmetic-assignment">=</span><span class="identifier">title</span><span class="punctuation">,</span>
                             <span class="identifier">subgroup</span><span class="arithmetic-assignment">=</span><span class="identifier">subgroup</span><span class="punctuation">,</span>
                             <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">group</span><span class="punctuation">,</span>
                             <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="punctuation">,</span>
                             <span class="identifier">initial_value</span><span class="arithmetic-assignment">=</span><span class="identifier">initial_value</span><span class="punctuation">,</span>
                             <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">choices</span><span class="punctuation">,</span>
                             <span class="identifier">is_radio</span><span class="arithmetic-assignment">=</span><span class="identifier">is_radio</span><span class="punctuation">,</span>
                             <span class="identifier">is_multi_option</span><span class="arithmetic-assignment">=</span><span class="identifier">is_multi_option</span><span class="punctuation">,</span>
                             <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="identifier">rounding</span><span class="punctuation">,</span>
                             <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="identifier">min_max</span><span class="punctuation">,</span>
                             <span class="identifier">helptext</span><span class="arithmetic-assignment">=</span><span class="identifier">helptext</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_control</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_tk_var</span><span class="grouping">(</span><span class="identifier">initial_value</span><span class="punctuation">,</span> <span class="identifier">track_modified</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">name</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Lowered title for naming """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"title"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">title</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Title case title for naming with underscores removed """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"title"].replace("_", " "</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">group</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return group or _master if no group set """</span>
        <span class="identifier">group</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"group"</span><span class="grouping">]</span>
        <span class="identifier">group</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"_master"</span> <span class="keyword">if</span> <span class="identifier">group</span> <span class="relational-operator">is</span> <span class="none-literal">None</span> <span class="keyword">else</span> <span class="identifier">group</span>
        <span class="keyword">return</span> <span class="identifier">group</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">subgroup</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" str: The subgroup for the option, or ``None`` if none provided. """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"subgroup"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return either selected value or default """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"default"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">value</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return either initial value or default """</span>
        <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"initial_value"</span><span class="grouping">]</span>
        <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span> <span class="keyword">if</span> <span class="identifier">val</span> <span class="relational-operator">is</span> <span class="none-literal">None</span> <span class="keyword">else</span> <span class="identifier">val</span>
        <span class="keyword">return</span> <span class="identifier">val</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">choices</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return choices """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"choices"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">is_radio</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return is_radio """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"is_radio"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">is_multi_option</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" bool: ``True`` if the control should be contained in a multi check button group,
        otherwise ``False``. """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"is_multi_option"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">rounding</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return rounding """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"rounding"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">min_max</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return min_max """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"min_max"</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">helptext</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Format and return help text for tooltips """</span>
        <span class="identifier">helptext</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"helptext"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">helptext</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">helptext</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Format control help: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">helptext</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"R|"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">helptext</span> <span class="arithmetic-assignment">=</span> <span class="identifier">helptext</span><span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">:</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="string-literal">"\nL|", "\n - ").replace("\n", "\n\n"</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">helptext</span> <span class="arithmetic-assignment">=</span> <span class="identifier">helptext</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="string-literal">"\n\t", "\n - ").replace("%%", "%"</span><span class="grouping">)</span>
        <span class="identifier">helptext</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span> <span class="arithmetic-operator">+</span> <span class="string-literal">" - "</span> <span class="arithmetic-operator">+</span> <span class="identifier">helptext</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Formatted control help: (name: '%s', help: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">helptext</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">helptext</span>

    <span class="keyword">def</span> <span class="identifier">get</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return the value from the tk_var

        Notes
        -----
        tk variables don't like empty values if it's not a stringVar. This seems to be pretty
        much the only reason that a get() call would fail, so replace any numerical variable
        with it's numerical zero equivalent on a TCL Error. Only impacts variables linked
        to Entry widgets.
        """</span>
        <span class="keyword">try</span><span class="punctuation">:</span>
            <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">except</span> <span class="identifier">TclError</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">IntVar</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
            <span class="keyword">elif</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">DoubleVar</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="float-literal">0.0</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="keyword">raise</span>
        <span class="keyword">return</span> <span class="identifier">val</span>

    <span class="keyword">def</span> <span class="identifier">set</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the tk_var to a new value """</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">set_initial_value</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the initial_value to the given value

        Parameters
        ----------
        value: varies
            The value to set the initial value attribute to
        """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting inital value for %s to %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_options</span><span class="grouping">[</span><span class="string-literal">"initial_value"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">value</span>

    <span class="keyword">def</span> <span class="identifier">get_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the correct control type based on the datatype or for this option """</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">choices</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">is_radio</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"radio"</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">choices</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">is_multi_option</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"multi"</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">choices</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">choices</span> <span class="relational-operator">==</span> <span class="string-literal">"colorchooser"</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"colorchooser"</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">choices</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Combobox</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="relational-operator">==</span> <span class="identifier">bool</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Checkbutton</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"scale"</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">control</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Entry</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting control '%s' to %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span><span class="punctuation">,</span> <span class="identifier">control</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">control</span>

    <span class="keyword">def</span> <span class="identifier">get_tk_var</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">initial_value</span><span class="punctuation">,</span> <span class="identifier">track_modified</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Correct variable type for control """</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="relational-operator">==</span> <span class="identifier">bool</span><span class="punctuation">:</span>
            <span class="identifier">var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BooleanVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="relational-operator">==</span> <span class="identifier">int</span><span class="punctuation">:</span>
            <span class="identifier">var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">IntVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="relational-operator">==</span> <span class="identifier">float</span><span class="punctuation">:</span>
            <span class="identifier">var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">DoubleVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">StringVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">initial_value</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">initial_value</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting tk variable: (name: '%s', dtype: %s, tk_var: %s, initial_value: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dtype</span><span class="punctuation">,</span> <span class="identifier">var</span><span class="punctuation">,</span> <span class="identifier">initial_value</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">track_modified</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_command</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Tracking variable modification: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
            <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"w"</span><span class="punctuation">,</span>
                      <span class="keyword">lambda</span> <span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">index</span><span class="punctuation">,</span> <span class="identifier">mode</span><span class="punctuation">,</span> <span class="identifier">cmd</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_command</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_modified_callback</span><span class="grouping">(</span><span class="identifier">cmd</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">track_modified</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_command</span> <span class="relational-operator">==</span> <span class="string-literal">"train" and self.title == "Model Dir"</span><span class="punctuation">:</span>
            <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"w"</span><span class="punctuation">,</span> <span class="keyword">lambda</span> <span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">index</span><span class="punctuation">,</span> <span class="identifier">mode</span><span class="punctuation">,</span> <span class="identifier">v</span><span class="arithmetic-assignment">=</span><span class="identifier">var</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_model_callback</span><span class="grouping">(</span><span class="identifier">v</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="keyword">return</span> <span class="identifier">var</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_modified_callback</span><span class="grouping">(</span><span class="identifier">command</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the modified variable for this tab to TRUE

        On initial setup the notebook won't yet exist, and we don't want to track the changes
        for initial variables anyway, so make sure notebook exists prior to performing the callback
        """</span>
        <span class="identifier">config</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">config</span><span class="punctuation">.</span><span class="identifier">command_notebook</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span>
        <span class="identifier">config</span><span class="punctuation">.</span><span class="identifier">set_modified_true</span><span class="grouping">(</span><span class="identifier">command</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_model_callback</span><span class="grouping">(</span><span class="identifier">var</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set a callback to load model stats for existing models when a model
        folder is selected """</span>
        <span class="identifier">config</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">config</span><span class="punctuation">.</span><span class="identifier">user_config_dict</span><span class="grouping">[</span><span class="string-literal">"auto_load_model_stats"</span><span class="grouping">]</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Session updating disabled by user config"</span><span class="grouping">)</span>
            <span class="keyword">return</span>
        <span class="keyword">if</span> <span class="identifier">config</span><span class="punctuation">.</span><span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"runningtask"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Task running. Not updating session"</span><span class="grouping">)</span>
            <span class="keyword">return</span>
        <span class="identifier">folder</span> <span class="arithmetic-assignment">=</span> <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting analysis model folder callback: '%s'"</span><span class="punctuation">,</span> <span class="identifier">folder</span><span class="grouping">)</span>
        <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"analysis_folder"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">folder</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">ControlPanel</span><span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-many-ancestors</span>
    <span class="comment">"""
    A Control Panel to hold control panel options.
    This class handles all of the formatting, placing and TK_Variables
    in a consistent manner.

    It can also provide dynamic columns for resizing widgets

    Parameters
    ----------
    parent: tkinter object
        Parent widget that should hold this control panel
    options: list of  ControlPanelOptions objects
        The list of controls that are to be built into this control panel
    label_width: int, optional
        The width that labels for controls should be set to.
        Defaults to 20
    columns: int, optional
        The initial number of columns to set the layout for. Default: 1
    max_columns: int, optional
        The maximum number of columns that this control panel should be able
        to accommodate. Setting to 1 means that there will only be 1 column
        regardless of how wide the control panel is. Higher numbers will
        dynamically fill extra columns if space permits. Defaults to 4
    option_columns: int, optional
        For check-button and radio-button containers, how many options should
        be displayed on each row. Defaults to 4
    header_text: str, optional
        If provided, will place an information box at the top of the control
        panel with these contents.
    style: str, optional
        The name of the style to use for the control panel. Styles are configured when TkInter
        initializes. The style name is the common prefix prior to the widget name. Default:
        ``None`` (use the OS style)
    blank_nones: bool, optional
        How the control panel should handle None values. If set to True then None values will be
        converted to empty strings. Default: False
    scrollbar: bool, optional
        ``True`` if a scrollbar should be added to the control panel, otherwise ``False``.
        Default: ``True``
    """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">options</span><span class="punctuation">,</span>  <span class="comment"># pylint:disable=too-many-arguments</span>
                 <span class="identifier">label_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">20</span><span class="punctuation">,</span> <span class="identifier">columns</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">max_columns</span><span class="arithmetic-assignment">=</span><span class="int-literal">4</span><span class="punctuation">,</span> <span class="identifier">option_columns</span><span class="arithmetic-assignment">=</span><span class="int-literal">4</span><span class="punctuation">,</span> <span class="identifier">header_text</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
                 <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">blank_nones</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">scrollbar</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s: (parent: '%s', options: %s, label_width: %s, columns: %s, "</span>
                     <span class="string-literal">"max_columns: %s, option_columns: %s, header_text: %s, style: %s, "</span>
                     <span class="string-literal">"blank_nones: %s, scrollbar: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">options</span><span class="punctuation">,</span> <span class="identifier">label_width</span><span class="punctuation">,</span> <span class="identifier">columns</span><span class="punctuation">,</span> <span class="identifier">max_columns</span><span class="punctuation">,</span>
                     <span class="identifier">option_columns</span><span class="punctuation">,</span> <span class="identifier">header_text</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="punctuation">,</span> <span class="identifier">blank_nones</span><span class="punctuation">,</span> <span class="identifier">scrollbar</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"" if style is None else f"{style}."</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}.Group.TFrame"</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">options</span> <span class="arithmetic-assignment">=</span> <span class="identifier">options</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controls</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">label_width</span> <span class="arithmetic-assignment">=</span> <span class="identifier">label_width</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">columns</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">max_columns</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">option_columns</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">header_text</span> <span class="arithmetic-assignment">=</span> <span class="identifier">header_text</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">user_theme</span><span class="grouping">[</span><span class="string-literal">"group_panel"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"SPanel"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="arithmetic-operator">**</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">user_theme</span><span class="grouping">[</span><span class="string-literal">"group_settings"</span><span class="grouping">]</span><span class="grouping">}</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">group_frames</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_sub_group_frames</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="identifier">canvas_kwargs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">bd</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">highlightthickness</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">bg</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"panel_background"</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Canvas</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">canvas_kwargs</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">mainframe</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">optsframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_opts_frame</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_optscanvas</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">create_window</span><span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">window</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">mainframe</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">NW</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">build_panel</span><span class="grouping">(</span><span class="identifier">blank_nones</span><span class="punctuation">,</span> <span class="identifier">scrollbar</span><span class="grouping">)</span>

        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_adjust_wraplength</span><span class="grouping">(</span><span class="identifier">event</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" dynamically adjust the wrap length of a label on event """</span>
        <span class="identifier">label</span> <span class="arithmetic-assignment">=</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">widget</span>
        <span class="identifier">label</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">wraplength</span><span class="arithmetic-assignment">=</span><span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">width</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">get_opts_frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return an auto-fill container for the options inside a main frame """</span>
        <span class="identifier">style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="string-literal">"{self._style}Holder."</span>
        <span class="identifier">mainframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{style}TFrame"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">header_text</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add_info</span><span class="grouping">(</span><span class="identifier">mainframe</span><span class="grouping">)</span>
        <span class="identifier">optsframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">mainframe</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="string-literal">"opts_frame", style=f"{style}TFrame"</span><span class="grouping">)</span>
        <span class="identifier">optsframe</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="grouping">)</span>
        <span class="identifier">holder</span> <span class="arithmetic-assignment">=</span> <span class="identifier">AutoFillContainer</span><span class="grouping">(</span><span class="identifier">optsframe</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">style</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Opts frames: '%s'"</span><span class="punctuation">,</span> <span class="identifier">holder</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">mainframe</span><span class="punctuation">,</span> <span class="identifier">holder</span>

    <span class="keyword">def</span> <span class="identifier">add_info</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">frame</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Plugin information """</span>
        <span class="identifier">info_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}InfoHeader.TFrame"</span><span class="grouping">)</span>
        <span class="identifier">info_frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">label_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">info_frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}InfoHeader.TFrame"</span><span class="grouping">)</span>
        <span class="identifier">label_frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">idx</span><span class="punctuation">,</span> <span class="identifier">line</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">header_text</span><span class="punctuation">.</span><span class="identifier">splitlines</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">line</span><span class="punctuation">:</span>
                <span class="keyword">continue</span>
            <span class="identifier">style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="string-literal">"{self._style}InfoHeader" if idx == 0 else f"{self._style}InfoBody"</span>
            <span class="identifier">info</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">label_frame</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">line</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{style}.TLabel"</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
            <span class="identifier">info</span><span class="punctuation">.</span><span class="identifier">bind</span><span class="grouping">(</span><span class="string-literal">"&lt;Configure&gt;"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_adjust_wraplength</span><span class="grouping">)</span>
            <span class="identifier">info</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">build_panel</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">blank_nones</span><span class="punctuation">,</span> <span class="identifier">scrollbar</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build the options frame for this command """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add Config Frame"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">scrollbar</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add_scrollbar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">bind</span><span class="grouping">(</span><span class="string-literal">"&lt;Configure&gt;"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">resize_frame</span><span class="grouping">)</span>

        <span class="keyword">for</span> <span class="identifier">option</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">options</span><span class="punctuation">:</span>
            <span class="identifier">group_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_group_frame</span><span class="grouping">(</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">group</span><span class="grouping">)</span>
            <span class="identifier">sub_group_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_get_subgroup_frame</span><span class="grouping">(</span><span class="identifier">group_frame</span><span class="grouping">[</span><span class="string-literal">"frame"</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">subgroup</span><span class="grouping">)</span>
            <span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">group_frame</span><span class="grouping">[</span><span class="string-literal">"frame"</span><span class="grouping">]</span> <span class="keyword">if</span> <span class="identifier">sub_group_frame</span> <span class="relational-operator">is</span> <span class="none-literal">None</span> <span class="keyword">else</span> <span class="identifier">sub_group_frame</span><span class="punctuation">.</span><span class="identifier">subframe</span>

            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ControlBuilder</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span>
                                 <span class="identifier">option</span><span class="punctuation">,</span>
                                 <span class="identifier">label_width</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">label_width</span><span class="punctuation">,</span>
                                 <span class="identifier">checkbuttons_frame</span><span class="arithmetic-assignment">=</span><span class="identifier">group_frame</span><span class="grouping">[</span><span class="string-literal">"chkbtns"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                 <span class="identifier">option_columns</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                 <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">,</span>
                                 <span class="identifier">blank_nones</span><span class="arithmetic-assignment">=</span><span class="identifier">blank_nones</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">group_frame</span><span class="grouping">[</span><span class="string-literal">"chkbtns"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">items</span> <span class="relational-operator">&gt;</span> <span class="int-literal">0</span><span class="punctuation">:</span>
                <span class="identifier">group_frame</span><span class="grouping">[</span><span class="string-literal">"chkbtns"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTTOM</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">NW</span><span class="grouping">)</span>

            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controls</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">control</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controls</span><span class="punctuation">:</span>
            <span class="identifier">filebrowser</span> <span class="arithmetic-assignment">=</span> <span class="identifier">control</span><span class="punctuation">.</span><span class="identifier">filebrowser</span>
            <span class="keyword">if</span> <span class="identifier">filebrowser</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="identifier">filebrowser</span><span class="punctuation">.</span><span class="identifier">set_context_action_option</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">options</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added Config Frame"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">get_group_frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">group</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return a group frame.

        If a group frame has already been created for the given group, then it will be returned,
        otherwise it will be created and returned.

        Parameters
        ----------
        group: str
            The name of the group to obtain the group frame for

        Returns
        -------
        :class:`ttk.Frame` or :class:`ToggledFrame`
            If this is a 'master' group frame then returns a standard frame. If this is any
            other group, then will return the ToggledFrame for that group
        """</span>
        <span class="identifier">group</span> <span class="arithmetic-assignment">=</span> <span class="identifier">group</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">group_frames</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">group</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Creating new group frame for: %s"</span><span class="punctuation">,</span> <span class="identifier">group</span><span class="grouping">)</span>
            <span class="identifier">is_master</span> <span class="arithmetic-assignment">=</span> <span class="identifier">group</span> <span class="relational-operator">==</span> <span class="string-literal">"_master"</span>
            <span class="identifier">opts_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">optsframe</span><span class="punctuation">.</span><span class="identifier">subframe</span>
            <span class="keyword">if</span> <span class="identifier">is_master</span><span class="punctuation">:</span>
                <span class="identifier">group_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">opts_frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}.Group.TFrame"</span><span class="grouping">)</span>
                <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">group_frame</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">group_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ToggledFrame</span><span class="grouping">(</span><span class="identifier">opts_frame</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">group</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">theme</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="grouping">)</span>
                <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">group_frame</span><span class="punctuation">.</span><span class="identifier">sub_frame</span>

            <span class="identifier">group_frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">NW</span><span class="grouping">)</span>

            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">group_frames</span><span class="grouping">[</span><span class="identifier">group</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">frame</span><span class="arithmetic-assignment">=</span><span class="identifier">retval</span><span class="punctuation">,</span>
                                            <span class="identifier">chkbtns</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">checkbuttons_frame</span><span class="grouping">(</span><span class="identifier">retval</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">group_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">group_frames</span><span class="grouping">[</span><span class="identifier">group</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">group_frame</span>

    <span class="keyword">def</span> <span class="identifier">add_scrollbar</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add a scrollbar to the options frame """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add Config Scrollbar"</span><span class="grouping">)</span>
        <span class="identifier">scrollbar</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Scrollbar</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span>
                                  <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">yview</span><span class="punctuation">,</span>
                                  <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Vertical.TScrollbar"</span><span class="grouping">)</span>
        <span class="identifier">scrollbar</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Y</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">config</span><span class="grouping">(</span><span class="identifier">yscrollcommand</span><span class="arithmetic-assignment">=</span><span class="identifier">scrollbar</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">mainframe</span><span class="punctuation">.</span><span class="identifier">bind</span><span class="grouping">(</span><span class="string-literal">"&lt;Configure&gt;"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update_scrollbar</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added Config Scrollbar"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">update_scrollbar</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=unused-argument</span>
        <span class="comment">""" Update the options frame scrollbar """</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">scrollregion</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">bbox</span><span class="grouping">(</span><span class="string-literal">"all"</span><span class="grouping">)</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">resize_frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Resize the options frame to fit the canvas """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Resize Config Frame"</span><span class="grouping">)</span>
        <span class="identifier">canvas_width</span> <span class="arithmetic-assignment">=</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">width</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_canvas</span><span class="punctuation">.</span><span class="identifier">itemconfig</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_optscanvas</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="identifier">canvas_width</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">optsframe</span><span class="punctuation">.</span><span class="identifier">rearrange_columns</span><span class="grouping">(</span><span class="identifier">canvas_width</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Resized Config Frame"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">checkbuttons_frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">frame</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build and format frame for holding the check buttons
            if is_master then check buttons will be placed in a LabelFrame
            otherwise in a standard frame """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add Options CheckButtons Frame"</span><span class="grouping">)</span>
        <span class="identifier">chk_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="string-literal">"chkbuttons", style=f"{self._style}Group.TFrame"</span><span class="grouping">)</span>
        <span class="identifier">holder</span> <span class="arithmetic-assignment">=</span> <span class="identifier">AutoFillContainer</span><span class="grouping">(</span><span class="identifier">chk_frame</span><span class="punctuation">,</span>
                                   <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                   <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                   <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group."</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added Options CheckButtons Frame"</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">holder</span>

    <span class="keyword">def</span> <span class="identifier">_get_subgroup_frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">subgroup</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">subgroup</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">subgroup</span>
        <span class="keyword">if</span> <span class="identifier">subgroup</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_sub_group_frames</span><span class="punctuation">:</span>
            <span class="identifier">sub_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TFrame"</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_sub_group_frames</span><span class="grouping">[</span><span class="identifier">subgroup</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">AutoFillContainer</span><span class="grouping">(</span><span class="identifier">sub_frame</span><span class="punctuation">,</span>
                                                                 <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                                                 <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                                                 <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group."</span><span class="grouping">)</span>
            <span class="identifier">sub_frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added Subgroup Frame: %s"</span><span class="punctuation">,</span> <span class="identifier">subgroup</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_sub_group_frames</span><span class="grouping">[</span><span class="identifier">subgroup</span><span class="grouping">]</span>


<span class="keyword">class</span> <span class="identifier">AutoFillContainer</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" A container object that auto-fills columns.

    Parameters
    ----------
    parent: :class:`ttk.Frame`
        The parent widget that holds this container
    initial_columns: int
        The initial number of columns that this container should display
    max_columns: int
        The maximum number of column that this container is permitted to display
    style: str, optional
        The name of the style to use for the control panel. Styles are configured when TkInter
        initializes. The style name is the common prefix prior to the widget name. Default:
        empty string (use the OS style)
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">initial_columns</span><span class="punctuation">,</span> <span class="identifier">max_columns</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="string-literal">""</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing: %s: (parent: %s, initial_columns: %s, max_columns: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">initial_columns</span><span class="punctuation">,</span> <span class="identifier">max_columns</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">max_columns</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">initial_columns</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parent</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parent</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">style</span>
<span class="comment">#        self.columns = min(columns, self.max_columns)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">scale_column_width</span><span class="grouping">(</span><span class="int-literal">288</span><span class="punctuation">,</span> <span class="int-literal">9</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_width</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_items</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widget_config</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>  <span class="comment"># Master list of all children in order</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">subframes</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">set_subframes</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">scale_column_width</span><span class="grouping">(</span><span class="identifier">original_size</span><span class="punctuation">,</span> <span class="identifier">original_fontsize</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Scale the column width based on selected font size """</span>
        <span class="identifier">font_size</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">user_config_dict</span><span class="grouping">[</span><span class="string-literal">"font_size"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">font_size</span> <span class="relational-operator">==</span> <span class="identifier">original_fontsize</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">original_size</span>
        <span class="identifier">scale</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span> <span class="arithmetic-operator">+</span> <span class="grouping">(</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">font_size</span> <span class="arithmetic-operator">/</span> <span class="identifier">original_fontsize</span><span class="grouping">)</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="grouping">)</span> <span class="arithmetic-operator">/</span> <span class="int-literal">2</span><span class="grouping">)</span>
        <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">round</span><span class="grouping">(</span><span class="identifier">original_size</span> <span class="arithmetic-operator">*</span> <span class="identifier">scale</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"scaled column width: (old_width: %s, scale: %s, new_width:%s)"</span><span class="punctuation">,</span>
                     <span class="identifier">original_size</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="punctuation">,</span> <span class="identifier">retval</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">retval</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">items</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the number of items held in this container """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_items</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">subframe</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the next sub-frame to be populated """</span>
        <span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">subframes</span><span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span><span class="grouping">]</span>
        <span class="identifier">next_idx</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span> <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span> <span class="relational-operator">&lt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="keyword">else</span> <span class="int-literal">0</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"current_idx: %s, next_idx: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span><span class="punctuation">,</span> <span class="identifier">next_idx</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span> <span class="arithmetic-assignment">=</span> <span class="identifier">next_idx</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_items</span> <span class="arithmetic-assignment">+=</span> <span class="int-literal">1</span>
        <span class="keyword">return</span> <span class="identifier">frame</span>

    <span class="keyword">def</span> <span class="identifier">set_subframes</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set a sub-frame for each possible column """</span>
        <span class="identifier">subframes</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="keyword">for</span> <span class="identifier">idx</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">name</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"af_subframe_{}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">idx</span><span class="grouping">)</span>
            <span class="identifier">subframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}TFrame"</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">idx</span> <span class="relational-operator">&lt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span><span class="punctuation">:</span>
                <span class="comment"># Only pack visible columns</span>
                <span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">N</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>
            <span class="identifier">subframes</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">subframe</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added subframe: %s"</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">subframes</span>

    <span class="keyword">def</span> <span class="identifier">rearrange_columns</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" On column number change redistribute widgets """</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">validate</span><span class="grouping">(</span><span class="identifier">width</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span>

        <span class="identifier">new_columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">min</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span><span class="punctuation">,</span> <span class="identifier">max</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">width</span> <span class="arithmetic-operator">//</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Rearranging columns: (width: %s, old_columns: %s, new_columns: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">width</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span><span class="punctuation">,</span> <span class="identifier">new_columns</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">new_columns</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widget_config</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">compile_widget_config</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">destroy_children</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">repack_columns</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="comment"># Reset counters</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_items</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_idx</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack_widget_clones</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widget_config</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">validate</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Validate that passed in width should trigger column re-arranging """</span>
        <span class="keyword">if</span> <span class="grouping">(</span><span class="grouping">(</span><span class="identifier">width</span> <span class="relational-operator">&lt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="relational-operator">==</span> <span class="int-literal">1</span><span class="grouping">)</span> <span class="logical-operator">or</span>
                <span class="grouping">(</span><span class="identifier">width</span> <span class="relational-operator">&gt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_width</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="relational-operator">==</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_columns</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"width outside min/max thresholds: (min: %s, width: %s, max: %s)"</span><span class="punctuation">,</span>
                         <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">max_width</span><span class="grouping">)</span>
            <span class="keyword">return</span> <span class="bool-literal">False</span>
        <span class="identifier">range_min</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span>
        <span class="identifier">range_max</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">single_column_width</span>
        <span class="keyword">if</span> <span class="identifier">range_min</span> <span class="relational-operator">&lt;</span> <span class="identifier">width</span> <span class="relational-operator">&lt;</span> <span class="identifier">range_max</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"width outside next step refresh threshold: (step down: %s, width: %s,"</span>
                         <span class="string-literal">"step up: %s)"</span><span class="punctuation">,</span> <span class="identifier">range_min</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="punctuation">,</span> <span class="identifier">range_max</span><span class="grouping">)</span>
            <span class="keyword">return</span> <span class="bool-literal">False</span>
        <span class="keyword">return</span> <span class="bool-literal">True</span>

    <span class="keyword">def</span> <span class="identifier">compile_widget_config</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Compile all children recursively in correct order if not already compiled and add
        to :attr:`_widget_config` """</span>
        <span class="identifier">zipped</span> <span class="arithmetic-assignment">=</span> <span class="identifier">zip_longest</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="grouping">(</span><span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">winfo_children</span><span class="grouping">(</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">subframe</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">subframes</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">children</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">child</span> <span class="keyword">for</span> <span class="identifier">group</span> <span class="relational-operator">in</span> <span class="identifier">zipped</span> <span class="keyword">for</span> <span class="identifier">child</span> <span class="relational-operator">in</span> <span class="identifier">group</span> <span class="keyword">if</span> <span class="identifier">child</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widget_config</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">{</span><span class="string-literal">"class"</span><span class="punctuation">:</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">,</span>
                                <span class="string-literal">"id"</span><span class="punctuation">:</span> <span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="string-literal">"tooltip": _RECREATE_OBJECTS["tooltips"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="string-literal">"rc_menu": _RECREATE_OBJECTS["contextmenus"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="string-literal">"pack_info"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack_config_cleaner</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="string-literal">"name"</span><span class="punctuation">:</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_name</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="string-literal">"config"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">config_cleaner</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_all_children_config</span><span class="grouping">(</span><span class="identifier">child</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                                <span class="comment"># Some children have custom kwargs, so keep dicts in sync</span>
                                <span class="string-literal">"custom_kwargs"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_custom_kwargs</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="grouping">}</span>
                               <span class="keyword">for</span> <span class="identifier">idx</span><span class="punctuation">,</span> <span class="identifier">child</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">children</span><span class="grouping">)</span><span class="grouping">]</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Compiled AutoFillContainer children: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widget_config</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="invalid">c</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">h</span><span class="invalid">o</span><span class="invalid">d</span>
    <span class="keyword">def</span> <span class="identifier">_custom_kwargs</span><span class="grouping">(</span><span class="identifier">cls</span><span class="punctuation">,</span> <span class="identifier">widget</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" For custom widgets some custom arguments need to be passed from the old widget to the
        newly created widget.

        Parameters
        ----------
        widget: tkinter widget
            The widget to be checked for custom keyword arguments

        Returns
        -------
        dict
            The custom keyword arguments required for recreating the given widget
        """</span>
        <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"MultiOption"</span><span class="punctuation">:</span>
            <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">_value</span><span class="punctuation">,</span>  <span class="comment"># pylint:disable=protected-access</span>
                          <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">_master_variable</span><span class="grouping">)</span>  <span class="comment"># pylint:disable=protected-access</span>
        <span class="keyword">elif</span> <span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"ToggledFrame"</span><span class="punctuation">:</span>
            <span class="comment"># Toggled Frames need to have their variable tracked</span>
            <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">_text</span><span class="punctuation">,</span>  <span class="comment"># pylint:disable=protected-access</span>
                          <span class="identifier">toggle_var</span><span class="arithmetic-assignment">=</span><span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">_toggle_var</span><span class="grouping">)</span>  <span class="comment"># pylint:disable=protected-access</span>
        <span class="keyword">return</span> <span class="identifier">retval</span>

    <span class="keyword">def</span> <span class="identifier">get_all_children_config</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">widget</span><span class="punctuation">,</span> <span class="identifier">child_list</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return all children, recursively, of given widget.

        Parameters
        ----------
        widget: tkinter widget
            The widget to recursively obtain the configurations of each child
        child_list: list
            The list of child configurations already collected

        Returns
        -------
        list
            The list of configurations for all recursive children of the given widget
         """</span>
        <span class="identifier">unpack</span> <span class="arithmetic-assignment">=</span> <span class="identifier">set</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">child</span> <span class="relational-operator">in</span> <span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">winfo_children</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="comment"># Hidden Toggle Frame boxes need to be mapped</span>
            <span class="keyword">if</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_ismapped</span><span class="grouping">(</span><span class="grouping">)</span> <span class="logical-operator">or</span> <span class="string-literal">"toggledframe_subframe"</span> <span class="relational-operator">in</span> <span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">not_mapped</span> <span class="arithmetic-assignment">=</span> <span class="logical-operator">not</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_ismapped</span><span class="grouping">(</span><span class="grouping">)</span>
                <span class="comment"># ToggleFrame is a custom widget that creates it's own children and handles</span>
                <span class="comment"># bindings on the headers, to auto-hide the contents. To ensure that all child</span>
                <span class="comment"># information (specifically pack information) can be collected, we need to pack</span>
                <span class="comment"># any hidden sub-frames. These are then hidden again once collected.</span>
                <span class="keyword">if</span> <span class="identifier">not_mapped</span> <span class="logical-operator">and</span> <span class="grouping">(</span><span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_name</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"toggledframe_subframe"</span> <span class="logical-operator">or</span>
                                   <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_name</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"chkbuttons"</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
                    <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">update_idletasks</span><span class="grouping">(</span><span class="grouping">)</span>  <span class="comment"># Updates the packing info of children</span>
                    <span class="identifier">unpack</span><span class="punctuation">.</span><span class="identifier">add</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span>

                <span class="keyword">if</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_name</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"toggledframe_header"</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="comment"># Headers should be entirely handled by parent widget</span>
                    <span class="keyword">continue</span>

                <span class="identifier">child_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="grouping">{</span>
                    <span class="string-literal">"class"</span><span class="punctuation">:</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">,</span>
                    <span class="string-literal">"id"</span><span class="punctuation">:</span> <span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"tooltip": _RECREATE_OBJECTS["tooltips"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"rc_menu": _RECREATE_OBJECTS["contextmenus"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"pack_info"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack_config_cleaner</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"name"</span><span class="punctuation">:</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_name</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"config"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">config_cleaner</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"parent"</span><span class="punctuation">:</span> <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">winfo_parent</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="string-literal">"custom_kwargs"</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_custom_kwargs</span><span class="grouping">(</span><span class="identifier">child</span><span class="grouping">)</span><span class="grouping">}</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_all_children_config</span><span class="grouping">(</span><span class="identifier">child</span><span class="punctuation">,</span> <span class="identifier">child_list</span><span class="grouping">)</span>

        <span class="comment"># Re-hide any toggle frames that were expanded</span>
        <span class="keyword">for</span> <span class="identifier">hide</span> <span class="relational-operator">in</span> <span class="identifier">unpack</span><span class="punctuation">:</span>
            <span class="identifier">hide</span><span class="punctuation">.</span><span class="identifier">pack_forget</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">hide</span><span class="punctuation">.</span><span class="identifier">update_idletasks</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">child_list</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">config_cleaner</span><span class="grouping">(</span><span class="identifier">widget</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Some options don't like to be copied, so this returns a cleaned
            configuration from a widget
            We use config() instead of configure() because some items (ttk Scale) do
            not populate configure()"""</span>
        <span class="identifier">new_config</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">key</span> <span class="relational-operator">==</span> <span class="string-literal">"class"</span><span class="punctuation">:</span>
                <span class="keyword">continue</span>
            <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">cget</span><span class="grouping">(</span><span class="identifier">key</span><span class="grouping">)</span>
            <span class="comment"># Some keys default to "" but tkinter doesn't like to set config to this value</span>
            <span class="comment"># so skip them to use default value.</span>
            <span class="keyword">if</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"anchor", "justify", "compound") and val == ""</span><span class="punctuation">:</span>
                <span class="keyword">continue</span>
            <span class="comment"># Following keys cannot be defined after widget is created:</span>
            <span class="keyword">if</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"colormap", "container", "visual"</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="keyword">continue</span>
            <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="identifier">str</span><span class="grouping">(</span><span class="identifier">val</span><span class="grouping">)</span> <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">val</span><span class="punctuation">,</span> <span class="identifier">Tcl_Obj</span><span class="grouping">)</span> <span class="keyword">else</span> <span class="identifier">val</span>
            <span class="comment"># Return correct command from master command dict</span>
            <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_RECREATE_OBJECTS</span><span class="grouping">[</span><span class="string-literal">"commands"][val] if key == "command" and val != ""</span> <span class="keyword">else</span> <span class="identifier">val</span>
            <span class="identifier">new_config</span><span class="grouping">[</span><span class="identifier">key</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">val</span>
        <span class="keyword">return</span> <span class="identifier">new_config</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">pack_config_cleaner</span><span class="grouping">(</span><span class="identifier">widget</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Some options don't like to be copied, so this returns a cleaned
            configuration from a widget """</span>
        <span class="keyword">return</span> <span class="grouping">{</span><span class="identifier">key</span><span class="punctuation">:</span> <span class="identifier">val</span> <span class="keyword">for</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">val</span> <span class="relational-operator">in</span> <span class="identifier">widget</span><span class="punctuation">.</span><span class="identifier">pack_info</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span> <span class="keyword">if</span> <span class="identifier">key</span> <span class="relational-operator">!=</span> <span class="string-literal">"in"</span><span class="grouping">}</span>

    <span class="keyword">def</span> <span class="identifier">destroy_children</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Destroy the currently existing widgets """</span>
        <span class="keyword">for</span> <span class="identifier">subframe</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">subframes</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">child</span> <span class="relational-operator">in</span> <span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">winfo_children</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">child</span><span class="punctuation">.</span><span class="identifier">destroy</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">repack_columns</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Repack or unpack columns based on display columns """</span>
        <span class="keyword">for</span> <span class="identifier">idx</span><span class="punctuation">,</span> <span class="identifier">subframe</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">subframes</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Processing subframe: %s"</span><span class="punctuation">,</span> <span class="identifier">subframe</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">idx</span> <span class="relational-operator">&lt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="logical-operator">and</span> <span class="logical-operator">not</span> <span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">winfo_ismapped</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Packing subframe: %s"</span><span class="punctuation">,</span> <span class="identifier">subframe</span><span class="grouping">)</span>
                <span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">N</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>
            <span class="keyword">elif</span> <span class="identifier">idx</span> <span class="relational-operator">&gt;=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">columns</span> <span class="logical-operator">and</span> <span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">winfo_ismapped</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Forgetting subframe: %s"</span><span class="punctuation">,</span> <span class="identifier">subframe</span><span class="grouping">)</span>
                <span class="identifier">subframe</span><span class="punctuation">.</span><span class="identifier">pack_forget</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">pack_widget_clones</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">widget_dicts</span><span class="punctuation">,</span> <span class="identifier">old_children</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">new_children</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Recursively pass through the list of widgets creating clones and packing all
        children.

        Widgets cannot be given a new parent so we need to clone them and then pack the
        new widgets.

        Parameters
        ----------
        widget_dicts: list
            List of dictionaries, in appearance order, of widget information for cloning widgets
        old_childen: list, optional
            Used for recursion. Leave at ``None``
        new_childen: list, optional
            Used for recursion. Leave at ``None``
        """</span>
        <span class="keyword">for</span> <span class="identifier">widget_dict</span> <span class="relational-operator">in</span> <span class="identifier">widget_dicts</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Cloning widget: %s"</span><span class="punctuation">,</span> <span class="identifier">widget_dict</span><span class="grouping">)</span>
            <span class="identifier">old_children</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span> <span class="keyword">if</span> <span class="identifier">old_children</span> <span class="relational-operator">is</span> <span class="none-literal">None</span> <span class="keyword">else</span> <span class="identifier">old_children</span>
            <span class="identifier">new_children</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span> <span class="keyword">if</span> <span class="identifier">new_children</span> <span class="relational-operator">is</span> <span class="none-literal">None</span> <span class="keyword">else</span> <span class="identifier">new_children</span>
            <span class="keyword">if</span> <span class="identifier">widget_dict</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"parent"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="identifier">parent</span> <span class="arithmetic-assignment">=</span> <span class="identifier">new_children</span><span class="grouping">[</span><span class="identifier">old_children</span><span class="punctuation">.</span><span class="identifier">index</span><span class="grouping">(</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"parent"</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">]</span>
                <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"old parent: '%s', new_parent: '%s'", widget_dict["parent"</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="comment"># Get the next sub-frame if this doesn't have a logged parent</span>
                <span class="identifier">parent</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">subframe</span>
            <span class="identifier">clone</span> <span class="arithmetic-assignment">=</span> <span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"class"</span><span class="grouping">]</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span>
                                         <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"name"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                         <span class="arithmetic-operator">**</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"custom_kwargs"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"config"</span><span class="grouping">]</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="identifier">clone</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="arithmetic-operator">**</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"config"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"tooltip"</span><span class="grouping">]</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="identifier">Tooltip</span><span class="grouping">(</span><span class="identifier">clone</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"tooltip"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">rc_menu</span> <span class="arithmetic-assignment">=</span> <span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"rc_menu"</span><span class="grouping">]</span>
            <span class="keyword">if</span> <span class="identifier">rc_menu</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="comment"># Re-initialize for new widget and bind</span>
                <span class="identifier">rc_menu</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">widget</span><span class="arithmetic-assignment">=</span><span class="identifier">clone</span><span class="grouping">)</span>
                <span class="identifier">rc_menu</span><span class="punctuation">.</span><span class="identifier">cm_bind</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">clone</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="arithmetic-operator">**</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"pack_info"</span><span class="grouping">]</span><span class="grouping">)</span>

            <span class="comment"># Handle ToggledFrame sub-frames. If the parent is not set to expanded, then we need to</span>
            <span class="comment"># hide the sub-frame</span>
            <span class="keyword">if</span> <span class="identifier">clone</span><span class="punctuation">.</span><span class="identifier">winfo_name</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"toggledframe_subframe"</span><span class="punctuation">:</span>
                <span class="identifier">toggle_frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">clone</span><span class="punctuation">.</span><span class="identifier">nametowidget</span><span class="grouping">(</span><span class="identifier">clone</span><span class="punctuation">.</span><span class="identifier">winfo_parent</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
                <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">toggle_frame</span><span class="punctuation">.</span><span class="identifier">is_expanded</span><span class="punctuation">:</span>
                    <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Hiding minimized toggle box: %s"</span><span class="punctuation">,</span> <span class="identifier">clone</span><span class="grouping">)</span>
                    <span class="identifier">clone</span><span class="punctuation">.</span><span class="identifier">pack_forget</span><span class="grouping">(</span><span class="grouping">)</span>

            <span class="identifier">old_children</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"id"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">new_children</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">clone</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">widget_dict</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"children"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack_widget_clones</span><span class="grouping">(</span><span class="identifier">widget_dict</span><span class="grouping">[</span><span class="string-literal">"children"</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">old_children</span><span class="punctuation">,</span> <span class="identifier">new_children</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">ControlBuilder</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Builds and returns a frame containing a tkinter control with label
    This should only be called from the ControlPanel class

    Parameters
    ----------
    parent: tkinter object
        Parent tkinter object
    option: ControlPanelOption object
        Holds all of the required option information
    option_columns: int
        Number of options to put on a single row for check-buttons/radio-buttons
    label_width: int
        Sets the width of the control label
    checkbuttons_frame: tkinter.frame
        If a check-button frame is passed in, then check-buttons will be placed in this frame
        rather than the main options frame
    style: str
        The name of the style to use for the control panel. Styles are configured when TkInter
        initializes. The style name is the common prefix prior to the widget name. Provide an empty
        string to use the OS style
    blank_nones: bool
        Sets selected values to an empty string rather than None if this is true.
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">option</span><span class="punctuation">,</span> <span class="identifier">option_columns</span><span class="punctuation">,</span>  <span class="comment"># pylint: disable=too-many-arguments</span>
                 <span class="identifier">label_width</span><span class="punctuation">,</span> <span class="identifier">checkbuttons_frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="punctuation">,</span> <span class="identifier">blank_nones</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s: (parent: %s, option: %s, option_columns: %s, "</span>
                     <span class="string-literal">"label_width: %s, checkbuttons_frame: %s, style: %s, blank_nones: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">option</span><span class="punctuation">,</span> <span class="identifier">option_columns</span><span class="punctuation">,</span> <span class="identifier">label_width</span><span class="punctuation">,</span>
                     <span class="identifier">checkbuttons_frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="punctuation">,</span> <span class="identifier">blank_nones</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span> <span class="arithmetic-assignment">=</span> <span class="identifier">option</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">option_columns</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">helpset</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">label_width</span> <span class="arithmetic-assignment">=</span> <span class="identifier">label_width</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filebrowser</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>
        <span class="comment"># Default to Control Panel Style</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">style</span> <span class="keyword">if</span> <span class="identifier">style</span> <span class="keyword">else</span> <span class="string-literal">"CPanel."</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">user_theme</span><span class="grouping">[</span><span class="string-literal">"group_panel"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"SPanel"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="arithmetic-operator">**</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">user_theme</span><span class="grouping">[</span><span class="string-literal">"group_settings"</span><span class="grouping">]</span><span class="grouping">}</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">control_frame</span><span class="grouping">(</span><span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">chkbtns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">checkbuttons_frame</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">set_tk_var</span><span class="grouping">(</span><span class="identifier">blank_nones</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">build_control</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="comment"># Frame, control type and variable</span>
    <span class="keyword">def</span> <span class="identifier">control_frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Frame to hold control and it's label """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Build control frame"</span><span class="grouping">)</span>
        <span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span>
                          <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="string-literal">"fr_{}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span><span class="punctuation">,</span>
                          <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TFrame"</span><span class="grouping">)</span>
        <span class="identifier">frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built control frame"</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">frame</span>

    <span class="keyword">def</span> <span class="identifier">set_tk_var</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">blank_nones</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Correct variable type for control """</span>
        <span class="identifier">val</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">""</span> <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">value</span> <span class="relational-operator">is</span> <span class="none-literal">None</span> <span class="logical-operator">and</span> <span class="identifier">blank_nones</span> <span class="keyword">else</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">value</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">val</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Set tk variable: (option: '%s', variable: %s, value: '%s')"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span> <span class="identifier">val</span><span class="grouping">)</span>

    <span class="comment"># Build the full control</span>
    <span class="keyword">def</span> <span class="identifier">build_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build the correct control type for the option passed through """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Build config option control"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Checkbutton</span><span class="punctuation">,</span> <span class="string-literal">"radio", "multi", "colorchooser"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">build_control_label</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">build_one_control</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built option control"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">build_control_label</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Label for control """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Build control label: (option: '%s')"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                        <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">title</span><span class="punctuation">,</span>
                        <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">label_width</span><span class="punctuation">,</span>
                        <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="punctuation">,</span>
                        <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TLabel"</span><span class="grouping">)</span>
        <span class="identifier">lbl</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">N</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">lbl</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built control label: (widget: '%s', title: '%s'"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">build_one_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build and place the option controls """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Build control: '%s')"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="relational-operator">==</span> <span class="string-literal">"scale"</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">slider_control</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"radio", "multi"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_multi_option_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="relational-operator">==</span> <span class="string-literal">"colorchooser"</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_color_control</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="relational-operator">==</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Checkbutton</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">control_to_checkframe</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">control_to_optionsframe</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="relational-operator">!=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Checkbutton</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span> <span class="logical-operator">and</span> <span class="logical-operator">not</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">helpset</span><span class="punctuation">:</span>
                <span class="identifier">tooltip_kwargs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span>
                <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">sysbrowser</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                    <span class="identifier">tooltip_kwargs</span><span class="grouping">[</span><span class="string-literal">"text_variable"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span>
                <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">tooltip_kwargs</span><span class="grouping">)</span>

        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built control: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_multi_option_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">option_type</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create a group of buttons for single or multi-select

        Parameters
        ----------
        option_type: {"radio", "multi"}
            The type of boxes that this control should hold. "radio" for single item select,
            "multi" for multi item select.

        """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Adding %s group: %s"</span><span class="punctuation">,</span> <span class="identifier">option_type</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="identifier">help_intro</span><span class="punctuation">,</span> <span class="identifier">help_items</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_get_multi_help_items</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span><span class="grouping">)</span>
        <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">LabelFrame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                             <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">title</span><span class="punctuation">,</span>
                             <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="string-literal">"{}_labelframe"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">option_type</span><span class="grouping">)</span><span class="punctuation">,</span>
                             <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TLabelframe"</span><span class="grouping">)</span>
        <span class="identifier">holder</span> <span class="arithmetic-assignment">=</span> <span class="identifier">AutoFillContainer</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="punctuation">,</span>
                                   <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                   <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option_columns</span><span class="punctuation">,</span>
                                   <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group."</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">choice</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">choices</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">option_type</span> <span class="relational-operator">==</span> <span class="string-literal">"radio"</span><span class="punctuation">:</span>
                <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Radiobutton</span>
                <span class="identifier">style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="string-literal">"{self._style}Group.TRadiobutton"</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">MultiOption</span>
                <span class="identifier">style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="string-literal">"{self._style}Group.TCheckbutton"</span>

            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ctl</span><span class="grouping">(</span><span class="identifier">holder</span><span class="punctuation">.</span><span class="identifier">subframe</span><span class="punctuation">,</span>
                      <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">choice</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="string-literal">"_", " "</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="identifier">choice</span><span class="punctuation">,</span>
                      <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                      <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">style</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">choice</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">in</span> <span class="identifier">help_items</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">helpset</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>
                <span class="identifier">helptext</span> <span class="arithmetic-assignment">=</span> <span class="identifier">help_items</span><span class="grouping">[</span><span class="identifier">choice</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span>
                <span class="identifier">helptext</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"{}\n\n - {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">help_intro</span><span class="grouping">)</span>
                <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span>
            <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added %s option %s"</span><span class="punctuation">,</span> <span class="identifier">option_type</span><span class="punctuation">,</span> <span class="identifier">choice</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">holder</span><span class="punctuation">.</span><span class="identifier">parent</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_get_multi_help_items</span><span class="grouping">(</span><span class="identifier">helptext</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Split the help text up, for formatted help text, into the individual options
        for multi/radio buttons.

        Parameters
        ----------
        helptext: str
            The raw help text for this cli. option

        Returns
        -------
        tuple (`str`, `dict`)
            The help text intro and a dictionary containing the help text split into separate
            entries for each option choice
        """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"raw help: %s"</span><span class="punctuation">,</span> <span class="identifier">helptext</span><span class="grouping">)</span>
        <span class="identifier">all_help</span> <span class="arithmetic-assignment">=</span> <span class="identifier">helptext</span><span class="punctuation">.</span><span class="identifier">splitlines</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">intro</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">""</span>
        <span class="keyword">if</span> <span class="identifier">any</span><span class="grouping">(</span><span class="identifier">line</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">" - "</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">line</span> <span class="relational-operator">in</span> <span class="identifier">all_help</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">intro</span> <span class="arithmetic-assignment">=</span> <span class="identifier">all_help</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span>
        <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">intro</span><span class="punctuation">,</span>
                  <span class="grouping">{</span><span class="identifier">re</span><span class="punctuation">.</span><span class="identifier">sub</span><span class="grouping">(</span><span class="identifier">r</span><span class="string-literal">"[^A-Za-z0-9\-\_]+", ""</span><span class="punctuation">,</span>
                          <span class="identifier">line</span><span class="punctuation">.</span><span class="identifier">split</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span> <span class="string-literal">" ".join(line.replace("_", " "</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">split</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">[</span><span class="int-literal">1</span><span class="punctuation">:</span><span class="grouping">]</span><span class="grouping">)</span>
                   <span class="keyword">for</span> <span class="identifier">line</span> <span class="relational-operator">in</span> <span class="identifier">all_help</span> <span class="keyword">if</span> <span class="identifier">line</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">" - "</span><span class="grouping">)</span><span class="grouping">}</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"help items: %s"</span><span class="punctuation">,</span> <span class="identifier">retval</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">retval</span>

    <span class="keyword">def</span> <span class="identifier">slider_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" A slider control with corresponding Entry box """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add slider control to Options Frame: (widget: '%s', dtype: %s, "</span>
                     <span class="string-literal">"rounding: %s, min_max: %s)"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">dtype</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">rounding</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">min_max</span><span class="grouping">)</span>
        <span class="identifier">validate</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">slider_check_int</span> <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">dtype</span> <span class="relational-operator">==</span> <span class="identifier">int</span> <span class="keyword">else</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">slider_check_float</span>
        <span class="identifier">vcmd</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">.</span><span class="identifier">register</span><span class="grouping">(</span><span class="identifier">validate</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">tbox</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Entry</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                        <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">8</span><span class="punctuation">,</span>
                        <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                        <span class="identifier">justify</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="punctuation">,</span>
                        <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">t</span><span class="punctuation">,</span>
                        <span class="identifier">validate</span><span class="arithmetic-assignment">=</span><span class="string-literal">"all"</span><span class="punctuation">,</span>
                        <span class="identifier">validatecommand</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="identifier">vcmd</span><span class="punctuation">,</span> <span class="string-literal">"%P"</span><span class="grouping">)</span><span class="punctuation">,</span>
                        <span class="identifier">bg</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"input_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                        <span class="identifier">fg</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"input_font"</span><span class="grouping">]</span><span class="punctuation">,</span>
                        <span class="identifier">highlightbackground</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"input_font"</span><span class="grouping">]</span><span class="punctuation">,</span>
                        <span class="identifier">highlightthickness</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                        <span class="identifier">bd</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="grouping">)</span>
        <span class="identifier">tbox</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">5</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="grouping">)</span>
        <span class="identifier">cmd</span> <span class="arithmetic-assignment">=</span> <span class="identifier">partial</span><span class="grouping">(</span><span class="identifier">set_slider_rounding</span><span class="punctuation">,</span>
                      <span class="identifier">var</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                      <span class="identifier">d_type</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">dtype</span><span class="punctuation">,</span>
                      <span class="identifier">round_to</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">rounding</span><span class="punctuation">,</span>
                      <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">min_max</span><span class="grouping">)</span>
        <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Scale</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                        <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                        <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">cmd</span><span class="punctuation">,</span>
                        <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Horizontal.TScale"</span><span class="grouping">)</span>
        <span class="identifier">_add_command</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">cget</span><span class="grouping">(</span><span class="string-literal">"command"</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">cmd</span><span class="grouping">)</span>
        <span class="identifier">rc_menu</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_get_contextmenu</span><span class="grouping">(</span><span class="identifier">tbox</span><span class="grouping">)</span>
        <span class="identifier">rc_menu</span><span class="punctuation">.</span><span class="identifier">cm_bind</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">ctl</span><span class="grouping">[</span><span class="string-literal">"from_"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">min_max</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span>
        <span class="identifier">ctl</span><span class="grouping">[</span><span class="string-literal">"to"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">min_max</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added slider control to Options Frame: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">ctl</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">slider_check_int</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Validate a slider's text entry box for integer values.

        Parameters
        ----------
        value: str
            The slider text entry value to validate
        """</span>
        <span class="keyword">if</span> <span class="identifier">value</span><span class="punctuation">.</span><span class="identifier">isdigit</span><span class="grouping">(</span><span class="grouping">)</span> <span class="logical-operator">or</span> <span class="identifier">value</span> <span class="relational-operator">==</span> <span class="string-literal">""</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="bool-literal">True</span>
        <span class="keyword">return</span> <span class="bool-literal">False</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">slider_check_float</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Validate a slider's text entry box for float values.
        Parameters
        ----------
        value: str
            The slider text entry value to validate
        """</span>
        <span class="keyword">if</span> <span class="identifier">value</span><span class="punctuation">:</span>
            <span class="keyword">try</span><span class="punctuation">:</span>
                <span class="identifier">float</span><span class="grouping">(</span><span class="identifier">value</span><span class="grouping">)</span>
            <span class="keyword">except</span> <span class="identifier">ValueError</span><span class="punctuation">:</span>
                <span class="keyword">return</span> <span class="bool-literal">False</span>
        <span class="keyword">return</span> <span class="bool-literal">True</span>

    <span class="keyword">def</span> <span class="identifier">control_to_optionsframe</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Standard non-check buttons sit in the main options frame """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add control to Options Frame: (widget: '%s', control: %s, choices: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">choices</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">sysbrowser</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filebrowser</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FileBrowser</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span>
                                           <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                                           <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                                           <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">sysbrowser</span><span class="punctuation">,</span>
                                           <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span> <span class="relational-operator">==</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Entry</span><span class="punctuation">:</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                                      <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                                      <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">t</span><span class="punctuation">,</span>
                                      <span class="identifier">bg</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"input_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                      <span class="identifier">fg</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"input_font"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                      <span class="identifier">highlightbackground</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_theme</span><span class="grouping">[</span><span class="string-literal">"input_font"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                      <span class="identifier">highlightthickness</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                                      <span class="identifier">bd</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>  <span class="comment"># Combobox</span>
            <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span>
                                      <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                                      <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">t</span><span class="punctuation">,</span>
                                      <span class="identifier">state</span><span class="arithmetic-assignment">=</span><span class="string-literal">"readonly"</span><span class="punctuation">,</span>
                                      <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}TCombobox"</span><span class="grouping">)</span>

            <span class="comment"># Style for combo list boxes needs to be set directly on widget as no style parameter</span>
            <span class="identifier">cmd</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="string-literal">"[ttk::combobox::PopdownWindow {ctl}].f.l configure -"</span>
            <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">eval</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{cmd}foreground {self._theme['input_font']}"</span><span class="grouping">)</span>
            <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">eval</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{cmd}background {self._theme['input_color']}"</span><span class="grouping">)</span>
            <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">eval</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{cmd}selectforeground {self._theme['control_active']}"</span><span class="grouping">)</span>
            <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">eval</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{cmd}selectbackground {self._theme['control_disabled']}"</span><span class="grouping">)</span>

        <span class="identifier">rc_menu</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_get_contextmenu</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="grouping">)</span>
        <span class="identifier">rc_menu</span><span class="punctuation">.</span><span class="identifier">cm_bind</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">choices</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Adding combo choices: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">choices</span><span class="grouping">)</span>
            <span class="identifier">ctl</span><span class="grouping">[</span><span class="string-literal">"values"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">choices</span>
            <span class="identifier">ctl</span><span class="grouping">[</span><span class="string-literal">"state"] = "readonly"</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added control to Options Frame: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">ctl</span>

    <span class="keyword">def</span> <span class="identifier">_color_control</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Clickable label holding the currently selected color """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add control to Options Frame: (widget: '%s', control: %s, choices: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">choices</span><span class="grouping">)</span>
        <span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TFrame"</span><span class="grouping">)</span>
        <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span>
                       <span class="identifier">bg</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="punctuation">,</span>
                       <span class="identifier">bd</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span>
                       <span class="identifier">cursor</span><span class="arithmetic-assignment">=</span><span class="string-literal">"hand2"</span><span class="punctuation">,</span>
                       <span class="identifier">relief</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">SUNKEN</span><span class="punctuation">,</span>
                       <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="identifier">round</span><span class="grouping">(</span><span class="identifier">int</span><span class="grouping">(</span><span class="int-literal">20</span> <span class="arithmetic-operator">*</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">scaling_factor</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">,</span>
                       <span class="identifier">height</span><span class="arithmetic-assignment">=</span><span class="identifier">round</span><span class="grouping">(</span><span class="identifier">int</span><span class="grouping">(</span><span class="int-literal">12</span> <span class="arithmetic-operator">*</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">scaling_factor</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">bind</span><span class="grouping">(</span><span class="string-literal">"&lt;Button-1&gt;"</span><span class="punctuation">,</span> <span class="keyword">lambda</span> <span class="arithmetic-operator">*</span><span class="identifier">e</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="arithmetic-assignment">=</span><span class="identifier">ctl</span><span class="punctuation">,</span> <span class="identifier">t</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">title</span><span class="punctuation">:</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_ask_color</span><span class="grouping">(</span><span class="identifier">c</span><span class="punctuation">,</span> <span class="identifier">t</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
        <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span>
                        <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">title</span><span class="punctuation">,</span>
                        <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">label_width</span><span class="punctuation">,</span>
                        <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="punctuation">,</span>
                        <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TLabel"</span><span class="grouping">)</span>
        <span class="identifier">lbl</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">N</span><span class="grouping">)</span>
        <span class="identifier">frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">lbl</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added control to Options Frame: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">ctl</span>

    <span class="keyword">def</span> <span class="identifier">_ask_color</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">title</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Pop ask color dialog set to variable and change frame color """</span>
        <span class="identifier">color</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">chosen</span> <span class="arithmetic-assignment">=</span> <span class="identifier">colorchooser</span><span class="punctuation">.</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">c</span><span class="invalid">o</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">r</span><span class="grouping">(</span><span class="identifier">color</span><span class="arithmetic-assignment">=</span><span class="identifier">color</span><span class="punctuation">,</span> <span class="identifier">title</span><span class="arithmetic-assignment">=</span><span class="string-literal">"{} Color"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">title</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">chosen</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span>
        <span class="identifier">frame</span><span class="punctuation">.</span><span class="identifier">config</span><span class="grouping">(</span><span class="identifier">bg</span><span class="arithmetic-assignment">=</span><span class="identifier">chosen</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">chosen</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">control_to_checkframe</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add check-buttons to the check-button frame """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add control checkframe: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="identifier">chkframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">chkbtns</span><span class="punctuation">.</span><span class="identifier">subframe</span>
        <span class="identifier">ctl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">control</span><span class="grouping">(</span><span class="identifier">chkframe</span><span class="punctuation">,</span>
                                  <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span>
                                  <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">title</span><span class="punctuation">,</span>
                                  <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">,</span>
                                  <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TCheckbutton"</span><span class="grouping">)</span>
        <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">ctl</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">helptext</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span>
        <span class="identifier">ctl</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added control checkframe: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">name</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">ctl</span>


<span class="keyword">class</span> <span class="identifier">FileBrowser</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Add FileBrowser buttons to control and handle routing """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">opt_name</span><span class="punctuation">,</span> <span class="identifier">tk_var</span><span class="punctuation">,</span> <span class="identifier">control_frame</span><span class="punctuation">,</span> <span class="identifier">sysbrowser_dict</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing: %s: (tk_var: %s, control_frame: %s, sysbrowser_dict: %s, "</span>
                     <span class="string-literal">"style: %s)"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">tk_var</span><span class="punctuation">,</span> <span class="identifier">control_frame</span><span class="punctuation">,</span>
                     <span class="identifier">sysbrowser_dict</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_opt_name</span> <span class="arithmetic-assignment">=</span> <span class="identifier">opt_name</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk_var</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">control_frame</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">style</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">browser</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sysbrowser_dict</span><span class="grouping">[</span><span class="string-literal">"browser"</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filetypes</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sysbrowser_dict</span><span class="grouping">[</span><span class="string-literal">"filetypes"</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">action_option</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">c</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">o</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="grouping">(</span><span class="identifier">sysbrowser_dict</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"action_option"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sysbrowser_dict</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"command"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">destination</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sysbrowser_dict</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"destination"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add_browser_buttons</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">helptext</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Dict containing tooltip text for buttons """</span>
        <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">folder</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a folder..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">load</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a file..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">load2</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a file..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">picture</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a folder of images..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">video</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a video..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">model</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a model folder..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">multi_load</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select one or more files..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">context</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a file or folder..."</span><span class="grouping">)</span><span class="punctuation">,</span>
                      <span class="identifier">save_as</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Select a save location..."</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">retval</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">c</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">o</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="grouping">(</span><span class="identifier">action_option</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Format the action option to remove any dashes at the start """</span>
        <span class="keyword">if</span> <span class="identifier">action_option</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">action_option</span>
        <span class="keyword">if</span> <span class="identifier">action_option</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"--"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">action_option</span><span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">:</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">action_option</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"-"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">action_option</span><span class="grouping">[</span><span class="int-literal">1</span><span class="punctuation">:</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">action_option</span>

    <span class="keyword">def</span> <span class="identifier">add_browser_buttons</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add correct file browser button for control """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Adding browser buttons: (sysbrowser: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">browser</span><span class="grouping">)</span>
        <span class="identifier">frame</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="identifier">f</span><span class="string-literal">"{self._style}Group.TFrame"</span><span class="grouping">)</span>
        <span class="identifier">frame</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">5</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="keyword">for</span> <span class="identifier">browser</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">browser</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">browser</span> <span class="relational-operator">==</span> <span class="string-literal">"save"</span><span class="punctuation">:</span>
                <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"save_as"</span>
            <span class="keyword">elif</span> <span class="identifier">browser</span> <span class="relational-operator">==</span> <span class="string-literal">"load" and self.filetypes == "video"</span><span class="punctuation">:</span>
                <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filetypes</span>
            <span class="keyword">elif</span> <span class="identifier">browser</span> <span class="relational-operator">==</span> <span class="string-literal">"load"</span><span class="punctuation">:</span>
                <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"load2"</span>
            <span class="keyword">elif</span> <span class="identifier">browser</span> <span class="relational-operator">==</span> <span class="string-literal">"folder" and (self._opt_name.startswith(("frames", "faces"</span><span class="grouping">)</span><span class="grouping">)</span>
                                          <span class="logical-operator">or</span> <span class="string-literal">"input"</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_opt_name</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"picture"</span>
            <span class="keyword">elif</span> <span class="identifier">browser</span> <span class="relational-operator">==</span> <span class="string-literal">"folder" and "model"</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_opt_name</span><span class="punctuation">:</span>
                <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"model"</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">lbl</span> <span class="arithmetic-assignment">=</span> <span class="identifier">browser</span>
            <span class="identifier">img</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_images</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">icons</span><span class="grouping">[</span><span class="identifier">lbl</span><span class="grouping">]</span>
            <span class="identifier">action</span> <span class="arithmetic-assignment">=</span> <span class="identifier">getattr</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="string-literal">"ask_"</span> <span class="arithmetic-operator">+</span> <span class="identifier">browser</span><span class="grouping">)</span>
            <span class="identifier">cmd</span> <span class="arithmetic-assignment">=</span> <span class="identifier">partial</span><span class="grouping">(</span><span class="identifier">action</span><span class="punctuation">,</span> <span class="identifier">filepath</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tk_var</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filetypes</span><span class="grouping">)</span>
            <span class="identifier">fileopn</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">Button</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span>
                                <span class="identifier">image</span><span class="arithmetic-assignment">=</span><span class="identifier">img</span><span class="punctuation">,</span>
                                <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">cmd</span><span class="punctuation">,</span>
                                <span class="identifier">relief</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">SOLID</span><span class="punctuation">,</span>
                                <span class="identifier">bd</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                                <span class="identifier">bg</span><span class="arithmetic-assignment">=</span><span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">user_theme</span><span class="grouping">[</span><span class="string-literal">"group_panel"]["button_background"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                <span class="identifier">cursor</span><span class="arithmetic-assignment">=</span><span class="string-literal">"hand2"</span><span class="grouping">)</span>
            <span class="identifier">_add_command</span><span class="grouping">(</span><span class="identifier">fileopn</span><span class="punctuation">.</span><span class="identifier">cget</span><span class="grouping">(</span><span class="string-literal">"command"</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">cmd</span><span class="grouping">)</span>
            <span class="identifier">fileopn</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="grouping">)</span>
            <span class="identifier">_get_tooltip</span><span class="grouping">(</span><span class="identifier">fileopn</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">helptext</span><span class="grouping">[</span><span class="identifier">lbl</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">600</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added browser buttons: (action: %s, filetypes: %s"</span><span class="punctuation">,</span>
                         <span class="identifier">action</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filetypes</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">set_context_action_option</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">options</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the tk_var for the source action option
            that dictates the context sensitive file browser. """</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">browser</span> <span class="relational-operator">!=</span> <span class="grouping">[</span><span class="string-literal">"context"</span><span class="grouping">]</span><span class="punctuation">:</span>
            <span class="keyword">return</span>
        <span class="identifier">actions</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="identifier">opt</span><span class="punctuation">.</span><span class="identifier">name</span><span class="punctuation">:</span> <span class="identifier">opt</span><span class="punctuation">.</span><span class="identifier">tk_var</span> <span class="keyword">for</span> <span class="identifier">opt</span> <span class="relational-operator">in</span> <span class="identifier">options</span><span class="grouping">}</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Settiong action option for opt %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">action_option</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">action_option</span> <span class="arithmetic-assignment">=</span> <span class="identifier">actions</span><span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">action_option</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">l</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">r</span><span class="grouping">(</span><span class="identifier">filepath</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Pop-up to get path to a directory
            :param filepath: tkinter StringVar object
            that will store the path to a directory.
            :param filetypes: Unused argument to allow
            filetypes to be given in ask_load(). """</span>
        <span class="identifier">dirname</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FileHandler</span><span class="grouping">(</span><span class="string-literal">"dir"</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">u</span><span class="invalid">r</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">l</span><span class="invalid">e</span>
        <span class="keyword">if</span> <span class="identifier">dirname</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="identifier">dirname</span><span class="grouping">)</span>
            <span class="identifier">filepath</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">dirname</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">_</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">a</span><span class="invalid">d</span><span class="grouping">(</span><span class="identifier">filepath</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Pop-up to get path to a file """</span>
        <span class="identifier">filename</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FileHandler</span><span class="grouping">(</span><span class="string-literal">"filename"</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">u</span><span class="invalid">r</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">l</span><span class="invalid">e</span>
        <span class="keyword">if</span> <span class="identifier">filename</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span>
            <span class="identifier">filepath</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">_</span><span class="invalid">m</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">_</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">a</span><span class="invalid">d</span><span class="grouping">(</span><span class="identifier">filepath</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Pop-up to get path to a file """</span>
        <span class="identifier">filenames</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FileHandler</span><span class="grouping">(</span><span class="string-literal">"filename_multi"</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">u</span><span class="invalid">r</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">l</span><span class="invalid">e</span>
        <span class="keyword">if</span> <span class="identifier">filenames</span><span class="punctuation">:</span>
            <span class="identifier">final_names</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">" ".join("\"{}\""</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">fname</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">fname</span> <span class="relational-operator">in</span> <span class="identifier">filenames</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="identifier">final_names</span><span class="grouping">)</span>
            <span class="identifier">filepath</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">final_names</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">_</span><span class="invalid">s</span><span class="invalid">a</span><span class="invalid">v</span><span class="invalid">e</span><span class="grouping">(</span><span class="identifier">filepath</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Pop-up to get path to save a new file """</span>
        <span class="identifier">filename</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FileHandler</span><span class="grouping">(</span><span class="string-literal">"save_filename"</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">u</span><span class="invalid">r</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">l</span><span class="invalid">e</span>
        <span class="keyword">if</span> <span class="identifier">filename</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span>
            <span class="identifier">filepath</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">_</span><span class="invalid">n</span><span class="invalid">o</span><span class="invalid">t</span><span class="invalid">h</span><span class="invalid">i</span><span class="invalid">n</span><span class="invalid">g</span><span class="grouping">(</span><span class="identifier">filepath</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=unused-argument</span>
        <span class="comment">""" Method that does nothing, used for disabling open/save pop up """</span>
        <span class="keyword">return</span>

    <span class="keyword">def</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">k</span><span class="invalid">_</span><span class="invalid">c</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">x</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">filepath</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Method to pop the correct dialog depending on context """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Getting context filebrowser"</span><span class="grouping">)</span>
        <span class="identifier">selected_action</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">action_option</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">selected_variable</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">destination</span>
        <span class="identifier">filename</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FileHandler</span><span class="grouping">(</span><span class="string-literal">"context"</span><span class="punctuation">,</span>
                               <span class="identifier">filetypes</span><span class="punctuation">,</span>
                               <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="punctuation">,</span>
                               <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">selected_action</span><span class="punctuation">,</span>
                               <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">selected_variable</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">u</span><span class="invalid">r</span><span class="invalid">n</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">l</span><span class="invalid">e</span>
        <span class="keyword">if</span> <span class="identifier">filename</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span>
            <span class="identifier">filepath</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span>

    </pre>
  </body>
</html>