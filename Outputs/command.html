<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#!/usr/bin python3</span>
<span class="comment">""" The command frame for Faceswap GUI """</span>

<span class="keyword">import</span> <span class="identifier">logging</span>
<span class="keyword">import</span> <span class="identifier">gettext</span>
<span class="keyword">import</span> <span class="identifier">tkinter</span> <span class="keyword">as</span> <span class="identifier">tk</span>
<span class="keyword">from</span> <span class="identifier">tkinter</span> <span class="keyword">import</span> <span class="identifier">ttk</span>

<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">control_helper</span> <span class="keyword">import</span> <span class="identifier">ControlPanel</span>
<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">custom_widgets</span> <span class="keyword">import</span> <span class="identifier">Tooltip</span>
<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">utils</span> <span class="keyword">import</span> <span class="identifier">get_images</span><span class="punctuation">,</span> <span class="identifier">get_config</span>

<span class="identifier">logger</span> <span class="arithmetic-assignment">=</span> <span class="identifier">logging</span><span class="punctuation">.</span><span class="identifier">getLogger</span><span class="grouping">(</span><span class="identifier">__name__</span><span class="grouping">)</span>  <span class="comment"># pylint:disable=invalid-name</span>

<span class="comment"># LOCALES</span>
<span class="identifier">_LANG</span> <span class="arithmetic-assignment">=</span> <span class="identifier">gettext</span><span class="punctuation">.</span><span class="identifier">translation</span><span class="grouping">(</span><span class="string-literal">"gui.tooltips", localedir="locales"</span><span class="punctuation">,</span> <span class="identifier">fallback</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
<span class="identifier">_</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_LANG</span><span class="punctuation">.</span><span class="identifier">gettext</span>


<span class="keyword">class</span> <span class="identifier">CommandNotebook</span><span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Notebook</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-many-ancestors</span>
    <span class="comment">""" Frame to hold each individual tab of the command notebook """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s: (parent: %s)"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">actionbtns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">add</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tools_notebook</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ToolsNotebook</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">set_running_task_trace</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">build_tabs</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">modified_vars</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_set_modified_vars</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">set_command_notebook</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">tab_names</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" dict: Command tab titles with their IDs """</span>
        <span class="keyword">return</span> <span class="grouping">{</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tab</span><span class="grouping">(</span><span class="identifier">tab_id</span><span class="punctuation">,</span> <span class="string-literal">"text"</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span> <span class="identifier">tab_id</span>
                <span class="keyword">for</span> <span class="identifier">tab_id</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">index</span><span class="grouping">(</span><span class="string-literal">"end"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">}</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">tools_tab_names</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" dict: Tools tab titles with their IDs """</span>
        <span class="keyword">return</span> <span class="grouping">{</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tools_notebook</span><span class="punctuation">.</span><span class="identifier">tab</span><span class="grouping">(</span><span class="identifier">tab_id</span><span class="punctuation">,</span> <span class="string-literal">"text"</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span> <span class="identifier">tab_id</span>
                <span class="keyword">for</span> <span class="identifier">tab_id</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tools_notebook</span><span class="punctuation">.</span><span class="identifier">index</span><span class="grouping">(</span><span class="string-literal">"end"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">}</span>

    <span class="keyword">def</span> <span class="identifier">set_running_task_trace</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set trigger action for the running task
            to change the action buttons text and command """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Set running trace"</span><span class="grouping">)</span>
        <span class="identifier">tk_vars</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">tk_vars</span>
        <span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"runningtask"].trace("w"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">change_action_button</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">build_tabs</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build the tabs for the relevant command """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Build Tabs"</span><span class="grouping">)</span>
        <span class="identifier">cli_opts</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">cli_opts</span>
        <span class="keyword">for</span> <span class="identifier">category</span> <span class="relational-operator">in</span> <span class="identifier">cli_opts</span><span class="punctuation">.</span><span class="identifier">categories</span><span class="punctuation">:</span>
            <span class="identifier">book</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tools_notebook</span> <span class="keyword">if</span> <span class="identifier">category</span> <span class="relational-operator">==</span> <span class="string-literal">"tools"</span> <span class="keyword">else</span> <span class="identifier">self</span>
            <span class="identifier">cmdlist</span> <span class="arithmetic-assignment">=</span> <span class="identifier">cli_opts</span><span class="punctuation">.</span><span class="identifier">commands</span><span class="grouping">[</span><span class="identifier">category</span><span class="grouping">]</span>
            <span class="keyword">for</span> <span class="identifier">command</span> <span class="relational-operator">in</span> <span class="identifier">cmdlist</span><span class="punctuation">:</span>
                <span class="identifier">title</span> <span class="arithmetic-assignment">=</span> <span class="identifier">command</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span>
                <span class="identifier">commandtab</span> <span class="arithmetic-assignment">=</span> <span class="identifier">CommandTab</span><span class="grouping">(</span><span class="identifier">book</span><span class="punctuation">,</span> <span class="identifier">category</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="grouping">)</span>
                <span class="identifier">book</span><span class="punctuation">.</span><span class="identifier">add</span><span class="grouping">(</span><span class="identifier">commandtab</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">title</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tools_notebook</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Tools"</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built Tabs"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">change_action_button</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Change the action button to relevant control """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Update Action Buttons: (args: %s"</span><span class="punctuation">,</span> <span class="identifier">args</span><span class="grouping">)</span>
        <span class="identifier">tk_vars</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">tk_vars</span>

        <span class="keyword">for</span> <span class="identifier">cmd</span><span class="punctuation">,</span> <span class="identifier">action</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">actionbtns</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">btnact</span> <span class="arithmetic-assignment">=</span> <span class="identifier">action</span>
            <span class="keyword">if</span> <span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"runningtask"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">ttl</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">" Stop"</span>
                <span class="identifier">img</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_images</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">icons</span><span class="grouping">[</span><span class="string-literal">"stop"</span><span class="grouping">]</span>
                <span class="identifier">hlp</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Exit the running process"</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">ttl</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">" {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">cmd</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
                <span class="identifier">img</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_images</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">icons</span><span class="grouping">[</span><span class="string-literal">"start"</span><span class="grouping">]</span>
                <span class="identifier">hlp</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Run the {} script"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">cmd</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Updated Action Button: '%s'"</span><span class="punctuation">,</span> <span class="identifier">ttl</span><span class="grouping">)</span>
            <span class="identifier">btnact</span><span class="punctuation">.</span><span class="identifier">config</span><span class="grouping">(</span><span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">ttl</span><span class="punctuation">,</span> <span class="identifier">image</span><span class="arithmetic-assignment">=</span><span class="identifier">img</span><span class="grouping">)</span>
            <span class="identifier">Tooltip</span><span class="grouping">(</span><span class="identifier">btnact</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">hlp</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">200</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_set_modified_vars</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the tkinter variable for each tab to indicate whether contents
        have been modified """</span>
        <span class="identifier">tkvars</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">tab</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tab_names</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">tab</span> <span class="relational-operator">==</span> <span class="string-literal">"tools"</span><span class="punctuation">:</span>
                <span class="keyword">for</span> <span class="identifier">ttab</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">tools_tab_names</span><span class="punctuation">:</span>
                    <span class="identifier">var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BooleanVar</span><span class="grouping">(</span><span class="grouping">)</span>
                    <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="bool-literal">False</span><span class="grouping">)</span>
                    <span class="identifier">tkvars</span><span class="grouping">[</span><span class="identifier">ttab</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">var</span>
                <span class="keyword">continue</span>
            <span class="identifier">var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BooleanVar</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="bool-literal">False</span><span class="grouping">)</span>
            <span class="identifier">tkvars</span><span class="grouping">[</span><span class="identifier">tab</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">var</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Set modified vars: %s"</span><span class="punctuation">,</span> <span class="identifier">tkvars</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">tkvars</span>


<span class="keyword">class</span> <span class="identifier">ToolsNotebook</span><span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Notebook</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-many-ancestors</span>
    <span class="comment">""" Tools sit in their own tab, but need to inherit objects from the main command notebook """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">actionbtns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">actionbtns</span>


<span class="keyword">class</span> <span class="identifier">CommandTab</span><span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-many-ancestors</span>
    <span class="comment">""" Frame to hold each individual tab of the command notebook """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">category</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s: (category: '%s', command: '%s')"</span><span class="punctuation">,</span>
                     <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">category</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="string-literal">"tab_{}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">command</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">category</span> <span class="arithmetic-assignment">=</span> <span class="identifier">category</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">actionbtns</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">actionbtns</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span> <span class="arithmetic-assignment">=</span> <span class="identifier">command</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">build_tab</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">build_tab</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build the tab """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Build Tab: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="grouping">)</span>
        <span class="identifier">options</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">cli_opts</span><span class="punctuation">.</span><span class="identifier">opts</span><span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="grouping">]</span>
        <span class="identifier">cp_opts</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">val</span><span class="grouping">[</span><span class="string-literal">"cpanel_option"] for key, val in options.items() if key != "helptext"</span><span class="grouping">]</span>
        <span class="identifier">ControlPanel</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span>
                     <span class="identifier">cp_opts</span><span class="punctuation">,</span>
                     <span class="identifier">label_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">16</span><span class="punctuation">,</span>
                     <span class="identifier">option_columns</span><span class="arithmetic-assignment">=</span><span class="int-literal">3</span><span class="punctuation">,</span>
                     <span class="identifier">columns</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                     <span class="identifier">header_text</span><span class="arithmetic-assignment">=</span><span class="identifier">options</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"helptext"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
                     <span class="identifier">style</span><span class="arithmetic-assignment">=</span><span class="string-literal">"CPanel"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add_frame_separator</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">ActionFrame</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built Tab: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">add_frame_separator</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add a separator between top and bottom frames """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add frame seperator"</span><span class="grouping">)</span>
        <span class="identifier">sep</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">height</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="identifier">relief</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIDGE</span><span class="grouping">)</span>
        <span class="identifier">sep</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added frame seperator"</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">ActionFrame</span><span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-many-ancestors</span>
    <span class="comment">"""Action Frame - Displays action controls for the command tab """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s: (command: '%s')"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">command</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTTOM</span><span class="punctuation">,</span> <span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">N</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">command</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add_action_button</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">category</span><span class="punctuation">,</span>
                               <span class="identifier">parent</span><span class="punctuation">.</span><span class="identifier">actionbtns</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">add_action_button</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">category</span><span class="punctuation">,</span> <span class="identifier">actionbtns</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add the action buttons for page """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Add action buttons: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">)</span>
        <span class="identifier">actframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">actframe</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="grouping">)</span>

        <span class="identifier">tk_vars</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">tk_vars</span>
        <span class="identifier">var_value</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"{},{}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">category</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="grouping">)</span>

        <span class="identifier">btngen</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Button</span><span class="grouping">(</span><span class="identifier">actframe</span><span class="punctuation">,</span>
                            <span class="identifier">image</span><span class="arithmetic-assignment">=</span><span class="identifier">get_images</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">icons</span><span class="grouping">[</span><span class="string-literal">"generate"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">" Generate"</span><span class="punctuation">,</span>
                            <span class="identifier">compound</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span>
                            <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">14</span><span class="punctuation">,</span>
                            <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="keyword">lambda</span><span class="punctuation">:</span> <span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"generate"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">var_value</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">btngen</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="grouping">)</span>
        <span class="identifier">Tooltip</span><span class="grouping">(</span><span class="identifier">btngen</span><span class="punctuation">,</span>
                <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Output command line options to the console"</span><span class="grouping">)</span><span class="punctuation">,</span>
                <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">200</span><span class="grouping">)</span>

        <span class="identifier">btnact</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Button</span><span class="grouping">(</span><span class="identifier">actframe</span><span class="punctuation">,</span>
                            <span class="identifier">image</span><span class="arithmetic-assignment">=</span><span class="identifier">get_images</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">icons</span><span class="grouping">[</span><span class="string-literal">"start"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">" {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">)</span><span class="punctuation">,</span>
                            <span class="identifier">compound</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span>
                            <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">14</span><span class="punctuation">,</span>
                            <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="keyword">lambda</span><span class="punctuation">:</span> <span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"action"</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="identifier">var_value</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">btnact</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
        <span class="identifier">Tooltip</span><span class="grouping">(</span><span class="identifier">btnact</span><span class="punctuation">,</span>
                <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Run the {} script"</span><span class="grouping">)</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">)</span><span class="punctuation">,</span>
                <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">200</span><span class="grouping">)</span>
        <span class="identifier">actionbtns</span><span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">command</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">btnact</span>

        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Added action buttons: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">)</span>

    </pre>
  </body>
</html>