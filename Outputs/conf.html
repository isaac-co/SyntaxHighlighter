<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment"># -*- coding: utf-8 -*-</span>
<span class="comment">#</span>
<span class="comment"># scikit-learn documentation build configuration file, created by</span>
<span class="comment"># sphinx-quickstart on Fri Jan  8 09:13:42 2010.</span>
<span class="comment">#</span>
<span class="comment"># This file is execfile()d with the current directory set to its containing</span>
<span class="comment"># dir.</span>
<span class="comment">#</span>
<span class="comment"># Note that not all possible configuration values are present in this</span>
<span class="comment"># autogenerated file.</span>
<span class="comment">#</span>
<span class="comment"># All configuration values have a default; values that are commented out</span>
<span class="comment"># serve to show the default.</span>

<span class="keyword">import</span> <span class="identifier">sys</span>
<span class="keyword">import</span> <span class="identifier">os</span>
<span class="keyword">import</span> <span class="identifier">warnings</span>
<span class="keyword">import</span> <span class="identifier">re</span>
<span class="keyword">from</span> <span class="identifier">datetime</span> <span class="keyword">import</span> <span class="identifier">datetime</span>
<span class="keyword">from</span> <span class="identifier">packaging</span><span class="punctuation">.</span><span class="identifier">version</span> <span class="keyword">import</span> <span class="identifier">parse</span>
<span class="keyword">from</span> <span class="identifier">pathlib</span> <span class="keyword">import</span> <span class="identifier">Path</span>
<span class="keyword">from</span> <span class="identifier">io</span> <span class="keyword">import</span> <span class="identifier">StringIO</span>

<span class="comment"># If extensions (or modules to document with autodoc) are in another</span>
<span class="comment"># directory, add these directories to sys.path here. If the directory</span>
<span class="comment"># is relative to the documentation root, use os.path.abspath to make it</span>
<span class="comment"># absolute, like shown here.</span>
<span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">insert</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">abspath</span><span class="grouping">(</span><span class="string-literal">'sphinxext'</span><span class="grouping">)</span><span class="grouping">)</span>

<span class="keyword">from</span> <span class="identifier">github_link</span> <span class="keyword">import</span> <span class="identifier">make_linkcode_resolve</span>
<span class="keyword">import</span> <span class="identifier">sphinx_gallery</span>

<span class="comment"># -- General configuration ---------------------------------------------------</span>

<span class="comment"># Add any Sphinx extension module names here, as strings. They can be</span>
<span class="comment"># extensions coming with Sphinx (named 'sphinx.ext.*') or your custom ones.</span>
<span class="identifier">extensions</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
    <span class="string-literal">'sphinx.ext.autodoc', 'sphinx.ext.autosummary'</span><span class="punctuation">,</span>
    <span class="string-literal">'numpydoc'</span><span class="punctuation">,</span>
    <span class="string-literal">'sphinx.ext.linkcode', 'sphinx.ext.doctest'</span><span class="punctuation">,</span>
    <span class="string-literal">'sphinx.ext.intersphinx'</span><span class="punctuation">,</span>
    <span class="string-literal">'sphinx.ext.imgconverter'</span><span class="punctuation">,</span>
    <span class="string-literal">'sphinx_gallery.gen_gallery'</span><span class="punctuation">,</span>
    <span class="string-literal">'sphinx_issues'</span><span class="punctuation">,</span>
    <span class="string-literal">'add_toctree_functions'</span><span class="punctuation">,</span>
    <span class="string-literal">'sphinx-prompt'</span><span class="punctuation">,</span>
<span class="grouping">]</span>

<span class="comment"># this is needed for some reason...</span>
<span class="comment"># see https://github.com/numpy/numpydoc/issues/69</span>
<span class="identifier">numpydoc_class_members_toctree</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>


<span class="comment"># For maths, use mathjax by default and svg if NO_MATHJAX env variable is set</span>
<span class="comment"># (useful for viewing the doc offline)</span>
<span class="keyword">if</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">environ</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">'NO_MATHJAX'</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">extensions</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="string-literal">'sphinx.ext.imgmath'</span><span class="grouping">)</span>
    <span class="identifier">imgmath_image_format</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'svg'</span>
    <span class="identifier">mathjax_path</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">''</span>
<span class="keyword">else</span><span class="punctuation">:</span>
    <span class="identifier">extensions</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="string-literal">'sphinx.ext.mathjax'</span><span class="grouping">)</span>
    <span class="identifier">mathjax_path</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="string-literal">'https://cdn.jsdelivr.net/npm/mathjax@3/es5/'</span>
                    <span class="string-literal">'tex-chtml.js'</span><span class="grouping">)</span>

<span class="identifier">autodoc_default_options</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">'members'</span><span class="punctuation">:</span> <span class="bool-literal">True</span><span class="punctuation">,</span>
    <span class="string-literal">'inherited-members'</span><span class="punctuation">:</span> <span class="bool-literal">True</span>
<span class="grouping">}</span>

<span class="comment"># Add any paths that contain templates here, relative to this directory.</span>
<span class="identifier">templates_path</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">'templates'</span><span class="grouping">]</span>

<span class="comment"># generate autosummary even if no references</span>
<span class="identifier">autosummary_generate</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>

<span class="comment"># The suffix of source filenames.</span>
<span class="identifier">source_suffix</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'.rst'</span>

<span class="comment"># The encoding of source files.</span>
<span class="comment">#source_encoding = 'utf-8'</span>

<span class="comment"># The main toctree document.</span>
<span class="identifier">main_doc</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'contents'</span>

<span class="comment"># General information about the project.</span>
<span class="identifier">project</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'scikit-learn'</span>
<span class="identifier">copyright</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span>
    <span class="identifier">f</span><span class="string-literal">'2007 - {datetime.now().year}, scikit-learn developers (BSD License)'</span>
<span class="grouping">)</span>

<span class="comment"># The version info for the project you're documenting, acts as replacement for</span>
<span class="comment"># |version| and |release|, also used in various other places throughout the</span>
<span class="comment"># built documents.</span>
<span class="comment">#</span>
<span class="comment"># The short X.Y version.</span>
<span class="keyword">import</span> <span class="identifier">sklearn</span>
<span class="identifier">parsed_version</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parse</span><span class="grouping">(</span><span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">__version__</span><span class="grouping">)</span>
<span class="identifier">version</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">".".join(parsed_version.base_version.split("."</span><span class="grouping">)</span><span class="grouping">[</span><span class="punctuation">:</span><span class="int-literal">2</span><span class="grouping">]</span><span class="grouping">)</span>
<span class="comment"># The full version, including alpha/beta/rc tags.</span>
<span class="comment"># Removes post from release name</span>
<span class="keyword">if</span> <span class="identifier">parsed_version</span><span class="punctuation">.</span><span class="identifier">is_postrelease</span><span class="punctuation">:</span>
    <span class="identifier">release</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parsed_version</span><span class="punctuation">.</span><span class="identifier">base_version</span>
<span class="keyword">else</span><span class="punctuation">:</span>
    <span class="identifier">release</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">__version__</span>

<span class="comment"># The language for content autogenerated by Sphinx. Refer to documentation</span>
<span class="comment"># for a list of supported languages.</span>
<span class="comment">#language = None</span>

<span class="comment"># There are two options for replacing |today|: either, you set today to some</span>
<span class="comment"># non-false value, then it is used:</span>
<span class="comment">#today = ''</span>
<span class="comment"># Else, today_fmt is used as the format for a strftime call.</span>
<span class="comment">#today_fmt = '%B %d, %Y'</span>

<span class="comment"># List of patterns, relative to source directory, that match files and</span>
<span class="comment"># directories to ignore when looking for source files.</span>
<span class="identifier">exclude_patterns</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">'_build', 'templates', 'includes', 'themes'</span><span class="grouping">]</span>

<span class="comment"># The reST default role (used for this markup: `text`) to use for all</span>
<span class="comment"># documents.</span>
<span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">l</span><span class="invalid">e</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'literal'</span>

<span class="comment"># If true, '()' will be appended to :func: etc. cross-reference text.</span>
<span class="identifier">add_function_parentheses</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>

<span class="comment"># If true, the current module name will be prepended to all description</span>
<span class="comment"># unit titles (such as .. function::).</span>
<span class="comment">#add_module_names = True</span>

<span class="comment"># If true, sectionauthor and moduleauthor directives will be shown in the</span>
<span class="comment"># output. They are ignored by default.</span>
<span class="comment">#show_authors = False</span>

<span class="comment"># The name of the Pygments (syntax highlighting) style to use.</span>
<span class="identifier">pygments_style</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'sphinx'</span>

<span class="comment"># A list of ignored prefixes for module index sorting.</span>
<span class="comment">#modindex_common_prefix = []</span>


<span class="comment"># -- Options for HTML output -------------------------------------------------</span>

<span class="comment"># The theme to use for HTML and HTML Help pages.  Major themes that come with</span>
<span class="comment"># Sphinx are currently 'default' and 'sphinxdoc'.</span>
<span class="identifier">html_theme</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'scikit-learn-modern'</span>

<span class="comment"># Theme options are theme-specific and customize the look and feel of a theme</span>
<span class="comment"># further.  For a list of options available for each theme, see the</span>
<span class="comment"># documentation.</span>
<span class="identifier">html_theme_options</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="string-literal">'google_analytics'</span><span class="punctuation">:</span> <span class="bool-literal">True</span><span class="punctuation">,</span>
                      <span class="string-literal">'mathjax_path'</span><span class="punctuation">:</span> <span class="identifier">mathjax_path</span><span class="grouping">}</span>

<span class="comment"># Add any paths that contain custom themes here, relative to this directory.</span>
<span class="identifier">html_theme_path</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">'themes'</span><span class="grouping">]</span>


<span class="comment"># The name for this set of Sphinx documents.  If None, it defaults to</span>
<span class="comment"># "&lt;project&gt; v&lt;release&gt; documentation".</span>
<span class="comment">#html_title = None</span>

<span class="comment"># A shorter title for the navigation bar.  Default is the same as html_title.</span>
<span class="identifier">html_short_title</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'scikit-learn'</span>

<span class="comment"># The name of an image file (relative to this directory) to place at the top</span>
<span class="comment"># of the sidebar.</span>
<span class="identifier">html_logo</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'logos/scikit-learn-logo-small.png'</span>

<span class="comment"># The name of an image file (within the static path) to use as favicon of the</span>
<span class="comment"># docs.  This file should be a Windows icon file (.ico) being 16x16 or 32x32</span>
<span class="comment"># pixels large.</span>
<span class="identifier">html_favicon</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'logos/favicon.ico'</span>

<span class="comment"># Add any paths that contain custom static files (such as style sheets) here,</span>
<span class="comment"># relative to this directory. They are copied after the builtin static files,</span>
<span class="comment"># so a file named "default.css" will overwrite the builtin "default.css".</span>
<span class="identifier">html_static_path</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">'images'</span><span class="grouping">]</span>

<span class="comment"># If not '', a 'Last updated on:' timestamp is inserted at every page bottom,</span>
<span class="comment"># using the given strftime format.</span>
<span class="comment">#html_last_updated_fmt = '%b %d, %Y'</span>

<span class="comment"># Custom sidebar templates, maps document names to template names.</span>
<span class="comment">#html_sidebars = {}</span>

<span class="comment"># Additional templates that should be rendered to pages, maps page names to</span>
<span class="comment"># template names.</span>
<span class="identifier">html_additional_pages</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">'index': 'index.html'</span><span class="punctuation">,</span>
    <span class="string-literal">'documentation': 'documentation.html'</span><span class="grouping">}</span>  <span class="comment"># redirects to index</span>

<span class="comment"># If false, no module index is generated.</span>
<span class="identifier">html_domain_indices</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>

<span class="comment"># If false, no index is generated.</span>
<span class="identifier">html_use_index</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>

<span class="comment"># If true, the index is split into individual pages for each letter.</span>
<span class="comment">#html_split_index = False</span>

<span class="comment"># If true, links to the reST sources are added to the pages.</span>
<span class="comment">#html_show_sourcelink = True</span>

<span class="comment"># If true, an OpenSearch description file will be output, and all pages will</span>
<span class="comment"># contain a &lt;link&gt; tag referring to it.  The value of this option must be the</span>
<span class="comment"># base URL from which the finished HTML is served.</span>
<span class="comment">#html_use_opensearch = ''</span>

<span class="comment"># If nonempty, this is the file name suffix for HTML files (e.g. ".xhtml").</span>
<span class="comment">#html_file_suffix = ''</span>

<span class="comment"># Output file base name for HTML help builder.</span>
<span class="identifier">htmlhelp_basename</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'scikit-learndoc'</span>

<span class="comment"># If true, the reST sources are included in the HTML build as _sources/name.</span>
<span class="identifier">html_copy_source</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>

<span class="comment"># Adds variables into templates</span>
<span class="identifier">html_context</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="grouping">}</span>
<span class="comment"># finds latest release highlights and places it into HTML context for</span>
<span class="comment"># index.html</span>
<span class="identifier">release_highlights_dir</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Path</span><span class="grouping">(</span><span class="string-literal">"..") / "examples" / "release_highlights"</span>
<span class="comment"># Finds the highlight with the latest version number</span>
<span class="identifier">latest_highlights</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sorted</span><span class="grouping">(</span><span class="identifier">release_highlights_dir</span><span class="punctuation">.</span><span class="identifier">glob</span><span class="grouping">(</span>
                           <span class="string-literal">"plot_release_highlights_*.py"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">[</span><span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="grouping">]</span>
<span class="identifier">latest_highlights</span> <span class="arithmetic-assignment">=</span> <span class="identifier">latest_highlights</span><span class="punctuation">.</span><span class="invalid">w</span><span class="invalid">i</span><span class="invalid">t</span><span class="invalid">h</span><span class="invalid">_</span><span class="invalid">s</span><span class="invalid">u</span><span class="invalid">f</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">x</span><span class="grouping">(</span><span class="string-literal">''</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">name</span>
<span class="identifier">html_context</span><span class="grouping">[</span><span class="string-literal">"release_highlights"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="invalid">\</span>
    <span class="identifier">f</span><span class="string-literal">"auto_examples/release_highlights/{latest_highlights}"</span>

<span class="comment"># get version from higlight name assuming highlights have the form</span>
<span class="comment"># plot_release_highlights_0_22_0</span>
<span class="identifier">highlight_version</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">".".join(latest_highlights.split("_"</span><span class="grouping">)</span><span class="grouping">[</span><span class="arithmetic-operator">-</span><span class="int-literal">3</span><span class="punctuation">:</span><span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">)</span>
<span class="identifier">html_context</span><span class="grouping">[</span><span class="string-literal">"release_highlights_version"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">highlight_version</span>

<span class="comment"># -- Options for LaTeX output ------------------------------------------------</span>
<span class="identifier">latex_elements</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="comment"># The paper size ('letterpaper' or 'a4paper').</span>
    <span class="comment"># 'papersize': 'letterpaper',</span>

    <span class="comment"># The font size ('10pt', '11pt' or '12pt').</span>
    <span class="comment"># 'pointsize': '10pt',</span>

    <span class="comment"># Additional stuff for the LaTeX preamble.</span>
    <span class="string-literal">'preamble'</span><span class="punctuation">:</span> <span class="identifier">r</span><span class="comment">"""
        \usepackage{amsmath}\usepackage{amsfonts}\usepackage{bm}
        \usepackage{morefloats}\usepackage{enumitem} \setlistdepth{10}
        \let\oldhref\href
        \renewcommand{\href}[2]{\oldhref{#1}{\hbox{#2}}}
        """</span>
<span class="grouping">}</span>

<span class="comment"># Grouping the document tree into LaTeX files. List of tuples</span>
<span class="comment"># (source start file, target name, title, author, documentclass</span>
<span class="comment"># [howto/manual]).</span>
<span class="identifier">latex_documents</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">(</span><span class="string-literal">'contents', 'user_guide.tex', 'scikit-learn user guide'</span><span class="punctuation">,</span>
                    <span class="string-literal">'scikit-learn developers', 'manual'</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="grouping">]</span>

<span class="comment"># The name of an image file (relative to this directory) to place at the top of</span>
<span class="comment"># the title page.</span>
<span class="identifier">latex_logo</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"logos/scikit-learn-logo.png"</span>

<span class="comment"># Documents to append as an appendix to all manuals.</span>
<span class="comment"># latex_appendices = []</span>

<span class="comment"># If false, no module index is generated.</span>
<span class="identifier">latex_domain_indices</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>

<span class="identifier">trim_doctests_flags</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>

<span class="comment"># intersphinx configuration</span>
<span class="identifier">intersphinx_mapping</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">'python': ('https://docs.python.org/{.major}'</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span>
        <span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">version_info</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'numpy': ('https://numpy.org/doc/stable'</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'scipy': ('https://docs.scipy.org/doc/scipy/reference'</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'matplotlib': ('https://matplotlib.org/'</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'pandas': ('https://pandas.pydata.org/pandas-docs/stable/'</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'joblib': ('https://joblib.readthedocs.io/en/latest/'</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'seaborn': ('https://seaborn.pydata.org/'</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">,</span>
<span class="grouping">}</span>

<span class="identifier">v</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parse</span><span class="grouping">(</span><span class="identifier">release</span><span class="grouping">)</span>
<span class="keyword">if</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">release</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
    <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span>
        <span class="string-literal">'Ill-formed version: {!r}. Version should follow '</span>
        <span class="string-literal">'PEP440'</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">version</span><span class="grouping">)</span><span class="grouping">)</span>

<span class="keyword">if</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">is_devrelease</span><span class="punctuation">:</span>
    <span class="identifier">binder_branch</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'main'</span>
<span class="keyword">else</span><span class="punctuation">:</span>
    <span class="identifier">major</span><span class="punctuation">,</span> <span class="identifier">minor</span> <span class="arithmetic-assignment">=</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">release</span><span class="grouping">[</span><span class="punctuation">:</span><span class="int-literal">2</span><span class="grouping">]</span>
    <span class="identifier">binder_branch</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'{}.{}.X'</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">major</span><span class="punctuation">,</span> <span class="identifier">minor</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">SubSectionTitleOrder</span><span class="punctuation">:</span>
    <span class="comment">"""Sort example gallery by title of subsection.

    Assumes README.txt exists for all subsections and uses the subsection with
    dashes, '---', as the adornment.
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">src_dir</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">src_dir</span> <span class="arithmetic-assignment">=</span> <span class="identifier">src_dir</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">regex</span> <span class="arithmetic-assignment">=</span> <span class="identifier">re</span><span class="punctuation">.</span><span class="identifier">compile</span><span class="grouping">(</span><span class="identifier">r</span><span class="string-literal">"^([\w ]+)\n-"</span><span class="punctuation">,</span> <span class="identifier">re</span><span class="punctuation">.</span><span class="identifier">MULTILINE</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__repr__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="string-literal">'&lt;%s&gt;'</span> <span class="arithmetic-operator">%</span> <span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="punctuation">,</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__call__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">directory</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">src_path</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">normpath</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">src_dir</span><span class="punctuation">,</span> <span class="identifier">directory</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="comment"># Forces Release Highlights to the top</span>
        <span class="keyword">if</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">basename</span><span class="grouping">(</span><span class="identifier">src_path</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"release_highlights"</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="string-literal">"0"</span>

        <span class="identifier">readme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">src_path</span><span class="punctuation">,</span> <span class="string-literal">"README.txt"</span><span class="grouping">)</span>

        <span class="keyword">try</span><span class="punctuation">:</span>
            <span class="keyword">with</span> <span class="identifier">open</span><span class="grouping">(</span><span class="identifier">readme</span><span class="punctuation">,</span> <span class="string-literal">'r'</span><span class="grouping">)</span> <span class="keyword">as</span> <span class="identifier">f</span><span class="punctuation">:</span>
                <span class="identifier">content</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">read</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">except</span> <span class="identifier">FileNotFoundError</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">directory</span>

        <span class="identifier">title_match</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">regex</span><span class="punctuation">.</span><span class="identifier">search</span><span class="grouping">(</span><span class="identifier">content</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">title_match</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">title_match</span><span class="punctuation">.</span><span class="identifier">group</span><span class="grouping">(</span><span class="int-literal">1</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">directory</span>


<span class="identifier">sphinx_gallery_conf</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">'doc_module': 'sklearn'</span><span class="punctuation">,</span>
    <span class="string-literal">'backreferences_dir': os.path.join('modules', 'generated'</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'show_memory'</span><span class="punctuation">:</span> <span class="bool-literal">False</span><span class="punctuation">,</span>
    <span class="string-literal">'reference_url'</span><span class="punctuation">:</span> <span class="grouping">{</span>
        <span class="string-literal">'sklearn'</span><span class="punctuation">:</span> <span class="none-literal">None</span><span class="grouping">}</span><span class="punctuation">,</span>
    <span class="string-literal">'examples_dirs': ['../examples'</span><span class="grouping">]</span><span class="punctuation">,</span>
    <span class="string-literal">'gallery_dirs': ['auto_examples'</span><span class="grouping">]</span><span class="punctuation">,</span>
    <span class="string-literal">'subsection_order': SubSectionTitleOrder('../examples'</span><span class="grouping">)</span><span class="punctuation">,</span>
    <span class="string-literal">'binder'</span><span class="punctuation">:</span> <span class="grouping">{</span>
        <span class="string-literal">'org': 'scikit-learn'</span><span class="punctuation">,</span>
        <span class="string-literal">'repo': 'scikit-learn'</span><span class="punctuation">,</span>
        <span class="string-literal">'binderhub_url': 'https://mybinder.org'</span><span class="punctuation">,</span>
        <span class="string-literal">'branch'</span><span class="punctuation">:</span> <span class="identifier">binder_branch</span><span class="punctuation">,</span>
        <span class="string-literal">'dependencies': './binder/requirements.txt'</span><span class="punctuation">,</span>
        <span class="string-literal">'use_jupyter_lab'</span><span class="punctuation">:</span> <span class="bool-literal">True</span>
    <span class="grouping">}</span><span class="punctuation">,</span>
    <span class="comment"># avoid generating too many cross links</span>
    <span class="string-literal">'inspect_global_variables'</span><span class="punctuation">:</span> <span class="bool-literal">False</span><span class="punctuation">,</span>
    <span class="string-literal">'remove_config_comments'</span><span class="punctuation">:</span> <span class="bool-literal">True</span><span class="punctuation">,</span>
<span class="grouping">}</span>


<span class="comment"># The following dictionary contains the information used to create the</span>
<span class="comment"># thumbnails for the front page of the scikit-learn home page.</span>
<span class="comment"># key: first image in set</span>
<span class="comment"># values: (number of plot in set, height of thumbnail)</span>
<span class="identifier">carousel_thumbs</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="string-literal">'sphx_glr_plot_classifier_comparison_001.png'</span><span class="punctuation">:</span> <span class="int-literal">600</span><span class="grouping">}</span>


<span class="comment"># enable experimental module so that experimental estimators can be</span>
<span class="comment"># discovered properly by sphinx</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">experimental</span> <span class="keyword">import</span> <span class="identifier">enable_iterative_imputer</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">experimental</span> <span class="keyword">import</span> <span class="identifier">enable_halving_search_cv</span>  <span class="comment"># noqa</span>


<span class="keyword">def</span> <span class="identifier">make_carousel_thumbs</span><span class="grouping">(</span><span class="identifier">app</span><span class="punctuation">,</span> <span class="invalid">e</span><span class="invalid">x</span><span class="invalid">c</span><span class="invalid">e</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""produces the final resized carousel images"""</span>
    <span class="keyword">if</span> <span class="invalid">e</span><span class="invalid">x</span><span class="invalid">c</span><span class="invalid">e</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
        <span class="keyword">return</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">'Preparing carousel images'</span><span class="grouping">)</span>

    <span class="identifier">image_dir</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">builder</span><span class="punctuation">.</span><span class="identifier">outdir</span><span class="punctuation">,</span> <span class="string-literal">'_images'</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">glr_plot</span><span class="punctuation">,</span> <span class="identifier">max_width</span> <span class="relational-operator">in</span> <span class="identifier">carousel_thumbs</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">image</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">image_dir</span><span class="punctuation">,</span> <span class="identifier">glr_plot</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">exists</span><span class="grouping">(</span><span class="identifier">image</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">c_thumb</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">image_dir</span><span class="punctuation">,</span> <span class="identifier">glr_plot</span><span class="grouping">[</span><span class="punctuation">:</span><span class="arithmetic-operator">-</span><span class="int-literal">4</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="string-literal">'_carousel.png'</span><span class="grouping">)</span>
            <span class="identifier">sphinx_gallery</span><span class="punctuation">.</span><span class="identifier">gen_rst</span><span class="punctuation">.</span><span class="identifier">scale_image</span><span class="grouping">(</span><span class="identifier">image</span><span class="punctuation">,</span> <span class="identifier">c_thumb</span><span class="punctuation">,</span> <span class="identifier">max_width</span><span class="punctuation">,</span> <span class="int-literal">190</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">filter_search_index</span><span class="grouping">(</span><span class="identifier">app</span><span class="punctuation">,</span> <span class="invalid">e</span><span class="invalid">x</span><span class="invalid">c</span><span class="invalid">e</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="keyword">if</span> <span class="invalid">e</span><span class="invalid">x</span><span class="invalid">c</span><span class="invalid">e</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
        <span class="keyword">return</span>

    <span class="comment"># searchindex only exist when generating html</span>
    <span class="keyword">if</span> <span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">builder</span><span class="punctuation">.</span><span class="identifier">name</span> <span class="relational-operator">!=</span> <span class="string-literal">'html'</span><span class="punctuation">:</span>
        <span class="keyword">return</span>

    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">'Removing methods from search index'</span><span class="grouping">)</span>

    <span class="identifier">searchindex_path</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">builder</span><span class="punctuation">.</span><span class="identifier">outdir</span><span class="punctuation">,</span> <span class="string-literal">'searchindex.js'</span><span class="grouping">)</span>
    <span class="keyword">with</span> <span class="identifier">open</span><span class="grouping">(</span><span class="identifier">searchindex_path</span><span class="punctuation">,</span> <span class="string-literal">'r'</span><span class="grouping">)</span> <span class="keyword">as</span> <span class="identifier">f</span><span class="punctuation">:</span>
        <span class="identifier">searchindex_text</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">read</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="identifier">searchindex_text</span> <span class="arithmetic-assignment">=</span> <span class="identifier">re</span><span class="punctuation">.</span><span class="identifier">sub</span><span class="grouping">(</span><span class="identifier">r</span><span class="string-literal">'{__init__.+?}', '{}'</span><span class="punctuation">,</span> <span class="identifier">searchindex_text</span><span class="grouping">)</span>
    <span class="identifier">searchindex_text</span> <span class="arithmetic-assignment">=</span> <span class="identifier">re</span><span class="punctuation">.</span><span class="identifier">sub</span><span class="grouping">(</span><span class="identifier">r</span><span class="string-literal">'{__call__.+?}', '{}'</span><span class="punctuation">,</span> <span class="identifier">searchindex_text</span><span class="grouping">)</span>

    <span class="keyword">with</span> <span class="identifier">open</span><span class="grouping">(</span><span class="identifier">searchindex_path</span><span class="punctuation">,</span> <span class="string-literal">'w'</span><span class="grouping">)</span> <span class="keyword">as</span> <span class="identifier">f</span><span class="punctuation">:</span>
        <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="identifier">searchindex_text</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">generate_min_dependency_table</span><span class="grouping">(</span><span class="identifier">app</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""Generate min dependency table for docs."""</span>
    <span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">_min_dependencies</span> <span class="keyword">import</span> <span class="identifier">dependent_packages</span>

    <span class="comment"># get length of header</span>
    <span class="identifier">package_header_len</span> <span class="arithmetic-assignment">=</span> <span class="identifier">max</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">package</span><span class="grouping">)</span>
                             <span class="keyword">for</span> <span class="identifier">package</span> <span class="relational-operator">in</span> <span class="identifier">dependent_packages</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="int-literal">4</span>
    <span class="identifier">version_header_len</span> <span class="arithmetic-assignment">=</span> <span class="identifier">len</span><span class="grouping">(</span><span class="string-literal">'Minimum Version'</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="int-literal">4</span>
    <span class="identifier">tags_header_len</span> <span class="arithmetic-assignment">=</span> <span class="identifier">max</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">tags</span><span class="grouping">)</span>
                          <span class="keyword">for</span> <span class="identifier">_</span><span class="punctuation">,</span> <span class="identifier">tags</span> <span class="relational-operator">in</span> <span class="identifier">dependent_packages</span><span class="punctuation">.</span><span class="identifier">values</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="int-literal">4</span>

    <span class="identifier">output</span> <span class="arithmetic-assignment">=</span> <span class="identifier">StringIO</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">' '.join(['='</span> <span class="arithmetic-operator">*</span> <span class="identifier">package_header_len</span><span class="punctuation">,</span>
                           <span class="string-literal">'='</span> <span class="arithmetic-operator">*</span> <span class="identifier">version_header_len</span><span class="punctuation">,</span>
                           <span class="string-literal">'='</span> <span class="arithmetic-operator">*</span> <span class="identifier">tags_header_len</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">'\n'</span><span class="grouping">)</span>
    <span class="identifier">dependency_title</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Dependency"</span>
    <span class="identifier">version_title</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Minimum Version"</span>
    <span class="identifier">tags_title</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Purpose"</span>

    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">'{dependency_title:&lt;{package_header_len}} '</span>
                 <span class="identifier">f</span><span class="string-literal">'{version_title:&lt;{version_header_len}} '</span>
                 <span class="identifier">f</span><span class="string-literal">'{tags_title}\n'</span><span class="grouping">)</span>

    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">' '.join(['='</span> <span class="arithmetic-operator">*</span> <span class="identifier">package_header_len</span><span class="punctuation">,</span>
                           <span class="string-literal">'='</span> <span class="arithmetic-operator">*</span> <span class="identifier">version_header_len</span><span class="punctuation">,</span>
                           <span class="string-literal">'='</span> <span class="arithmetic-operator">*</span> <span class="identifier">tags_header_len</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">'\n'</span><span class="grouping">)</span>

    <span class="keyword">for</span> <span class="identifier">package</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">version</span><span class="punctuation">,</span> <span class="identifier">tags</span><span class="grouping">)</span> <span class="relational-operator">in</span> <span class="identifier">dependent_packages</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">'{package:&lt;{package_header_len}} '</span>
                     <span class="identifier">f</span><span class="string-literal">'{version:&lt;{version_header_len}} '</span>
                     <span class="identifier">f</span><span class="string-literal">'{tags}\n'</span><span class="grouping">)</span>

    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">' '.join(['='</span> <span class="arithmetic-operator">*</span> <span class="identifier">package_header_len</span><span class="punctuation">,</span>
                           <span class="string-literal">'='</span> <span class="arithmetic-operator">*</span> <span class="identifier">version_header_len</span><span class="punctuation">,</span>
                           <span class="string-literal">'='</span> <span class="arithmetic-operator">*</span> <span class="identifier">tags_header_len</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
    <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">'\n'</span><span class="grouping">)</span>
    <span class="identifier">output</span> <span class="arithmetic-assignment">=</span> <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">getvalue</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">with</span> <span class="grouping">(</span><span class="identifier">Path</span><span class="grouping">(</span><span class="string-literal">'.') / 'min_dependency_table.rst').open('w'</span><span class="grouping">)</span> <span class="keyword">as</span> <span class="identifier">f</span><span class="punctuation">:</span>
        <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="identifier">output</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">generate_min_dependency_substitutions</span><span class="grouping">(</span><span class="identifier">app</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""Generate min dependency substitutions for docs."""</span>
    <span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">_min_dependencies</span> <span class="keyword">import</span> <span class="identifier">dependent_packages</span>

    <span class="identifier">output</span> <span class="arithmetic-assignment">=</span> <span class="identifier">StringIO</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">for</span> <span class="identifier">package</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">version</span><span class="punctuation">,</span> <span class="identifier">_</span><span class="grouping">)</span> <span class="relational-operator">in</span> <span class="identifier">dependent_packages</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">package</span> <span class="arithmetic-assignment">=</span> <span class="identifier">package</span><span class="punctuation">.</span><span class="identifier">capitalize</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">'.. |{package}MinVersion| replace:: {version}'</span><span class="grouping">)</span>
        <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="string-literal">'\n'</span><span class="grouping">)</span>

    <span class="identifier">output</span> <span class="arithmetic-assignment">=</span> <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">getvalue</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">with</span> <span class="grouping">(</span><span class="identifier">Path</span><span class="grouping">(</span><span class="string-literal">'.') / 'min_dependency_substitutions.rst').open('w'</span><span class="grouping">)</span> <span class="keyword">as</span> <span class="identifier">f</span><span class="punctuation">:</span>
        <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">write</span><span class="grouping">(</span><span class="identifier">output</span><span class="grouping">)</span>


<span class="comment"># Config for sphinx_issues</span>

<span class="comment"># we use the issues path for PRs since the issues URL will forward</span>
<span class="identifier">issues_github_path</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'scikit-learn/scikit-learn'</span>

<span class="comment"># Hack to get kwargs to appear in docstring #18434</span>
<span class="comment"># TODO: Remove when https://github.com/sphinx-doc/sphinx/pull/8234 gets</span>
<span class="comment"># merged</span>
<span class="keyword">from</span> <span class="identifier">sphinx</span><span class="punctuation">.</span><span class="identifier">util</span> <span class="keyword">import</span> <span class="identifier">inspect</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="identifier">sphinx</span><span class="punctuation">.</span><span class="identifier">ext</span><span class="punctuation">.</span><span class="identifier">autodoc</span> <span class="keyword">import</span> <span class="invalid">C</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">D</span><span class="invalid">o</span><span class="invalid">c</span><span class="invalid">u</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">n</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">r</span>  <span class="comment"># noqa</span>


<span class="keyword">class</span> <span class="identifier">PatchedClassDocumenter</span><span class="grouping">(</span><span class="invalid">C</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">D</span><span class="invalid">o</span><span class="invalid">c</span><span class="invalid">u</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">n</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">r</span><span class="grouping">)</span><span class="punctuation">:</span>

    <span class="keyword">def</span> <span class="identifier">_get_signature</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">old_signature</span> <span class="arithmetic-assignment">=</span> <span class="identifier">inspect</span><span class="punctuation">.</span><span class="identifier">signature</span>

        <span class="keyword">def</span> <span class="identifier">patch_signature</span><span class="grouping">(</span><span class="identifier">subject</span><span class="punctuation">,</span> <span class="identifier">bound_method</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span> <span class="identifier">follow_wrapped</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="comment"># changes the default of follow_wrapped to True</span>
            <span class="keyword">return</span> <span class="identifier">old_signature</span><span class="grouping">(</span><span class="identifier">subject</span><span class="punctuation">,</span> <span class="identifier">bound_method</span><span class="arithmetic-assignment">=</span><span class="identifier">bound_method</span><span class="punctuation">,</span>
                                 <span class="identifier">follow_wrapped</span><span class="arithmetic-assignment">=</span><span class="identifier">follow_wrapped</span><span class="grouping">)</span>
        <span class="identifier">inspect</span><span class="punctuation">.</span><span class="identifier">signature</span> <span class="arithmetic-assignment">=</span> <span class="identifier">patch_signature</span>
        <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">_get_signature</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">inspect</span><span class="punctuation">.</span><span class="identifier">signature</span> <span class="arithmetic-assignment">=</span> <span class="identifier">old_signature</span>
        <span class="keyword">return</span> <span class="identifier">result</span>


<span class="keyword">def</span> <span class="identifier">setup</span><span class="grouping">(</span><span class="identifier">app</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">registry</span><span class="punctuation">.</span><span class="identifier">documenters</span><span class="grouping">[</span><span class="string-literal">'class'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">PatchedClassDocumenter</span>
    <span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">connect</span><span class="grouping">(</span><span class="string-literal">'builder-inited'</span><span class="punctuation">,</span> <span class="identifier">generate_min_dependency_table</span><span class="grouping">)</span>
    <span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">connect</span><span class="grouping">(</span><span class="string-literal">'builder-inited'</span><span class="punctuation">,</span> <span class="identifier">generate_min_dependency_substitutions</span><span class="grouping">)</span>
    <span class="comment"># to hide/show the prompt in code examples:</span>
    <span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">connect</span><span class="grouping">(</span><span class="string-literal">'build-finished'</span><span class="punctuation">,</span> <span class="identifier">make_carousel_thumbs</span><span class="grouping">)</span>
    <span class="identifier">app</span><span class="punctuation">.</span><span class="identifier">connect</span><span class="grouping">(</span><span class="string-literal">'build-finished'</span><span class="punctuation">,</span> <span class="identifier">filter_search_index</span><span class="grouping">)</span>


<span class="comment"># The following is used by sphinx.ext.linkcode to provide links to github</span>
<span class="identifier">linkcode_resolve</span> <span class="arithmetic-assignment">=</span> <span class="identifier">make_linkcode_resolve</span><span class="grouping">(</span><span class="string-literal">'sklearn'</span><span class="punctuation">,</span>
                                         <span class="string-literal">'https://github.com/scikit-learn/'</span>
                                         <span class="string-literal">'scikit-learn/blob/{revision}/'</span>
                                         <span class="string-literal">'{package}/{path}#L{lineno}'</span><span class="grouping">)</span>

<span class="identifier">warnings</span><span class="punctuation">.</span><span class="identifier">filterwarnings</span><span class="grouping">(</span><span class="string-literal">"ignore"</span><span class="punctuation">,</span> <span class="identifier">category</span><span class="arithmetic-assignment">=</span><span class="identifier">UserWarning</span><span class="punctuation">,</span>
                        <span class="identifier">message</span><span class="arithmetic-assignment">=</span><span class="string-literal">'Matplotlib is currently using agg, which is a'</span>
                                <span class="string-literal">' non-GUI backend, so cannot show the figure.'</span><span class="grouping">)</span>


<span class="comment"># maps functions with a class name that is indistinguishable when case is</span>
<span class="comment"># ignore to another filename</span>
<span class="identifier">autosummary_filename_map</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">"sklearn.cluster.dbscan": "dbscan-function"</span><span class="punctuation">,</span>
    <span class="string-literal">"sklearn.covariance.oas": "oas-function"</span><span class="punctuation">,</span>
    <span class="string-literal">"sklearn.decomposition.fastica": "fastica-function"</span><span class="punctuation">,</span>
<span class="grouping">}</span>

    </pre>
  </body>
</html>