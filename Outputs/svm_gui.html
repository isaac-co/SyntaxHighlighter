<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">"""
==========
Libsvm GUI
==========

A simple graphical frontend for Libsvm mainly intended for didactic
purposes. You can create data points by point and click and visualize
the decision region induced by different kernels and parameter settings.

To create positive examples click the left mouse button; to create
negative examples click the right button.

If all examples are from the same class, it uses a one-class SVM.

"""</span>

<span class="identifier">print</span><span class="grouping">(</span><span class="identifier">__doc__</span><span class="grouping">)</span>

<span class="comment"># Author: Peter Prettenhoer &lt;peter.prettenhofer@gmail.com&gt;</span>
<span class="comment">#</span>
<span class="comment"># License: BSD 3 clause</span>

<span class="keyword">import</span> <span class="identifier">matplotlib</span>
<span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">use</span><span class="grouping">(</span><span class="string-literal">'TkAgg'</span><span class="grouping">)</span>
<span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">backends</span><span class="punctuation">.</span><span class="identifier">backend_tkagg</span> <span class="keyword">import</span> <span class="identifier">FigureCanvasTkAgg</span>
<span class="keyword">try</span><span class="punctuation">:</span>
    <span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">backends</span><span class="punctuation">.</span><span class="identifier">backend_tkagg</span> <span class="keyword">import</span> <span class="identifier">NavigationToolbar2Tk</span>
<span class="keyword">except</span> <span class="invalid">I</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">E</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">r</span><span class="punctuation">:</span>
    <span class="comment"># NavigationToolbar2TkAgg was deprecated in matplotlib 2.2</span>
    <span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">backends</span><span class="punctuation">.</span><span class="identifier">backend_tkagg</span> <span class="keyword">import</span> <span class="grouping">(</span>
        <span class="identifier">NavigationToolbar2TkAgg</span> <span class="keyword">as</span> <span class="identifier">NavigationToolbar2Tk</span>
    <span class="grouping">)</span>
<span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">figure</span> <span class="keyword">import</span> <span class="identifier">Figure</span>
<span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">contour</span> <span class="keyword">import</span> <span class="identifier">ContourSet</span>

<span class="keyword">import</span> <span class="identifier">sys</span>
<span class="keyword">import</span> <span class="identifier">numpy</span> <span class="keyword">as</span> <span class="identifier">np</span>
<span class="keyword">import</span> <span class="identifier">tkinter</span> <span class="keyword">as</span> <span class="identifier">Tk</span>

<span class="keyword">from</span> <span class="identifier">sklearn</span> <span class="keyword">import</span> <span class="identifier">svm</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">datasets</span> <span class="keyword">import</span> <span class="identifier">dump_svmlight_file</span>

<span class="identifier">y_min</span><span class="punctuation">,</span> <span class="identifier">y_max</span> <span class="arithmetic-assignment">=</span> <span class="arithmetic-operator">-</span><span class="int-literal">50</span><span class="punctuation">,</span> <span class="int-literal">50</span>
<span class="identifier">x_min</span><span class="punctuation">,</span> <span class="identifier">x_max</span> <span class="arithmetic-assignment">=</span> <span class="arithmetic-operator">-</span><span class="int-literal">50</span><span class="punctuation">,</span> <span class="int-literal">50</span>


<span class="keyword">class</span> <span class="identifier">Model</span><span class="punctuation">:</span>
    <span class="comment">"""The Model which hold the data. It implements the
    observable in the observer pattern and notifies the
    registered observers on change event.
    """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">observers</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">surface</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">data</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">cls</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">surface_type</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>

    <span class="keyword">def</span> <span class="identifier">changed</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""Notify the observers. """</span>
        <span class="keyword">for</span> <span class="identifier">observer</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">observers</span><span class="punctuation">:</span>
            <span class="identifier">observer</span><span class="punctuation">.</span><span class="identifier">update</span><span class="grouping">(</span><span class="identifier">event</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">add_observer</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">observer</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""Register an observer. """</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">observers</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">observer</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">set_surface</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">surface</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">surface</span> <span class="arithmetic-assignment">=</span> <span class="identifier">surface</span>

    <span class="keyword">def</span> <span class="identifier">dump_svmlight_file</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">file</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">data</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">data</span><span class="grouping">)</span>
        <span class="identifier">X</span> <span class="arithmetic-assignment">=</span> <span class="identifier">data</span><span class="grouping">[</span><span class="punctuation">:</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">:</span><span class="int-literal">2</span><span class="grouping">]</span>
        <span class="identifier">y</span> <span class="arithmetic-assignment">=</span> <span class="identifier">data</span><span class="grouping">[</span><span class="punctuation">:</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">]</span>
        <span class="identifier">dump_svmlight_file</span><span class="grouping">(</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="punctuation">,</span> <span class="identifier">file</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">Controller</span><span class="punctuation">:</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">model</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span> <span class="arithmetic-assignment">=</span> <span class="identifier">model</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">kernel</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">IntVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">surface_type</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">IntVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="comment"># Whether or not a model has been fitted</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fitted</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>

    <span class="keyword">def</span> <span class="identifier">fit</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"fit the model"</span><span class="grouping">)</span>
        <span class="identifier">train</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">data</span><span class="grouping">)</span>
        <span class="identifier">X</span> <span class="arithmetic-assignment">=</span> <span class="identifier">train</span><span class="grouping">[</span><span class="punctuation">:</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">:</span><span class="int-literal">2</span><span class="grouping">]</span>
        <span class="identifier">y</span> <span class="arithmetic-assignment">=</span> <span class="identifier">train</span><span class="grouping">[</span><span class="punctuation">:</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">]</span>

        <span class="identifier">C</span> <span class="arithmetic-assignment">=</span> <span class="identifier">float</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">complexity</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">gamma</span> <span class="arithmetic-assignment">=</span> <span class="identifier">float</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">gamma</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">coef0</span> <span class="arithmetic-assignment">=</span> <span class="identifier">float</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">coef0</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">degree</span> <span class="arithmetic-assignment">=</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">degree</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">kernel_map</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="int-literal">0</span><span class="punctuation">:</span> <span class="string-literal">"linear", 1: "rbf", 2: "poly"</span><span class="grouping">}</span>
        <span class="keyword">if</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">unique</span><span class="grouping">(</span><span class="identifier">y</span><span class="grouping">)</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="int-literal">1</span><span class="punctuation">:</span>
            <span class="identifier">clf</span> <span class="arithmetic-assignment">=</span> <span class="identifier">svm</span><span class="punctuation">.</span><span class="identifier">OneClassSVM</span><span class="grouping">(</span><span class="identifier">kernel</span><span class="arithmetic-assignment">=</span><span class="identifier">kernel_map</span><span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">kernel</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">,</span>
                                  <span class="identifier">gamma</span><span class="arithmetic-assignment">=</span><span class="identifier">gamma</span><span class="punctuation">,</span> <span class="identifier">coef0</span><span class="arithmetic-assignment">=</span><span class="identifier">coef0</span><span class="punctuation">,</span> <span class="identifier">degree</span><span class="arithmetic-assignment">=</span><span class="identifier">degree</span><span class="grouping">)</span>
            <span class="identifier">clf</span><span class="punctuation">.</span><span class="identifier">fit</span><span class="grouping">(</span><span class="identifier">X</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">clf</span> <span class="arithmetic-assignment">=</span> <span class="identifier">svm</span><span class="punctuation">.</span><span class="identifier">SVC</span><span class="grouping">(</span><span class="identifier">kernel</span><span class="arithmetic-assignment">=</span><span class="identifier">kernel_map</span><span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">kernel</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">C</span><span class="arithmetic-assignment">=</span><span class="identifier">C</span><span class="punctuation">,</span>
                          <span class="identifier">gamma</span><span class="arithmetic-assignment">=</span><span class="identifier">gamma</span><span class="punctuation">,</span> <span class="identifier">coef0</span><span class="arithmetic-assignment">=</span><span class="identifier">coef0</span><span class="punctuation">,</span> <span class="identifier">degree</span><span class="arithmetic-assignment">=</span><span class="identifier">degree</span><span class="grouping">)</span>
            <span class="identifier">clf</span><span class="punctuation">.</span><span class="identifier">fit</span><span class="grouping">(</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">hasattr</span><span class="grouping">(</span><span class="identifier">clf</span><span class="punctuation">,</span> <span class="string-literal">'score'</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"Accuracy:"</span><span class="punctuation">,</span> <span class="identifier">clf</span><span class="punctuation">.</span><span class="identifier">score</span><span class="grouping">(</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="int-literal">100</span><span class="grouping">)</span>
        <span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">decision_surface</span><span class="grouping">(</span><span class="identifier">clf</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">clf</span> <span class="arithmetic-assignment">=</span> <span class="identifier">clf</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">set_surface</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">surface_type</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">surface_type</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fitted</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">changed</span><span class="grouping">(</span><span class="string-literal">"surface"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">decision_surface</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">cls</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">a</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span>
        <span class="identifier">x</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">arange</span><span class="grouping">(</span><span class="identifier">x_min</span><span class="punctuation">,</span> <span class="identifier">x_max</span> <span class="arithmetic-operator">+</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">a</span><span class="punctuation">,</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">a</span><span class="grouping">)</span>
        <span class="identifier">y</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">arange</span><span class="grouping">(</span><span class="identifier">y_min</span><span class="punctuation">,</span> <span class="identifier">y_max</span> <span class="arithmetic-operator">+</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">a</span><span class="punctuation">,</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">a</span><span class="grouping">)</span>
        <span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">meshgrid</span><span class="grouping">(</span><span class="identifier">x</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="grouping">)</span>
        <span class="identifier">Z</span> <span class="arithmetic-assignment">=</span> <span class="identifier">cls</span><span class="punctuation">.</span><span class="identifier">decision_function</span><span class="grouping">(</span><span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">c_</span><span class="grouping">[</span><span class="identifier">X1</span><span class="punctuation">.</span><span class="identifier">ravel</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">.</span><span class="identifier">ravel</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">Z</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Z</span><span class="punctuation">.</span><span class="identifier">reshape</span><span class="grouping">(</span><span class="identifier">X1</span><span class="punctuation">.</span><span class="identifier">shape</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span>

    <span class="keyword">def</span> <span class="identifier">clear_data</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">data</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fitted</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">changed</span><span class="grouping">(</span><span class="string-literal">"clear"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">add_example</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">x</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="punctuation">,</span> <span class="identifier">label</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">data</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">x</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="punctuation">,</span> <span class="identifier">label</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">changed</span><span class="grouping">(</span><span class="string-literal">"example_added"</span><span class="grouping">)</span>

        <span class="comment"># update decision surface if already fitted.</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">refit</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">refit</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""Refit the model if already fitted. """</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fitted</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fit</span><span class="grouping">(</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">View</span><span class="punctuation">:</span>
    <span class="comment">"""Test docstring. """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">root</span><span class="punctuation">,</span> <span class="identifier">controller</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">f</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Figure</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">ax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">add_subplot</span><span class="grouping">(</span><span class="int-literal">111</span><span class="grouping">)</span>
        <span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">set_xticks</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">set_yticks</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">set_xlim</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">x_min</span><span class="punctuation">,</span> <span class="identifier">x_max</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">set_ylim</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">y_min</span><span class="punctuation">,</span> <span class="identifier">y_max</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">canvas</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FigureCanvasTkAgg</span><span class="grouping">(</span><span class="identifier">f</span><span class="punctuation">,</span> <span class="identifier">master</span><span class="arithmetic-assignment">=</span><span class="identifier">root</span><span class="grouping">)</span>
        <span class="keyword">try</span><span class="punctuation">:</span>
            <span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">draw</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">except</span> <span class="identifier">AttributeError</span><span class="punctuation">:</span>
            <span class="comment"># support for matplotlib (1.*)</span>
            <span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">show</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">get_tk_widget</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>
        <span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">_tkcanvas</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>
        <span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">mpl_connect</span><span class="grouping">(</span><span class="string-literal">'button_press_event'</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">onclick</span><span class="grouping">)</span>
        <span class="identifier">toolbar</span> <span class="arithmetic-assignment">=</span> <span class="identifier">NavigationToolbar2Tk</span><span class="grouping">(</span><span class="identifier">canvas</span><span class="punctuation">,</span> <span class="identifier">root</span><span class="grouping">)</span>
        <span class="identifier">toolbar</span><span class="punctuation">.</span><span class="identifier">update</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controllbar</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ControllBar</span><span class="grouping">(</span><span class="identifier">root</span><span class="punctuation">,</span> <span class="identifier">controller</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">f</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ax</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">canvas</span> <span class="arithmetic-assignment">=</span> <span class="identifier">canvas</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controller</span> <span class="arithmetic-assignment">=</span> <span class="identifier">controller</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">c_labels</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plot_kernels</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">plot_kernels</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">text</span><span class="grouping">(</span><span class="arithmetic-operator">-</span><span class="int-literal">50</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">60</span><span class="punctuation">,</span> <span class="string-literal">"Linear: $u^T v$"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">text</span><span class="grouping">(</span><span class="arithmetic-operator">-</span><span class="int-literal">20</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">60</span><span class="punctuation">,</span> <span class="identifier">r</span><span class="string-literal">"RBF: $\exp (-\gamma \| u-v \|^2)$"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">text</span><span class="grouping">(</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">60</span><span class="punctuation">,</span> <span class="identifier">r</span><span class="string-literal">"Poly: $(\gamma \, u^T v + r)^d$"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">onclick</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">xdata</span> <span class="logical-operator">and</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">ydata</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">button</span> <span class="relational-operator">==</span> <span class="int-literal">1</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">add_example</span><span class="grouping">(</span><span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">xdata</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">ydata</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">)</span>
            <span class="keyword">elif</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">button</span> <span class="relational-operator">==</span> <span class="int-literal">3</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">add_example</span><span class="grouping">(</span><span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">xdata</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="punctuation">.</span><span class="identifier">ydata</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">update_example</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">model</span><span class="punctuation">,</span> <span class="identifier">idx</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">x</span><span class="punctuation">,</span> <span class="identifier">y</span><span class="punctuation">,</span> <span class="identifier">l</span> <span class="arithmetic-assignment">=</span> <span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">data</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">l</span> <span class="relational-operator">==</span> <span class="int-literal">1</span><span class="punctuation">:</span>
            <span class="identifier">color</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'w'</span>
        <span class="keyword">elif</span> <span class="identifier">l</span> <span class="relational-operator">==</span> <span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="punctuation">:</span>
            <span class="identifier">color</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'k'</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">plot</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">x</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="identifier">y</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="string-literal">"%so"</span> <span class="arithmetic-operator">%</span> <span class="identifier">color</span><span class="punctuation">,</span> <span class="identifier">scalex</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.0</span><span class="punctuation">,</span> <span class="identifier">scaley</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.0</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">update</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">event</span><span class="punctuation">,</span> <span class="identifier">model</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">event</span> <span class="relational-operator">==</span> <span class="string-literal">"examples_loaded"</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">data</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update_example</span><span class="grouping">(</span><span class="identifier">model</span><span class="punctuation">,</span> <span class="identifier">i</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">event</span> <span class="relational-operator">==</span> <span class="string-literal">"example_added"</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update_example</span><span class="grouping">(</span><span class="identifier">model</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">event</span> <span class="relational-operator">==</span> <span class="string-literal">"clear"</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">clear</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">set_xticks</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">set_yticks</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">c_labels</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plot_kernels</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">event</span> <span class="relational-operator">==</span> <span class="string-literal">"surface"</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">remove_surface</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plot_support_vectors</span><span class="grouping">(</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">clf</span><span class="punctuation">.</span><span class="identifier">support_vectors_</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plot_decision_surface</span><span class="grouping">(</span><span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">surface</span><span class="punctuation">,</span> <span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">surface_type</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">draw</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">remove_surface</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""Remove old decision surface."""</span>
        <span class="keyword">if</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span><span class="grouping">)</span> <span class="relational-operator">&gt;</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">contour</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span><span class="punctuation">:</span>
                <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">contour</span><span class="punctuation">,</span> <span class="identifier">ContourSet</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="keyword">for</span> <span class="identifier">lineset</span> <span class="relational-operator">in</span> <span class="identifier">contour</span><span class="punctuation">.</span><span class="identifier">collections</span><span class="punctuation">:</span>
                        <span class="identifier">lineset</span><span class="punctuation">.</span><span class="identifier">remove</span><span class="grouping">(</span><span class="grouping">)</span>
                <span class="keyword">else</span><span class="punctuation">:</span>
                    <span class="identifier">contour</span><span class="punctuation">.</span><span class="identifier">remove</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>

    <span class="keyword">def</span> <span class="identifier">plot_support_vectors</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">support_vectors</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""Plot the support vectors by placing circles over the
        corresponding data points and adds the circle collection
        to the contours list."""</span>
        <span class="identifier">cs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">scatter</span><span class="grouping">(</span><span class="identifier">support_vectors</span><span class="grouping">[</span><span class="punctuation">:</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">support_vectors</span><span class="grouping">[</span><span class="punctuation">:</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span>
                             <span class="identifier">s</span><span class="arithmetic-assignment">=</span><span class="int-literal">80</span><span class="punctuation">,</span> <span class="identifier">edgecolors</span><span class="arithmetic-assignment">=</span><span class="string-literal">"k", facecolors="none"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">cs</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">plot_decision_surface</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">surface</span><span class="punctuation">,</span> <span class="identifier">type</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span> <span class="arithmetic-assignment">=</span> <span class="identifier">surface</span>
        <span class="keyword">if</span> <span class="identifier">type</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="identifier">levels</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="float-literal">-1.0</span><span class="punctuation">,</span> <span class="float-literal">0.0</span><span class="punctuation">,</span> <span class="float-literal">1.0</span><span class="grouping">]</span>
            <span class="identifier">linestyles</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">'dashed', 'solid', 'dashed'</span><span class="grouping">]</span>
            <span class="identifier">colors</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'k'</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">contour</span><span class="grouping">(</span><span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span><span class="punctuation">,</span> <span class="identifier">levels</span><span class="punctuation">,</span>
                                                 <span class="identifier">colors</span><span class="arithmetic-assignment">=</span><span class="identifier">colors</span><span class="punctuation">,</span>
                                                 <span class="identifier">linestyles</span><span class="arithmetic-assignment">=</span><span class="identifier">linestyles</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">type</span> <span class="relational-operator">==</span> <span class="int-literal">1</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">contourf</span><span class="grouping">(</span><span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span><span class="punctuation">,</span> <span class="int-literal">10</span><span class="punctuation">,</span>
                                                  <span class="identifier">cmap</span><span class="arithmetic-assignment">=</span><span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">cm</span><span class="punctuation">.</span><span class="identifier">bone</span><span class="punctuation">,</span>
                                                  <span class="identifier">origin</span><span class="arithmetic-assignment">=</span><span class="string-literal">'lower'</span><span class="punctuation">,</span> <span class="identifier">alpha</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.85</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">contours</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax</span><span class="punctuation">.</span><span class="identifier">contour</span><span class="grouping">(</span><span class="identifier">X1</span><span class="punctuation">,</span> <span class="identifier">X2</span><span class="punctuation">,</span> <span class="identifier">Z</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="float-literal">0.0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">colors</span><span class="arithmetic-assignment">=</span><span class="string-literal">'k'</span><span class="punctuation">,</span>
                                                 <span class="identifier">linestyles</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="string-literal">'solid'</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"surface type unknown"</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">ControllBar</span><span class="punctuation">:</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">root</span><span class="punctuation">,</span> <span class="identifier">controller</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">fm</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">root</span><span class="grouping">)</span>
        <span class="identifier">kernel_group</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">fm</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Radiobutton</span><span class="grouping">(</span><span class="identifier">kernel_group</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Linear"</span><span class="punctuation">,</span> <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">kernel</span><span class="punctuation">,</span>
                       <span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">refit</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Radiobutton</span><span class="grouping">(</span><span class="identifier">kernel_group</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"RBF"</span><span class="punctuation">,</span> <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">kernel</span><span class="punctuation">,</span>
                       <span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">refit</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Radiobutton</span><span class="grouping">(</span><span class="identifier">kernel_group</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Poly"</span><span class="punctuation">,</span> <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">kernel</span><span class="punctuation">,</span>
                       <span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">refit</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
        <span class="identifier">kernel_group</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>

        <span class="identifier">valbox</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">fm</span><span class="grouping">)</span>
        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">complexity</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">StringVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">complexity</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="string-literal">"1.0"</span><span class="grouping">)</span>
        <span class="identifier">c</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">valbox</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">c</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"C:", anchor="e"</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">7</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Entry</span><span class="grouping">(</span><span class="identifier">c</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">6</span><span class="punctuation">,</span> <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">complexity</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span>
            <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">c</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">gamma</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">StringVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">gamma</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="string-literal">"0.01"</span><span class="grouping">)</span>
        <span class="identifier">g</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">valbox</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">g</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"gamma:", anchor="e"</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">7</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Entry</span><span class="grouping">(</span><span class="identifier">g</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">6</span><span class="punctuation">,</span> <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">gamma</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">g</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">degree</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">StringVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">degree</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="string-literal">"3"</span><span class="grouping">)</span>
        <span class="identifier">d</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">valbox</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">d</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"degree:", anchor="e"</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">7</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Entry</span><span class="grouping">(</span><span class="identifier">d</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">6</span><span class="punctuation">,</span> <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">degree</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">d</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">coef0</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">StringVar</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">coef0</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="string-literal">"0"</span><span class="grouping">)</span>
        <span class="identifier">r</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">valbox</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"coef0:", anchor="e"</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">7</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Entry</span><span class="grouping">(</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">6</span><span class="punctuation">,</span> <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">coef0</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">r</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">valbox</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>

        <span class="identifier">cmap_group</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">fm</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Radiobutton</span><span class="grouping">(</span><span class="identifier">cmap_group</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Hyperplanes"</span><span class="punctuation">,</span>
                       <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">surface_type</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span>
                       <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">refit</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Radiobutton</span><span class="grouping">(</span><span class="identifier">cmap_group</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Surface"</span><span class="punctuation">,</span>
                       <span class="identifier">variable</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">surface_type</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                       <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">refit</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">anchor</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">W</span><span class="grouping">)</span>

        <span class="identifier">cmap_group</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>

        <span class="identifier">train_button</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Button</span><span class="grouping">(</span><span class="identifier">fm</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">'Fit'</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span>
                                 <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">fit</span><span class="grouping">)</span>
        <span class="identifier">train_button</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">fm</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>
        <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Button</span><span class="grouping">(</span><span class="identifier">fm</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="string-literal">'Clear'</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span>
                  <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">controller</span><span class="punctuation">.</span><span class="identifier">clear_data</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">get_parser</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="keyword">from</span> <span class="identifier">optparse</span> <span class="keyword">import</span> <span class="identifier">OptionParser</span>
    <span class="identifier">op</span> <span class="arithmetic-assignment">=</span> <span class="identifier">OptionParser</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="identifier">op</span><span class="punctuation">.</span><span class="identifier">add_option</span><span class="grouping">(</span><span class="string-literal">"--output"</span><span class="punctuation">,</span>
                  <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store", type="str", dest="output"</span><span class="punctuation">,</span>
                  <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Path where to dump data."</span><span class="grouping">)</span>
    <span class="keyword">return</span> <span class="identifier">op</span>


<span class="keyword">def</span> <span class="identifier">main</span><span class="grouping">(</span><span class="identifier">argv</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">op</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_parser</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="identifier">opts</span><span class="punctuation">,</span> <span class="identifier">args</span> <span class="arithmetic-assignment">=</span> <span class="identifier">op</span><span class="punctuation">.</span><span class="identifier">parse_args</span><span class="grouping">(</span><span class="identifier">argv</span><span class="grouping">[</span><span class="int-literal">1</span><span class="punctuation">:</span><span class="grouping">]</span><span class="grouping">)</span>
    <span class="identifier">root</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">Tk</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="identifier">model</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Model</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="identifier">controller</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Controller</span><span class="grouping">(</span><span class="identifier">model</span><span class="grouping">)</span>
    <span class="identifier">root</span><span class="punctuation">.</span><span class="identifier">wm_title</span><span class="grouping">(</span><span class="string-literal">"Scikit-learn Libsvm GUI"</span><span class="grouping">)</span>
    <span class="identifier">view</span> <span class="arithmetic-assignment">=</span> <span class="identifier">View</span><span class="grouping">(</span><span class="identifier">root</span><span class="punctuation">,</span> <span class="identifier">controller</span><span class="grouping">)</span>
    <span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">add_observer</span><span class="grouping">(</span><span class="identifier">view</span><span class="grouping">)</span>
    <span class="identifier">Tk</span><span class="punctuation">.</span><span class="identifier">mainloop</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">if</span> <span class="identifier">opts</span><span class="punctuation">.</span><span class="identifier">output</span><span class="punctuation">:</span>
        <span class="identifier">model</span><span class="punctuation">.</span><span class="identifier">dump_svmlight_file</span><span class="grouping">(</span><span class="identifier">opts</span><span class="punctuation">.</span><span class="identifier">output</span><span class="grouping">)</span>

<span class="keyword">if</span> <span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"__main__"</span><span class="punctuation">:</span>
    <span class="identifier">main</span><span class="grouping">(</span><span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">argv</span><span class="grouping">)</span>

    </pre>
  </body>
</html>