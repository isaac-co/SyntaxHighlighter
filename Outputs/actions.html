<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#!/usr/bin/env python3</span>
<span class="comment">""" Custom :class:`argparse.Action` objects for Faceswap's Command Line Interface.

The custom actions within this module allow for custom manipulation of Command Line Arguments
as well as adding a mechanism for indicating to the GUI how specific options should be rendered.
"""</span>

<span class="keyword">import</span> <span class="identifier">argparse</span>
<span class="keyword">import</span> <span class="identifier">os</span>


<span class="comment"># &lt;&lt; FILE HANDLING &gt;&gt;</span>

<span class="keyword">class</span> <span class="identifier">_FullPaths</span><span class="grouping">(</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">Action</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="comment">""" Parent class for various file type and file path handling classes.

    Expands out given paths to their full absolute paths. This class should not be
    called directly. It is the base class for the various different file handling
    methods.
    """</span>
    <span class="keyword">def</span> <span class="identifier">__call__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parser</span><span class="punctuation">,</span> <span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="punctuation">,</span> <span class="identifier">option_string</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">values</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">list</span><span class="punctuation">,</span> <span class="identifier">tuple</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">vals</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">abspath</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">expanduser</span><span class="grouping">(</span><span class="identifier">val</span><span class="grouping">)</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">val</span> <span class="relational-operator">in</span> <span class="identifier">values</span><span class="grouping">]</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">vals</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">abspath</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">expanduser</span><span class="grouping">(</span><span class="identifier">values</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">setattr</span><span class="grouping">(</span><span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dest</span><span class="punctuation">,</span> <span class="identifier">vals</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">DirFullPaths</span><span class="grouping">(</span><span class="identifier">_FullPaths</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Adds support for a Directory browser in the GUI.

    This is a standard :class:`argparse.Action` (with stock parameters) which indicates to the GUI
    that a dialog box should be opened in order to browse for a folder.

    No additional parameters are required.

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--folder_location"),
    &gt;&gt;&gt;        action=DirFullPaths)),
    """</span>
    <span class="comment"># pylint: disable=too-few-public-methods,unnecessary-pass</span>
    <span class="keyword">pass</span>


<span class="keyword">class</span> <span class="identifier">FileFullPaths</span><span class="grouping">(</span><span class="identifier">_FullPaths</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Adds support for a File browser to select a single file in the GUI.

    This extends the standard :class:`argparse.Action` and adds an additional parameter
    :attr:`filetypes`, indicating to the GUI that it should pop a file browser for opening a file
    and limit the results to the file types listed. As well as the standard parameters, the
    following parameter is required:

    Parameters
    ----------
    filetypes: str
        The accepted file types for this option. This is the key for the GUIs lookup table which
        can be found in :class:`lib.gui.utils.FileHandler`

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--video_location"),
    &gt;&gt;&gt;        action=FileFullPaths,
    &gt;&gt;&gt;        filetypes="video))"
    """</span>
    <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">filetypes</span> <span class="arithmetic-assignment">=</span> <span class="identifier">filetypes</span>

    <span class="keyword">def</span> <span class="identifier">_get_kwargs</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">names</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="punctuation">,</span>
                 <span class="string-literal">"dest"</span><span class="punctuation">,</span>
                 <span class="string-literal">"nargs"</span><span class="punctuation">,</span>
                 <span class="string-literal">"const"</span><span class="punctuation">,</span>
                 <span class="string-literal">"default"</span><span class="punctuation">,</span>
                 <span class="string-literal">"type"</span><span class="punctuation">,</span>
                 <span class="string-literal">"choices"</span><span class="punctuation">,</span>
                 <span class="string-literal">"help"</span><span class="punctuation">,</span>
                 <span class="string-literal">"metavar"</span><span class="punctuation">,</span>
                 <span class="string-literal">"filetypes"</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="grouping">[</span><span class="grouping">(</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">getattr</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="grouping">)</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">name</span> <span class="relational-operator">in</span> <span class="identifier">names</span><span class="grouping">]</span>


<span class="keyword">class</span> <span class="identifier">FilesFullPaths</span><span class="grouping">(</span><span class="identifier">FileFullPaths</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="comment">""" Adds support for a File browser to select multiple files in the GUI.

    This extends the standard :class:`argparse.Action` and adds an additional parameter
    :attr:`filetypes`, indicating to the GUI that it should pop a file browser, and limit
    the results to the file types listed. Multiple files can be selected for opening, so the
    :attr:`nargs` parameter must be set. As well as the standard parameters, the following
    parameter is required:

    Parameters
    ----------
    filetypes: str
        The accepted file types for this option. This is the key for the GUIs lookup table which
        can be found in :class:`lib.gui.utils.FileHandler`

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--images"),
    &gt;&gt;&gt;        action=FilesFullPaths,
    &gt;&gt;&gt;        filetypes="image",
    &gt;&gt;&gt;        nargs="+"))
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"nargs"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">opt</span> <span class="arithmetic-assignment">=</span> <span class="identifier">kwargs</span><span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="grouping">]</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"nargs must be provided for FilesFullPaths: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">DirOrFileFullPaths</span><span class="grouping">(</span><span class="identifier">FileFullPaths</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="comment">""" Adds support to the GUI to launch either a file browser or a folder browser.

    Some inputs (for example source frames) can come from a folder of images or from a
    video file. This indicates to the GUI that it should place 2 buttons (one for a folder
    browser, one for a file browser) for file/folder browsing.

    The standard :class:`argparse.Action` is extended with the additional parameter
    :attr:`filetypes`, indicating to the GUI that it should pop a file browser, and limit
    the results to the file types listed. As well as the standard parameters, the following
    parameter is required:

    Parameters
    ----------
    filetypes: str
        The accepted file types for this option. This is the key for the GUIs lookup table which
        can be found in :class:`lib.gui.utils.FileHandler`. NB: This parameter is only used for
        the file browser and not the folder browser

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--input_frames"),
    &gt;&gt;&gt;        action=DirOrFileFullPaths,
    &gt;&gt;&gt;        filetypes="video))"
    """</span>
    <span class="keyword">pass</span>  <span class="comment"># pylint: disable=unnecessary-pass</span>


<span class="keyword">class</span> <span class="identifier">SaveFileFullPaths</span><span class="grouping">(</span><span class="identifier">FileFullPaths</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Adds support for a Save File dialog in the GUI.

    This extends the standard :class:`argparse.Action` and adds an additional parameter
    :attr:`filetypes`, indicating to the GUI that it should pop a save file browser, and limit
    the results to the file types listed. As well as the standard parameters, the following
    parameter is required:

    Parameters
    ----------
    filetypes: str
        The accepted file types for this option. This is the key for the GUIs lookup table which
        can be found in :class:`lib.gui.utils.FileHandler`

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--video_out"),
    &gt;&gt;&gt;        action=SaveFileFullPaths,
    &gt;&gt;&gt;        filetypes="video"))
    """</span>
    <span class="comment"># pylint: disable=too-few-public-methods,unnecessary-pass</span>
    <span class="keyword">pass</span>


<span class="keyword">class</span> <span class="identifier">ContextFullPaths</span><span class="grouping">(</span><span class="identifier">FileFullPaths</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Adds support for context sensitive browser dialog opening in the GUI.

    For some tasks, the type of action (file load, folder open, file save etc.) can vary
    depending on the task to be performed (a good example of this is the effmpeg tool).
    Using this action indicates to the GUI that the type of dialog to be launched can change
    depending on another option. As well as the standard parameters, the below parameters are
    required. NB: :attr:`nargs` are explicitly disallowed.

    Parameters
    ----------
    filetypes: str
        The accepted file types for this option. This is the key for the GUIs lookup table which
        can be found in :class:`lib.gui.utils.FileHandler`
    action_option: str
        The command line option that dictates the context of the file dialog to be opened.
        Bespoke actions are set in :class:`lib.gui.utils.FileHandler`

    Example
    -------
    Assuming an argument has already been set with option string `-a` indicating the action to be
    performed, the following will pop a different type of dialog depending on the action selected:

    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--input_video"),
    &gt;&gt;&gt;        action=ContextFullPaths,
    &gt;&gt;&gt;        filetypes="video",
    &gt;&gt;&gt;        action_option="-a"))
    """</span>
    <span class="comment"># pylint: disable=too-few-public-methods, too-many-arguments</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">action_option</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">opt</span> <span class="arithmetic-assignment">=</span> <span class="identifier">kwargs</span><span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"nargs"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"nargs not allowed for ContextFullPaths: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">filetypes</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"filetypes is required for ContextFullPaths: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">action_option</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"action_option is required for ContextFullPaths: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="identifier">filetypes</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">action_option</span> <span class="arithmetic-assignment">=</span> <span class="identifier">action_option</span>

    <span class="keyword">def</span> <span class="identifier">_get_kwargs</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">names</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="punctuation">,</span>
                 <span class="string-literal">"dest"</span><span class="punctuation">,</span>
                 <span class="string-literal">"nargs"</span><span class="punctuation">,</span>
                 <span class="string-literal">"const"</span><span class="punctuation">,</span>
                 <span class="string-literal">"default"</span><span class="punctuation">,</span>
                 <span class="string-literal">"type"</span><span class="punctuation">,</span>
                 <span class="string-literal">"choices"</span><span class="punctuation">,</span>
                 <span class="string-literal">"help"</span><span class="punctuation">,</span>
                 <span class="string-literal">"metavar"</span><span class="punctuation">,</span>
                 <span class="string-literal">"filetypes"</span><span class="punctuation">,</span>
                 <span class="string-literal">"action_option"</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="grouping">[</span><span class="grouping">(</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">getattr</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="grouping">)</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">name</span> <span class="relational-operator">in</span> <span class="identifier">names</span><span class="grouping">]</span>


<span class="comment"># &lt;&lt; GUI DISPLAY OBJECTS &gt;&gt;</span>

<span class="keyword">class</span> <span class="identifier">Radio</span><span class="grouping">(</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">Action</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="comment">""" Adds support for a GUI Radio options box.

    This is a standard :class:`argparse.Action` (with stock parameters) which indicates to the GUI
    that the options passed should be rendered as a group of Radio Buttons rather than a combo box.

    No additional parameters are required, but the :attr:`choices` parameter must be provided as
    these will be the Radio Box options. :attr:`nargs` are explicitly disallowed.

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--foobar"),
    &gt;&gt;&gt;        action=Radio,
    &gt;&gt;&gt;        choices=["foo", "bar"))
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">opt</span> <span class="arithmetic-assignment">=</span> <span class="identifier">kwargs</span><span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"nargs"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"nargs not allowed for Radio buttons: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"choices"</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"Choices must be provided for Radio buttons: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__call__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parser</span><span class="punctuation">,</span> <span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="punctuation">,</span> <span class="identifier">option_string</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">setattr</span><span class="grouping">(</span><span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dest</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">MultiOption</span><span class="grouping">(</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">Action</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="comment">""" Adds support for multiple option checkboxes in the GUI.

    This is a standard :class:`argparse.Action` (with stock parameters) which indicates to the GUI
    that the options passed should be rendered as a group of Radio Buttons rather than a combo box.

    The :attr:`choices` parameter must be provided as this provides the valid option choices.

    Example
    -------
    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--foobar"),
    &gt;&gt;&gt;        action=MultiOption,
    &gt;&gt;&gt;        choices=["foo", "bar"))
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">opt</span> <span class="arithmetic-assignment">=</span> <span class="identifier">kwargs</span><span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"nargs"</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"nargs must be provided for MultiOption: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"choices"</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"Choices must be provided for MultiOption: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__call__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parser</span><span class="punctuation">,</span> <span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="punctuation">,</span> <span class="identifier">option_string</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">setattr</span><span class="grouping">(</span><span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dest</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">Slider</span><span class="grouping">(</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">Action</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
    <span class="comment">""" Adds support for a slider in the GUI.

    The standard :class:`argparse.Action` is extended with the additional parameters listed below.
    The :attr:`default` value must be supplied and the :attr:`type` must be either :class:`int` or
    :class:`float`. :attr:`nargs` are explicitly disallowed.

    Parameters
    ----------
    min_max: tuple
        The (`min`, `max`) values that the slider's range should be set to. The values should be a
        pair of `float` or `int` data types, depending on the data type of the slider. NB: These
        min/max values are not enforced, they are purely for setting the slider range. Values
        outside of this range can still be explicitly passed in from the cli.
    rounding: int
        If the underlying data type for the option is a `float` then this value is the number of
        decimal places to round the slider values to. If the underlying data type for the option is
        an `int` then this is the step interval between each value for the slider.

    Examples
    --------
    For integer values:

    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--foobar"),
    &gt;&gt;&gt;        action=Slider,
    &gt;&gt;&gt;        min_max=(0, 10)
    &gt;&gt;&gt;        rounding=1
    &gt;&gt;&gt;        type=int,
    &gt;&gt;&gt;        default=5))

    For floating point values:

    &gt;&gt;&gt; argument_list = []
    &gt;&gt;&gt; argument_list.append(dict(
    &gt;&gt;&gt;        opts=("-f", "--foobar"),
    &gt;&gt;&gt;        action=Slider,
    &gt;&gt;&gt;        min_max=(0.00, 1.00)
    &gt;&gt;&gt;        rounding=2
    &gt;&gt;&gt;        type=float,
    &gt;&gt;&gt;        default=5.00))
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">opt</span> <span class="arithmetic-assignment">=</span> <span class="identifier">kwargs</span><span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"nargs"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"nargs not allowed for Slider: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"default"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"A default value must be supplied for Slider: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">kwargs</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"type"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"Sliders only accept int and float data types: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">min_max</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"min_max must be provided for Sliders: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">rounding</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"rounding must be provided for Sliders: {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">opt</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">min_max</span> <span class="arithmetic-assignment">=</span> <span class="identifier">min_max</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rounding</span> <span class="arithmetic-assignment">=</span> <span class="identifier">rounding</span>

    <span class="keyword">def</span> <span class="identifier">_get_kwargs</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">names</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">"option_strings"</span><span class="punctuation">,</span>
                 <span class="string-literal">"dest"</span><span class="punctuation">,</span>
                 <span class="string-literal">"nargs"</span><span class="punctuation">,</span>
                 <span class="string-literal">"const"</span><span class="punctuation">,</span>
                 <span class="string-literal">"default"</span><span class="punctuation">,</span>
                 <span class="string-literal">"type"</span><span class="punctuation">,</span>
                 <span class="string-literal">"choices"</span><span class="punctuation">,</span>
                 <span class="string-literal">"help"</span><span class="punctuation">,</span>
                 <span class="string-literal">"metavar"</span><span class="punctuation">,</span>
                 <span class="string-literal">"min_max"</span><span class="punctuation">,</span>  <span class="comment"># Tuple containing min and max values of scale</span>
                 <span class="string-literal">"rounding"</span><span class="grouping">]</span>  <span class="comment"># Decimal places to round floats to or step interval for ints</span>
        <span class="keyword">return</span> <span class="grouping">[</span><span class="grouping">(</span><span class="identifier">name</span><span class="punctuation">,</span> <span class="identifier">getattr</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">name</span><span class="grouping">)</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">name</span> <span class="relational-operator">in</span> <span class="identifier">names</span><span class="grouping">]</span>

    <span class="keyword">def</span> <span class="identifier">__call__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parser</span><span class="punctuation">,</span> <span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="punctuation">,</span> <span class="identifier">option_string</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">setattr</span><span class="grouping">(</span><span class="identifier">namespace</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">dest</span><span class="punctuation">,</span> <span class="identifier">values</span><span class="grouping">)</span>

    </pre>
  </body>
</html>