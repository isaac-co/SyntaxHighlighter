<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment"># Authors: Gael Varoquaux &lt;gael.varoquaux@normalesup.org&gt;</span>
<span class="comment">#          Justin Vincent</span>
<span class="comment">#          Lars Buitinck</span>
<span class="comment"># License: BSD 3 clause</span>

<span class="keyword">import</span> <span class="identifier">math</span>

<span class="keyword">import</span> <span class="identifier">numpy</span> <span class="keyword">as</span> <span class="identifier">np</span>
<span class="keyword">import</span> <span class="identifier">pytest</span>
<span class="keyword">import</span> <span class="identifier">scipy</span><span class="punctuation">.</span><span class="identifier">stats</span>

<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">utils</span><span class="punctuation">.</span><span class="identifier">_testing</span> <span class="keyword">import</span> <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span>

<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">utils</span><span class="punctuation">.</span><span class="identifier">fixes</span> <span class="keyword">import</span> <span class="identifier">_joblib_parallel_args</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">utils</span><span class="punctuation">.</span><span class="identifier">fixes</span> <span class="keyword">import</span> <span class="identifier">_object_dtype_isnan</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">utils</span><span class="punctuation">.</span><span class="identifier">fixes</span> <span class="keyword">import</span> <span class="identifier">loguniform</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">utils</span><span class="punctuation">.</span><span class="identifier">fixes</span> <span class="keyword">import</span> <span class="identifier">linspace</span><span class="punctuation">,</span> <span class="identifier">parse_version</span><span class="punctuation">,</span> <span class="identifier">np_version</span>


<span class="punctuation">@</span><span class="identifier">pytest</span><span class="punctuation">.</span><span class="identifier">mark</span><span class="punctuation">.</span><span class="identifier">parametrize</span><span class="grouping">(</span><span class="string-literal">'joblib_version', ('0.11', '0.12.0'</span><span class="grouping">)</span><span class="grouping">)</span>
<span class="keyword">def</span> <span class="identifier">test_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">monkeypatch</span><span class="punctuation">,</span> <span class="identifier">joblib_version</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="keyword">import</span> <span class="identifier">joblib</span>
    <span class="identifier">monkeypatch</span><span class="punctuation">.</span><span class="identifier">setattr</span><span class="grouping">(</span><span class="identifier">joblib</span><span class="punctuation">,</span> <span class="string-literal">'__version__'</span><span class="punctuation">,</span> <span class="identifier">joblib_version</span><span class="grouping">)</span>

    <span class="keyword">if</span> <span class="identifier">joblib_version</span> <span class="relational-operator">==</span> <span class="string-literal">'0.12.0'</span><span class="punctuation">:</span>
        <span class="comment"># arguments are simply passed through</span>
        <span class="keyword">assert</span> <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">prefer</span><span class="arithmetic-assignment">=</span><span class="string-literal">'threads') == {'prefer': 'threads'</span><span class="grouping">}</span>
        <span class="keyword">assert</span> <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">prefer</span><span class="arithmetic-assignment">=</span><span class="string-literal">'processes'</span><span class="punctuation">,</span> <span class="identifier">require</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="grouping">{</span>
                    <span class="string-literal">'prefer': 'processes', 'require'</span><span class="punctuation">:</span> <span class="none-literal">None</span><span class="grouping">}</span>
        <span class="keyword">assert</span> <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">non_existing</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="grouping">{</span><span class="string-literal">'non_existing'</span><span class="punctuation">:</span> <span class="int-literal">1</span><span class="grouping">}</span>
    <span class="keyword">elif</span> <span class="identifier">joblib_version</span> <span class="relational-operator">==</span> <span class="string-literal">'0.11'</span><span class="punctuation">:</span>
        <span class="comment"># arguments are mapped to the corresponding backend</span>
        <span class="keyword">assert</span> <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">prefer</span><span class="arithmetic-assignment">=</span><span class="string-literal">'threads'</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="grouping">{</span>
                    <span class="string-literal">'backend': 'threading'</span><span class="grouping">}</span>
        <span class="keyword">assert</span> <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">prefer</span><span class="arithmetic-assignment">=</span><span class="string-literal">'processes'</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="grouping">{</span>
                    <span class="string-literal">'backend': 'multiprocessing'</span><span class="grouping">}</span>
        <span class="keyword">with</span> <span class="identifier">pytest</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">i</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">s</span><span class="grouping">(</span><span class="identifier">ValueError</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">prefer</span><span class="arithmetic-assignment">=</span><span class="string-literal">'invalid'</span><span class="grouping">)</span>
        <span class="keyword">assert</span> <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span>
                <span class="identifier">prefer</span><span class="arithmetic-assignment">=</span><span class="string-literal">'processes', require='sharedmem'</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="grouping">{</span>
                    <span class="string-literal">'backend': 'threading'</span><span class="grouping">}</span>
        <span class="keyword">with</span> <span class="identifier">pytest</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">i</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">s</span><span class="grouping">(</span><span class="identifier">ValueError</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">require</span><span class="arithmetic-assignment">=</span><span class="string-literal">'invalid'</span><span class="grouping">)</span>
        <span class="keyword">with</span> <span class="identifier">pytest</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">i</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">s</span><span class="grouping">(</span><span class="identifier">NotImplementedError</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">_joblib_parallel_args</span><span class="grouping">(</span><span class="identifier">verbose</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
    <span class="keyword">else</span><span class="punctuation">:</span>
        <span class="keyword">raise</span> <span class="identifier">ValueError</span>


<span class="punctuation">@</span><span class="identifier">pytest</span><span class="punctuation">.</span><span class="identifier">mark</span><span class="punctuation">.</span><span class="identifier">parametrize</span><span class="grouping">(</span><span class="string-literal">"dtype, val"</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="grouping">[</span><span class="identifier">object</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span>
                                        <span class="grouping">[</span><span class="identifier">object</span><span class="punctuation">,</span> <span class="string-literal">"a"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                        <span class="grouping">[</span><span class="identifier">float</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
<span class="keyword">def</span> <span class="identifier">test_object_dtype_isnan</span><span class="grouping">(</span><span class="identifier">dtype</span><span class="punctuation">,</span> <span class="identifier">val</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">X</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">[</span><span class="identifier">val</span><span class="punctuation">,</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">nan</span><span class="grouping">]</span><span class="punctuation">,</span>
                  <span class="grouping">[</span><span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">nan</span><span class="punctuation">,</span> <span class="identifier">val</span><span class="grouping">]</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">dtype</span><span class="arithmetic-assignment">=</span><span class="identifier">dtype</span><span class="grouping">)</span>

    <span class="identifier">expected_mask</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">[</span><span class="bool-literal">False</span><span class="punctuation">,</span> <span class="bool-literal">True</span><span class="grouping">]</span><span class="punctuation">,</span>
                              <span class="grouping">[</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="bool-literal">False</span><span class="grouping">]</span><span class="grouping">]</span><span class="grouping">)</span>

    <span class="identifier">mask</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_object_dtype_isnan</span><span class="grouping">(</span><span class="identifier">X</span><span class="grouping">)</span>

    <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span><span class="grouping">(</span><span class="identifier">mask</span><span class="punctuation">,</span> <span class="identifier">expected_mask</span><span class="grouping">)</span>


<span class="punctuation">@</span><span class="identifier">pytest</span><span class="punctuation">.</span><span class="identifier">mark</span><span class="punctuation">.</span><span class="identifier">parametrize</span><span class="grouping">(</span><span class="string-literal">"low,high,base"</span><span class="punctuation">,</span>
                         <span class="grouping">[</span><span class="grouping">(</span><span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">10</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">exp</span><span class="grouping">(</span><span class="int-literal">1</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="arithmetic-operator">-</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>
<span class="keyword">def</span> <span class="identifier">test_loguniform</span><span class="grouping">(</span><span class="identifier">low</span><span class="punctuation">,</span> <span class="identifier">high</span><span class="punctuation">,</span> <span class="identifier">base</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">rv</span> <span class="arithmetic-assignment">=</span> <span class="identifier">loguniform</span><span class="grouping">(</span><span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">low</span><span class="punctuation">,</span> <span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">high</span><span class="grouping">)</span>
    <span class="keyword">assert</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">rv</span><span class="punctuation">,</span> <span class="identifier">scipy</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="punctuation">.</span><span class="identifier">_distn_infrastructure</span><span class="punctuation">.</span><span class="identifier">rv_frozen</span><span class="grouping">)</span>
    <span class="identifier">rvs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">rv</span><span class="punctuation">.</span><span class="identifier">rvs</span><span class="grouping">(</span><span class="identifier">size</span><span class="arithmetic-assignment">=</span><span class="int-literal">2000</span><span class="punctuation">,</span> <span class="identifier">random_state</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="grouping">)</span>

    <span class="comment"># Test the basics; right bounds, right size</span>
    <span class="keyword">assert</span> <span class="grouping">(</span><span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">low</span> <span class="relational-operator">&lt;=</span> <span class="identifier">rvs</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">all</span><span class="grouping">(</span><span class="grouping">)</span> <span class="logical-operator">and</span> <span class="grouping">(</span><span class="identifier">rvs</span> <span class="relational-operator">&lt;=</span> <span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">high</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">all</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="keyword">assert</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">rvs</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="int-literal">2000</span>

    <span class="comment"># Test that it's actually (fairly) uniform</span>
    <span class="identifier">log_rvs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">math</span><span class="punctuation">.</span><span class="identifier">log</span><span class="grouping">(</span><span class="identifier">x</span><span class="punctuation">,</span> <span class="identifier">base</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">x</span> <span class="relational-operator">in</span> <span class="identifier">rvs</span><span class="grouping">]</span><span class="grouping">)</span>
    <span class="identifier">counts</span><span class="punctuation">,</span> <span class="identifier">_</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">histogram</span><span class="grouping">(</span><span class="identifier">log_rvs</span><span class="grouping">)</span>
    <span class="keyword">assert</span> <span class="identifier">counts</span><span class="punctuation">.</span><span class="identifier">mean</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="int-literal">200</span>
    <span class="keyword">assert</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">abs</span><span class="grouping">(</span><span class="identifier">counts</span> <span class="arithmetic-operator">-</span> <span class="identifier">counts</span><span class="punctuation">.</span><span class="identifier">mean</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">max</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">&lt;=</span> <span class="int-literal">40</span>

    <span class="comment"># Test that random_state works</span>
    <span class="keyword">assert</span> <span class="grouping">(</span>
        <span class="identifier">loguniform</span><span class="grouping">(</span><span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">low</span><span class="punctuation">,</span> <span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">high</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">rvs</span><span class="grouping">(</span><span class="identifier">random_state</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="grouping">)</span>
        <span class="relational-operator">==</span> <span class="identifier">loguniform</span><span class="grouping">(</span><span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">low</span><span class="punctuation">,</span> <span class="identifier">base</span> <span class="arithmetic-operator">**</span> <span class="identifier">high</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">rvs</span><span class="grouping">(</span><span class="identifier">random_state</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="grouping">)</span>
    <span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">test_linspace</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""Test that linespace works like np.linespace as of numpy version 1.16."""</span>
    <span class="identifier">start</span><span class="punctuation">,</span> <span class="identifier">stop</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">10</span>
    <span class="identifier">num</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">6</span>
    <span class="identifier">out</span> <span class="arithmetic-assignment">=</span> <span class="identifier">linspace</span><span class="grouping">(</span><span class="identifier">start</span><span class="arithmetic-assignment">=</span><span class="identifier">start</span><span class="punctuation">,</span> <span class="identifier">stop</span><span class="arithmetic-assignment">=</span><span class="identifier">stop</span><span class="punctuation">,</span> <span class="identifier">num</span><span class="arithmetic-assignment">=</span><span class="identifier">num</span><span class="punctuation">,</span> <span class="identifier">endpoint</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
    <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span><span class="grouping">(</span><span class="identifier">out</span><span class="punctuation">,</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">(</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">.</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">4</span><span class="punctuation">,</span> <span class="int-literal">6</span><span class="punctuation">,</span> <span class="int-literal">8</span><span class="punctuation">,</span> <span class="int-literal">10</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>

    <span class="identifier">start</span><span class="punctuation">,</span> <span class="identifier">stop</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">100</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="int-literal">1100</span><span class="grouping">]</span>
    <span class="identifier">num</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">6</span>
    <span class="identifier">out</span> <span class="arithmetic-assignment">=</span> <span class="identifier">linspace</span><span class="grouping">(</span><span class="identifier">start</span><span class="arithmetic-assignment">=</span><span class="identifier">start</span><span class="punctuation">,</span> <span class="identifier">stop</span><span class="arithmetic-assignment">=</span><span class="identifier">stop</span><span class="punctuation">,</span> <span class="identifier">num</span><span class="arithmetic-assignment">=</span><span class="identifier">num</span><span class="punctuation">,</span> <span class="identifier">endpoint</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
    <span class="identifier">res</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">c_</span><span class="grouping">[</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">.</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">4</span><span class="punctuation">,</span> <span class="int-literal">6</span><span class="punctuation">,</span> <span class="int-literal">8</span><span class="punctuation">,</span> <span class="int-literal">10</span><span class="grouping">]</span><span class="punctuation">,</span>
                <span class="grouping">[</span><span class="int-literal">100</span><span class="punctuation">,</span> <span class="int-literal">300</span><span class="punctuation">,</span> <span class="int-literal">500</span><span class="punctuation">,</span> <span class="int-literal">700</span><span class="punctuation">,</span> <span class="int-literal">900</span><span class="punctuation">,</span> <span class="int-literal">1100</span><span class="grouping">]</span><span class="grouping">]</span>
    <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span><span class="grouping">(</span><span class="identifier">out</span><span class="punctuation">,</span> <span class="identifier">res</span><span class="grouping">)</span>

    <span class="identifier">out2</span> <span class="arithmetic-assignment">=</span> <span class="identifier">linspace</span><span class="grouping">(</span><span class="identifier">start</span><span class="arithmetic-assignment">=</span><span class="identifier">start</span><span class="punctuation">,</span> <span class="identifier">stop</span><span class="arithmetic-assignment">=</span><span class="identifier">stop</span><span class="punctuation">,</span> <span class="identifier">num</span><span class="arithmetic-assignment">=</span><span class="identifier">num</span><span class="punctuation">,</span> <span class="identifier">endpoint</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span> <span class="identifier">axis</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>
    <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span><span class="grouping">(</span><span class="identifier">out2</span><span class="punctuation">,</span> <span class="identifier">out</span><span class="punctuation">.</span><span class="identifier">T</span><span class="grouping">)</span>

    <span class="identifier">out</span><span class="punctuation">,</span> <span class="identifier">step</span> <span class="arithmetic-assignment">=</span> <span class="identifier">linspace</span><span class="grouping">(</span>
        <span class="identifier">start</span><span class="arithmetic-assignment">=</span><span class="identifier">start</span><span class="punctuation">,</span>
        <span class="identifier">stop</span><span class="arithmetic-assignment">=</span><span class="identifier">stop</span><span class="punctuation">,</span>
        <span class="identifier">num</span><span class="arithmetic-assignment">=</span><span class="identifier">num</span><span class="punctuation">,</span>
        <span class="identifier">endpoint</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
        <span class="identifier">retstep</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
    <span class="grouping">)</span>
    <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span><span class="grouping">(</span><span class="identifier">out</span><span class="punctuation">,</span> <span class="identifier">res</span><span class="grouping">)</span>
    <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">y</span><span class="invalid">_</span><span class="invalid">e</span><span class="invalid">q</span><span class="invalid">u</span><span class="invalid">a</span><span class="invalid">l</span><span class="grouping">(</span><span class="identifier">step</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">200</span><span class="grouping">]</span><span class="grouping">)</span>

    <span class="keyword">if</span> <span class="identifier">np_version</span> <span class="relational-operator">&lt;</span> <span class="identifier">parse_version</span><span class="grouping">(</span><span class="string-literal">'1.16'</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">with</span> <span class="identifier">pytest</span><span class="punctuation">.</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">i</span><span class="invalid">s</span><span class="invalid">e</span><span class="invalid">s</span><span class="grouping">(</span><span class="identifier">ValueError</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">linspace</span><span class="grouping">(</span><span class="identifier">start</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">stop</span><span class="arithmetic-assignment">=</span><span class="int-literal">10</span><span class="grouping">)</span>
    <span class="keyword">else</span><span class="punctuation">:</span>
        <span class="identifier">linspace</span><span class="grouping">(</span><span class="identifier">start</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">stop</span><span class="arithmetic-assignment">=</span><span class="int-literal">10</span><span class="grouping">)</span>

    </pre>
  </body>
</html>