<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment"># An OOP approach to representing and manipulating matrices</span>


<span class="keyword">class</span> <span class="identifier">Matrix</span><span class="punctuation">:</span>
    <span class="comment">"""
    Matrix object generated from a 2D array where each element is an array representing
    a row.
    Rows can contain type int or float.
    Common operations and information available.
    &gt;&gt;&gt; rows = [
    ...     [1, 2, 3],
    ...     [4, 5, 6],
    ...     [7, 8, 9]
    ... ]
    &gt;&gt;&gt; matrix = Matrix(rows)
    &gt;&gt;&gt; print(matrix)
    [[1. 2. 3.]
     [4. 5. 6.]
     [7. 8. 9.]]

    Matrix rows and columns are available as 2D arrays
    &gt;&gt;&gt; print(matrix.rows)
    [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
    &gt;&gt;&gt; print(matrix.columns())
    [[1, 4, 7], [2, 5, 8], [3, 6, 9]]

    Order is returned as a tuple
    &gt;&gt;&gt; matrix.order
    (3, 3)

    Squareness and invertability are represented as bool
    &gt;&gt;&gt; matrix.is_square
    True
    &gt;&gt;&gt; matrix.is_invertable()
    False

    Identity, Minors, Cofactors and Adjugate are returned as Matrices.  Inverse can be
    a Matrix or Nonetype
    &gt;&gt;&gt; print(matrix.identity())
    [[1. 0. 0.]
     [0. 1. 0.]
     [0. 0. 1.]]
    &gt;&gt;&gt; print(matrix.minors())
    [[-3. -6. -3.]
     [-6. -12. -6.]
     [-3. -6. -3.]]
    &gt;&gt;&gt; print(matrix.cofactors())
    [[-3. 6. -3.]
     [6. -12. 6.]
     [-3. 6. -3.]]
    &gt;&gt;&gt;  # won't be apparent due to the nature of the cofactor matrix
    &gt;&gt;&gt; print(matrix.adjugate())
    [[-3. 6. -3.]
     [6. -12. 6.]
     [-3. 6. -3.]]
    &gt;&gt;&gt; print(matrix.inverse())
    None

    Determinant is an int, float, or Nonetype
    &gt;&gt;&gt; matrix.determinant()
    0

    Negation, scalar multiplication, addition, subtraction, multiplication and
    exponentiation are available and all return a Matrix
    &gt;&gt;&gt; print(-matrix)
    [[-1. -2. -3.]
     [-4. -5. -6.]
     [-7. -8. -9.]]
    &gt;&gt;&gt; matrix2 = matrix * 3
    &gt;&gt;&gt; print(matrix2)
    [[3. 6. 9.]
     [12. 15. 18.]
     [21. 24. 27.]]
    &gt;&gt;&gt; print(matrix + matrix2)
    [[4. 8. 12.]
     [16. 20. 24.]
     [28. 32. 36.]]
    &gt;&gt;&gt; print(matrix - matrix2)
    [[-2. -4. -6.]
     [-8. -10. -12.]
     [-14. -16. -18.]]
    &gt;&gt;&gt; print(matrix ** 3)
    [[468. 576. 684.]
     [1062. 1305. 1548.]
     [1656. 2034. 2412.]]

    Matrices can also be modified
    &gt;&gt;&gt; matrix.add_row([10, 11, 12])
    &gt;&gt;&gt; print(matrix)
    [[1. 2. 3.]
     [4. 5. 6.]
     [7. 8. 9.]
     [10. 11. 12.]]
    &gt;&gt;&gt; matrix2.add_column([8, 16, 32])
    &gt;&gt;&gt; print(matrix2)
    [[3. 6. 9. 8.]
     [12. 15. 18. 16.]
     [21. 24. 27. 32.]]
    &gt;&gt;&gt; print(matrix *  matrix2)
    [[90. 108. 126. 136.]
     [198. 243. 288. 304.]
     [306. 378. 450. 472.]
     [414. 513. 612. 640.]]

    """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">rows</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">error</span> <span class="arithmetic-assignment">=</span> <span class="identifier">TypeError</span><span class="grouping">(</span>
            <span class="string-literal">"Matrices must be formed from a list of zero or more lists containing at "</span>
            <span class="string-literal">"least one and the same number of values, each of which must be of type "</span>
            <span class="string-literal">"int or float."</span>
        <span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">rows</span><span class="grouping">)</span> <span class="relational-operator">!=</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="identifier">cols</span> <span class="arithmetic-assignment">=</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">cols</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
                <span class="keyword">raise</span> <span class="identifier">error</span>
            <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">rows</span><span class="punctuation">:</span>
                <span class="keyword">if</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">row</span><span class="grouping">)</span> <span class="relational-operator">!=</span> <span class="identifier">cols</span><span class="punctuation">:</span>
                    <span class="keyword">raise</span> <span class="identifier">error</span>
                <span class="keyword">for</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">row</span><span class="punctuation">:</span>
                    <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">value</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                        <span class="keyword">raise</span> <span class="identifier">error</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span> <span class="arithmetic-assignment">=</span> <span class="identifier">rows</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>

    <span class="comment"># MATRIX INFORMATION</span>
    <span class="keyword">def</span> <span class="identifier">columns</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="grouping">[</span><span class="grouping">[</span><span class="identifier">row</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">num_rows</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">num_columns</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">order</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">is_square</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="relational-operator">==</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span>

    <span class="keyword">def</span> <span class="identifier">identity</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">values</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
            <span class="grouping">[</span><span class="int-literal">0</span> <span class="keyword">if</span> <span class="identifier">column_num</span> <span class="relational-operator">!=</span> <span class="identifier">row_num</span> <span class="keyword">else</span> <span class="int-literal">1</span> <span class="keyword">for</span> <span class="identifier">column_num</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span><span class="grouping">]</span>
            <span class="keyword">for</span> <span class="identifier">row_num</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
        <span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">values</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">determinant</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">is_square</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="none-literal">None</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span> <span class="relational-operator">==</span> <span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="int-literal">1</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span> <span class="relational-operator">==</span> <span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span> <span class="relational-operator">==</span> <span class="grouping">(</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">)</span> <span class="arithmetic-operator">-</span> <span class="grouping">(</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span>
            <span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">sum</span><span class="grouping">(</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">column</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">cofactors</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">column</span><span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">column</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span>
            <span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">is_invertable</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">bool</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">determinant</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">get_minor</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">values</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
            <span class="grouping">[</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">other_row</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">other_column</span><span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">other_column</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span>
                <span class="keyword">if</span> <span class="identifier">other_column</span> <span class="relational-operator">!=</span> <span class="identifier">column</span>
            <span class="grouping">]</span>
            <span class="keyword">for</span> <span class="identifier">other_row</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">other_row</span> <span class="relational-operator">!=</span> <span class="identifier">row</span>
        <span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">values</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">determinant</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">get_cofactor</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="grouping">(</span><span class="identifier">row</span> <span class="arithmetic-operator">+</span> <span class="identifier">column</span><span class="grouping">)</span> <span class="arithmetic-operator">%</span> <span class="int-literal">2</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_minor</span><span class="grouping">(</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="arithmetic-operator">-</span><span class="int-literal">1</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_minor</span><span class="grouping">(</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">minors</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span>
            <span class="grouping">[</span>
                <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_minor</span><span class="grouping">(</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">column</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span><span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
            <span class="grouping">]</span>
        <span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">cofactors</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span>
            <span class="grouping">[</span>
                <span class="grouping">[</span>
                    <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">minors</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">row</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">column</span><span class="grouping">]</span>
                    <span class="keyword">if</span> <span class="grouping">(</span><span class="identifier">row</span> <span class="arithmetic-operator">+</span> <span class="identifier">column</span><span class="grouping">)</span> <span class="arithmetic-operator">%</span> <span class="int-literal">2</span> <span class="relational-operator">==</span> <span class="int-literal">0</span>
                    <span class="keyword">else</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">minors</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">row</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">column</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="arithmetic-operator">-</span><span class="int-literal">1</span>
                    <span class="keyword">for</span> <span class="identifier">column</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">minors</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span>
                <span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">minors</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
            <span class="grouping">]</span>
        <span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">adjugate</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">values</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
            <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">cofactors</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">column</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">row</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">column</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span><span class="grouping">]</span>
            <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
        <span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">values</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">inverse</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">determinant</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">determinant</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="none-literal">None</span> <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">determinant</span> <span class="keyword">else</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">adjugate</span><span class="grouping">(</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="grouping">(</span><span class="int-literal">1</span> <span class="arithmetic-operator">/</span> <span class="identifier">determinant</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__repr__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">str</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__str__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="string-literal">"[]"</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span> <span class="relational-operator">==</span> <span class="int-literal">1</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="string-literal">"[[" + ". ".join(self.rows[0]) + "]]"</span>
        <span class="keyword">return</span> <span class="grouping">(</span>
            <span class="string-literal">"["</span>
            <span class="arithmetic-operator">+</span> <span class="string-literal">"\n "</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span>
                <span class="grouping">[</span>
                    <span class="string-literal">"[" + ". ".join([str(value) for value in row]) + ".]"</span>
                    <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span>
                <span class="grouping">]</span>
            <span class="grouping">)</span>
            <span class="arithmetic-operator">+</span> <span class="string-literal">"]"</span>
        <span class="grouping">)</span>

    <span class="comment"># MATRIX MANIPULATION</span>
    <span class="keyword">def</span> <span class="identifier">add_row</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">position</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">type_error</span> <span class="arithmetic-assignment">=</span> <span class="identifier">TypeError</span><span class="grouping">(</span><span class="string-literal">"Row must be a list containing all ints and/or floats"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">list</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">type_error</span>
        <span class="keyword">for</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">row</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">value</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="keyword">raise</span> <span class="identifier">type_error</span>
        <span class="keyword">if</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">row</span><span class="grouping">)</span> <span class="relational-operator">!=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span>
                <span class="string-literal">"Row must be equal in length to the other rows in the matrix"</span>
            <span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">position</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">row</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">:</span><span class="identifier">position</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="grouping">[</span><span class="identifier">row</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">position</span><span class="punctuation">:</span><span class="grouping">]</span>

    <span class="keyword">def</span> <span class="identifier">add_column</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="punctuation">,</span> <span class="identifier">position</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">type_error</span> <span class="arithmetic-assignment">=</span> <span class="identifier">TypeError</span><span class="grouping">(</span>
            <span class="string-literal">"Column must be a list containing all ints and/or floats"</span>
        <span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">column</span><span class="punctuation">,</span> <span class="identifier">list</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">type_error</span>
        <span class="keyword">for</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">column</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">value</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="keyword">raise</span> <span class="identifier">type_error</span>
        <span class="keyword">if</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">column</span><span class="grouping">)</span> <span class="relational-operator">!=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span>
                <span class="string-literal">"Column must be equal in length to the other columns in the matrix"</span>
            <span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">position</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="grouping">[</span><span class="identifier">column</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span><span class="grouping">]</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">:</span><span class="identifier">position</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="grouping">[</span><span class="identifier">column</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">position</span><span class="punctuation">:</span><span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
            <span class="grouping">]</span>

    <span class="comment"># MATRIX OPERATIONS</span>
    <span class="keyword">def</span> <span class="identifier">__eq__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">other</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">other</span><span class="punctuation">,</span> <span class="identifier">Matrix</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">TypeError</span><span class="grouping">(</span><span class="string-literal">"A Matrix can only be compared with another Matrix"</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span> <span class="relational-operator">==</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">rows</span>

    <span class="keyword">def</span> <span class="identifier">__ne__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">other</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="logical-operator">not</span> <span class="identifier">self</span> <span class="relational-operator">==</span> <span class="identifier">other</span>

    <span class="keyword">def</span> <span class="identifier">__neg__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">self</span> <span class="arithmetic-operator">*</span> <span class="arithmetic-operator">-</span><span class="int-literal">1</span>

    <span class="keyword">def</span> <span class="identifier">__add__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">other</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span> <span class="relational-operator">!=</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">order</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"Addition requires matrices of the same order"</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span>
            <span class="grouping">[</span>
                <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">j</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span><span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
            <span class="grouping">]</span>
        <span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__sub__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">other</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">order</span> <span class="relational-operator">!=</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">order</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"Subtraction requires matrices of the same order"</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span>
            <span class="grouping">[</span>
                <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span> <span class="arithmetic-operator">-</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">j</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span><span class="grouping">)</span><span class="grouping">]</span>
                <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="grouping">)</span>
            <span class="grouping">]</span>
        <span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__mul__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">other</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">other</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="grouping">[</span><span class="grouping">[</span><span class="identifier">element</span> <span class="arithmetic-operator">*</span> <span class="identifier">other</span> <span class="keyword">for</span> <span class="identifier">element</span> <span class="relational-operator">in</span> <span class="identifier">row</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">other</span><span class="punctuation">,</span> <span class="identifier">Matrix</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">num_columns</span> <span class="relational-operator">!=</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">num_rows</span><span class="punctuation">:</span>
                <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span>
                    <span class="string-literal">"The number of columns in the first matrix must "</span>
                    <span class="string-literal">"be equal to the number of rows in the second"</span>
                <span class="grouping">)</span>
            <span class="keyword">return</span> <span class="identifier">Matrix</span><span class="grouping">(</span>
                <span class="grouping">[</span>
                    <span class="grouping">[</span><span class="identifier">Matrix</span><span class="punctuation">.</span><span class="identifier">dot_product</span><span class="grouping">(</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">column</span> <span class="relational-operator">in</span> <span class="identifier">other</span><span class="punctuation">.</span><span class="identifier">columns</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span>
                    <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">rows</span>
                <span class="grouping">]</span>
            <span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">TypeError</span><span class="grouping">(</span>
                <span class="string-literal">"A Matrix can only be multiplied by an int, float, or another matrix"</span>
            <span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__pow__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">other</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">other</span><span class="punctuation">,</span> <span class="identifier">int</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">TypeError</span><span class="grouping">(</span><span class="string-literal">"A Matrix can only be raised to the power of an int"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">is_square</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span><span class="string-literal">"Only square matrices can be raised to a power"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">other</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">identity</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">other</span> <span class="relational-operator">&lt;</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">is_invertable</span><span class="punctuation">:</span>
                <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">inverse</span><span class="grouping">(</span><span class="grouping">)</span> <span class="arithmetic-operator">**</span> <span class="grouping">(</span><span class="arithmetic-operator">-</span><span class="identifier">other</span><span class="grouping">)</span>
            <span class="keyword">raise</span> <span class="identifier">ValueError</span><span class="grouping">(</span>
                <span class="string-literal">"Only invertable matrices can be raised to a negative power"</span>
            <span class="grouping">)</span>
        <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span>
        <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">other</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">result</span> <span class="arithmetic-assignment">*=</span> <span class="identifier">self</span>
        <span class="keyword">return</span> <span class="identifier">result</span>

    <span class="punctuation">@</span><span class="invalid">c</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">h</span><span class="invalid">o</span><span class="invalid">d</span>
    <span class="keyword">def</span> <span class="identifier">dot_product</span><span class="grouping">(</span><span class="identifier">cls</span><span class="punctuation">,</span> <span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">sum</span><span class="grouping">(</span><span class="identifier">row</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">column</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">row</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="keyword">if</span> <span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"__main__"</span><span class="punctuation">:</span>
    <span class="keyword">import</span> <span class="identifier">doctest</span>

    <span class="identifier">doctest</span><span class="punctuation">.</span><span class="identifier">testmod</span><span class="grouping">(</span><span class="grouping">)</span>

    </pre>
  </body>
</html>