<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">"""
This is to show simple COVID19 info fetching from worldometers site using lxml
* The main motivation to use lxml in place of bs4 is that it is faster and therefore
more convenient to use in Python web projects (e.g. Django or Flask-based)
"""</span>

<span class="keyword">from</span> <span class="identifier">collections</span> <span class="keyword">import</span> <span class="identifier">namedtuple</span>

<span class="keyword">import</span> <span class="identifier">requests</span>
<span class="keyword">from</span> <span class="identifier">lxml</span> <span class="keyword">import</span> <span class="identifier">html</span>  <span class="comment"># type: ignore</span>

<span class="identifier">covid_data</span> <span class="arithmetic-assignment">=</span> <span class="identifier">namedtuple</span><span class="grouping">(</span><span class="string-literal">"covid_data", "cases deaths recovered"</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">covid_stats</span><span class="grouping">(</span><span class="identifier">url</span><span class="punctuation">:</span> <span class="identifier">str</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"https://www.worldometers.info/coronavirus/"</span><span class="grouping">)</span> <span class="misc">-&gt;</span> <span class="identifier">covid_data</span><span class="punctuation">:</span>
    <span class="identifier">xpath_str</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'//div[@class = "maincounter-number"]/span/text()'</span>
    <span class="keyword">return</span> <span class="identifier">covid_data</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">html</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">m</span><span class="invalid">s</span><span class="invalid">t</span><span class="invalid">r</span><span class="invalid">i</span><span class="invalid">n</span><span class="invalid">g</span><span class="grouping">(</span><span class="identifier">requests</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">url</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">content</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">xpath</span><span class="grouping">(</span><span class="identifier">xpath_str</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="identifier">fmt</span> <span class="arithmetic-assignment">=</span> <span class="comment">"""Total COVID-19 cases in the world: {}
Total deaths due to COVID-19 in the world: {}
Total COVID-19 patients recovered in the world: {}"""</span>
<span class="identifier">print</span><span class="grouping">(</span><span class="identifier">fmt</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">covid_stats</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>

    </pre>
  </body>
</html>