<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#!/usr/bin python3</span>
<span class="comment">""" Graph functions for Display Frame of the Faceswap GUI """</span>
<span class="keyword">import</span> <span class="identifier">datetime</span>
<span class="keyword">import</span> <span class="identifier">logging</span>
<span class="keyword">import</span> <span class="identifier">os</span>
<span class="keyword">import</span> <span class="identifier">tkinter</span> <span class="keyword">as</span> <span class="identifier">tk</span>

<span class="keyword">from</span> <span class="identifier">tkinter</span> <span class="keyword">import</span> <span class="identifier">ttk</span>
<span class="keyword">from</span> <span class="identifier">math</span> <span class="keyword">import</span> <span class="identifier">ceil</span><span class="punctuation">,</span> <span class="identifier">floor</span>

<span class="keyword">import</span> <span class="identifier">numpy</span> <span class="keyword">as</span> <span class="identifier">np</span>
<span class="keyword">import</span> <span class="identifier">matplotlib</span>
<span class="comment"># pylint: disable=wrong-import-position</span>
<span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">use</span><span class="grouping">(</span><span class="string-literal">"TkAgg"</span><span class="grouping">)</span>

<span class="keyword">from</span> <span class="identifier">matplotlib</span> <span class="keyword">import</span> <span class="identifier">style</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">figure</span> <span class="keyword">import</span> <span class="identifier">Figure</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">backends</span><span class="punctuation">.</span><span class="identifier">backend_tkagg</span> <span class="keyword">import</span> <span class="grouping">(</span><span class="identifier">FigureCanvasTkAgg</span><span class="punctuation">,</span>  <span class="comment"># noqa</span>
                                               <span class="identifier">NavigationToolbar2Tk</span><span class="grouping">)</span>

<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">custom_widgets</span> <span class="keyword">import</span> <span class="identifier">Tooltip</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">utils</span> <span class="keyword">import</span> <span class="identifier">get_config</span><span class="punctuation">,</span> <span class="identifier">get_images</span><span class="punctuation">,</span> <span class="identifier">LongRunningTask</span>  <span class="comment"># noqa</span>

<span class="identifier">logger</span> <span class="arithmetic-assignment">=</span> <span class="identifier">logging</span><span class="punctuation">.</span><span class="identifier">getLogger</span><span class="grouping">(</span><span class="identifier">__name__</span><span class="grouping">)</span>  <span class="comment"># pylint: disable=invalid-name</span>


<span class="keyword">class</span> <span class="identifier">NavigationToolbar</span><span class="grouping">(</span><span class="identifier">NavigationToolbar2Tk</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-many-ancestors</span>
    <span class="comment">""" Same as default, but only including buttons we need
        with custom icons and layout
        From: https://stackoverflow.com/questions/12695678 """</span>
    <span class="identifier">toolitems</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">t</span> <span class="keyword">for</span> <span class="identifier">t</span> <span class="relational-operator">in</span> <span class="identifier">NavigationToolbar2Tk</span><span class="punctuation">.</span><span class="identifier">toolitems</span> <span class="keyword">if</span>
                 <span class="identifier">t</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"Home", "Pan", "Zoom", "Save"</span><span class="grouping">)</span><span class="grouping">]</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_Button</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">file</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="punctuation">,</span> <span class="identifier">extension</span><span class="arithmetic-assignment">=</span><span class="string-literal">".gif"</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=arguments-differ</span>
        <span class="comment">""" Map Buttons to their own frame.
            Use custom button icons, Use ttk buttons pack to the right """</span>
        <span class="identifier">iconmapping</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="string-literal">"home": "reload"</span><span class="punctuation">,</span>
                       <span class="string-literal">"filesave": "save"</span><span class="punctuation">,</span>
                       <span class="string-literal">"zoom_to_rect": "zoom"</span><span class="grouping">}</span>
        <span class="identifier">icon</span> <span class="arithmetic-assignment">=</span> <span class="identifier">iconmapping</span><span class="grouping">[</span><span class="identifier">file</span><span class="grouping">]</span> <span class="keyword">if</span> <span class="identifier">iconmapping</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="identifier">file</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="keyword">else</span> <span class="identifier">file</span>
        <span class="identifier">img</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_images</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">icons</span><span class="grouping">[</span><span class="identifier">icon</span><span class="grouping">]</span>
        <span class="identifier">btn</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Button</span><span class="grouping">(</span><span class="identifier">frame</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">image</span><span class="arithmetic-assignment">=</span><span class="identifier">img</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">command</span><span class="grouping">)</span>
        <span class="identifier">btn</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">btn</span>

    <span class="keyword">def</span> <span class="identifier">_init_toolbar</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Same as original but ttk widgets and standard tool-tips used. Separator added and
            message label packed to the left """</span>
        <span class="identifier">xmin</span><span class="punctuation">,</span> <span class="identifier">xmax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">canvas</span><span class="punctuation">.</span><span class="identifier">figure</span><span class="punctuation">.</span><span class="identifier">bbox</span><span class="punctuation">.</span><span class="identifier">intervalx</span>
        <span class="identifier">height</span><span class="punctuation">,</span> <span class="identifier">width</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">50</span><span class="punctuation">,</span> <span class="identifier">xmax</span><span class="arithmetic-operator">-</span><span class="identifier">xmin</span>
        <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">master</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">window</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="grouping">(</span><span class="identifier">width</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">height</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="grouping">(</span><span class="identifier">height</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="identifier">sep</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">height</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="identifier">relief</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIDGE</span><span class="grouping">)</span>
        <span class="identifier">sep</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update</span><span class="grouping">(</span><span class="grouping">)</span>  <span class="comment"># Make axes menu</span>

        <span class="identifier">btnframe</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">btnframe</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">pady</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">RIGHT</span><span class="grouping">)</span>

        <span class="keyword">for</span> <span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">tooltip_text</span><span class="punctuation">,</span> <span class="identifier">image_file</span><span class="punctuation">,</span> <span class="identifier">callback</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">toolitems</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">text</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="comment"># Add a spacer; return value is unused.</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_Spacer</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">button</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_Button</span><span class="grouping">(</span><span class="identifier">btnframe</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">file</span><span class="arithmetic-assignment">=</span><span class="identifier">image_file</span><span class="punctuation">,</span>
                                      <span class="identifier">command</span><span class="arithmetic-assignment">=</span><span class="identifier">getattr</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">callback</span><span class="grouping">)</span><span class="grouping">)</span>
                <span class="keyword">if</span> <span class="identifier">tooltip_text</span> <span class="relational-operator">is</span> <span class="logical-operator">not</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                    <span class="identifier">Tooltip</span><span class="grouping">(</span><span class="identifier">button</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="arithmetic-assignment">=</span><span class="identifier">tooltip_text</span><span class="punctuation">,</span> <span class="identifier">wrap_length</span><span class="arithmetic-assignment">=</span><span class="int-literal">200</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">message</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">StringVar</span><span class="grouping">(</span><span class="identifier">master</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_message_label</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Label</span><span class="grouping">(</span><span class="identifier">master</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">textvariable</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">message</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_message_label</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">LEFT</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTTOM</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">X</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">GraphBase</span><span class="grouping">(</span><span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Frame</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-many-ancestors</span>
    <span class="comment">""" Base class for matplotlib line graphs """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">style</span><span class="punctuation">.</span><span class="identifier">use</span><span class="grouping">(</span><span class="string-literal">"ggplot"</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">data</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ylabel</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ylabel</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">colourmaps</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">"Reds", "Blues", "Greens", "Purples", "Oranges", "Greys", "copper"</span><span class="punctuation">,</span>
                           <span class="string-literal">"summer", "bone", "hot", "cool", "pink", "Wistia", "spring", "winter"</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">toolbar</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Figure</span><span class="grouping">(</span><span class="identifier">figsize</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">4</span><span class="punctuation">,</span> <span class="int-literal">4</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">dpi</span><span class="arithmetic-assignment">=</span><span class="int-literal">75</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span><span class="punctuation">.</span><span class="identifier">add_subplot</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span> <span class="arithmetic-assignment">=</span> <span class="identifier">FigureCanvasTkAgg</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">initiate_graph</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update_plot</span><span class="grouping">(</span><span class="identifier">initiate</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">__class__</span><span class="punctuation">.</span><span class="identifier">__name__</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">initiate_graph</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Place the graph canvas """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting plotcanvas"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">.</span><span class="identifier">get_tk_widget</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">TOP</span><span class="punctuation">,</span> <span class="identifier">padx</span><span class="arithmetic-assignment">=</span><span class="int-literal">5</span><span class="punctuation">,</span> <span class="identifier">fill</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTH</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span><span class="punctuation">.</span><span class="identifier">subplots_adjust</span><span class="grouping">(</span><span class="identifier">left</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.100</span><span class="punctuation">,</span>
                                 <span class="identifier">bottom</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.100</span><span class="punctuation">,</span>
                                 <span class="identifier">right</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.95</span><span class="punctuation">,</span>
                                 <span class="identifier">top</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.95</span><span class="punctuation">,</span>
                                 <span class="identifier">wspace</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.2</span><span class="punctuation">,</span>
                                 <span class="identifier">hspace</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.2</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Set plotcanvas"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">update_plot</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">initiate</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Update the plot with incoming data """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Updating plot"</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">initiate</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initializing plot"</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">clear</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">axes_labels_set</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Initialized plot"</span><span class="grouping">)</span>

        <span class="identifier">fulldata</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">item</span> <span class="keyword">for</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="punctuation">.</span><span class="identifier">values</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">axes_limits_set</span><span class="grouping">(</span><span class="identifier">fulldata</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">start_iteration</span> <span class="relational-operator">&gt;</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="identifier">end_iteration</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">start_iteration</span> <span class="arithmetic-operator">+</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">iterations</span>
            <span class="identifier">xrng</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">start_iteration</span><span class="punctuation">,</span> <span class="identifier">end_iteration</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">xrng</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">iterations</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="identifier">keys</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="keyword">for</span> <span class="identifier">idx</span><span class="punctuation">,</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines_sort</span><span class="grouping">(</span><span class="identifier">keys</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">initiate</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines</span><span class="punctuation">.</span><span class="identifier">extend</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">plot</span><span class="grouping">(</span><span class="identifier">xrng</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="grouping">[</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">]</span><span class="punctuation">,</span>
                                                <span class="identifier">label</span><span class="arithmetic-assignment">=</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">linewidth</span><span class="arithmetic-assignment">=</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">2</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">color</span><span class="arithmetic-assignment">=</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">3</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">set_data</span><span class="grouping">(</span><span class="identifier">xrng</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="grouping">[</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">initiate</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">legend_place</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Updated plot"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">axes_labels_set</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the axes label and range """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting axes labels. y-label: '%s'"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ylabel</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_xlabel</span><span class="grouping">(</span><span class="string-literal">"Iterations"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_ylabel</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ylabel</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">axes_limits_set_default</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set default axes limits """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Setting default axes ranges"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_ylim</span><span class="grouping">(</span><span class="float-literal">0.00</span><span class="punctuation">,</span> <span class="float-literal">100.0</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_xlim</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">axes_limits_set</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the axes limits """</span>
        <span class="identifier">xmin</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">start_iteration</span>
        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">start_iteration</span> <span class="relational-operator">&gt;</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="identifier">xmax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">iterations</span> <span class="arithmetic-operator">+</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">start_iteration</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">xmax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">iterations</span>
        <span class="identifier">xmax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">max</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">xmax</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">data</span><span class="punctuation">:</span>
            <span class="identifier">ymin</span><span class="punctuation">,</span> <span class="identifier">ymax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">axes_data_get_min_max</span><span class="grouping">(</span><span class="identifier">data</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_ylim</span><span class="grouping">(</span><span class="identifier">ymin</span><span class="punctuation">,</span> <span class="identifier">ymax</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_xlim</span><span class="grouping">(</span><span class="identifier">xmin</span><span class="punctuation">,</span> <span class="identifier">xmax</span><span class="grouping">)</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"axes ranges: (y: (%s, %s), x:(0, %s)"</span><span class="punctuation">,</span> <span class="identifier">ymin</span><span class="punctuation">,</span> <span class="identifier">ymax</span><span class="punctuation">,</span> <span class="identifier">xmax</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">axes_limits_set_default</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">axes_data_get_min_max</span><span class="grouping">(</span><span class="identifier">data</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return the minimum and maximum values from list of lists """</span>
        <span class="identifier">ymin</span><span class="punctuation">,</span> <span class="identifier">ymax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>

        <span class="keyword">for</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">data</span><span class="punctuation">:</span>  <span class="comment"># TODO Handle as array not loop</span>
            <span class="identifier">ymin</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">nanmin</span><span class="grouping">(</span><span class="identifier">item</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="int-literal">1000</span><span class="grouping">)</span>
            <span class="identifier">ymax</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">nanmax</span><span class="grouping">(</span><span class="identifier">item</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="int-literal">1000</span><span class="grouping">)</span>
        <span class="identifier">ymin</span> <span class="arithmetic-assignment">=</span> <span class="identifier">floor</span><span class="grouping">(</span><span class="identifier">min</span><span class="grouping">(</span><span class="identifier">ymin</span><span class="grouping">)</span><span class="grouping">)</span> <span class="arithmetic-operator">/</span> <span class="int-literal">1000</span>
        <span class="identifier">ymax</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ceil</span><span class="grouping">(</span><span class="identifier">max</span><span class="grouping">(</span><span class="identifier">ymax</span><span class="grouping">)</span><span class="grouping">)</span> <span class="arithmetic-operator">/</span> <span class="int-literal">1000</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"ymin: %s, ymax: %s"</span><span class="punctuation">,</span> <span class="identifier">ymin</span><span class="punctuation">,</span> <span class="identifier">ymax</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">ymin</span><span class="punctuation">,</span> <span class="identifier">ymax</span>

    <span class="keyword">def</span> <span class="identifier">axes_set_yscale</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the Y-Scale to log or linear """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"yscale: '%s'"</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">set_yscale</span><span class="grouping">(</span><span class="identifier">scale</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">lines_sort</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">keys</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Sort the data keys into consistent order
            and set line color map and line width """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Sorting lines"</span><span class="grouping">)</span>
        <span class="identifier">raw_lines</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">sorted_lines</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="identifier">sorted</span><span class="grouping">(</span><span class="identifier">keys</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">title</span> <span class="arithmetic-assignment">=</span> <span class="identifier">key</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="string-literal">"_", " "</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">title</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">key</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"raw"</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">raw_lines</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">title</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">sorted_lines</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">title</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="identifier">groupsize</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines_groupsize</span><span class="grouping">(</span><span class="identifier">raw_lines</span><span class="punctuation">,</span> <span class="identifier">sorted_lines</span><span class="grouping">)</span>
        <span class="identifier">sorted_lines</span> <span class="arithmetic-assignment">=</span> <span class="identifier">raw_lines</span> <span class="arithmetic-operator">+</span> <span class="identifier">sorted_lines</span>
        <span class="identifier">lines</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines_style</span><span class="grouping">(</span><span class="identifier">sorted_lines</span><span class="punctuation">,</span> <span class="identifier">groupsize</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">lines</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">lines_groupsize</span><span class="grouping">(</span><span class="identifier">raw_lines</span><span class="punctuation">,</span> <span class="identifier">sorted_lines</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Get the number of items in each group.
            If raw data isn't selected, then check the length of
            remaining groups until something is found """</span>
        <span class="identifier">groupsize</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span>
        <span class="keyword">if</span> <span class="identifier">raw_lines</span><span class="punctuation">:</span>
            <span class="identifier">groupsize</span> <span class="arithmetic-assignment">=</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">raw_lines</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="identifier">sorted_lines</span><span class="punctuation">:</span>
            <span class="identifier">keys</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">key</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">[</span><span class="punctuation">:</span><span class="identifier">key</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">find</span><span class="grouping">(</span><span class="string-literal">"_"</span><span class="grouping">)</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="identifier">sorted_lines</span><span class="grouping">]</span>
            <span class="identifier">distinct_keys</span> <span class="arithmetic-assignment">=</span> <span class="identifier">set</span><span class="grouping">(</span><span class="identifier">keys</span><span class="grouping">)</span>
            <span class="identifier">groupsize</span> <span class="arithmetic-assignment">=</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">keys</span><span class="grouping">)</span> <span class="arithmetic-operator">//</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">distinct_keys</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="identifier">groupsize</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">groupsize</span>

    <span class="keyword">def</span> <span class="identifier">lines_style</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">lines</span><span class="punctuation">,</span> <span class="identifier">groupsize</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the color map and line width for each group """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="string-literal">"Setting lines style"</span><span class="grouping">)</span>
        <span class="identifier">groups</span> <span class="arithmetic-assignment">=</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">lines</span><span class="grouping">)</span> <span class="arithmetic-operator">/</span> <span class="identifier">groupsize</span><span class="grouping">)</span>
        <span class="identifier">colours</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">lines_create_colors</span><span class="grouping">(</span><span class="identifier">groupsize</span><span class="punctuation">,</span> <span class="identifier">groups</span><span class="grouping">)</span>
        <span class="identifier">widths</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">range</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">groups</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">idx</span><span class="punctuation">,</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">lines</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">linewidth</span> <span class="arithmetic-assignment">=</span> <span class="identifier">widths</span><span class="grouping">[</span><span class="identifier">idx</span> <span class="arithmetic-operator">//</span> <span class="identifier">groupsize</span><span class="grouping">]</span>
            <span class="identifier">item</span><span class="punctuation">.</span><span class="identifier">extend</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">linewidth</span><span class="punctuation">,</span> <span class="identifier">colours</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">lines</span>

    <span class="keyword">def</span> <span class="identifier">lines_create_colors</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">groupsize</span><span class="punctuation">,</span> <span class="identifier">groups</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create the colors """</span>
        <span class="identifier">colours</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">groups</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">colour</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">colourmaps</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">:</span><span class="identifier">groupsize</span><span class="grouping">]</span><span class="punctuation">:</span>
                <span class="identifier">cmap</span> <span class="arithmetic-assignment">=</span> <span class="identifier">matplotlib</span><span class="punctuation">.</span><span class="identifier">cm</span><span class="punctuation">.</span><span class="identifier">get_cmap</span><span class="grouping">(</span><span class="identifier">colour</span><span class="grouping">)</span>
                <span class="identifier">cpoint</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span> <span class="arithmetic-operator">-</span> <span class="grouping">(</span><span class="identifier">i</span> <span class="arithmetic-operator">/</span> <span class="int-literal">5</span><span class="grouping">)</span>
                <span class="identifier">colours</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">cmap</span><span class="grouping">(</span><span class="identifier">cpoint</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">trace</span><span class="grouping">(</span><span class="identifier">colours</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">colours</span>

    <span class="keyword">def</span> <span class="identifier">legend_place</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Place and format legend """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Placing legend"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ax1</span><span class="punctuation">.</span><span class="identifier">legend</span><span class="grouping">(</span><span class="identifier">loc</span><span class="arithmetic-assignment">=</span><span class="string-literal">"upper right"</span><span class="punctuation">,</span> <span class="identifier">ncol</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">toolbar_place</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add Graph Navigation toolbar """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Placing toolbar"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">toolbar</span> <span class="arithmetic-assignment">=</span> <span class="identifier">NavigationToolbar</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">toolbar</span><span class="punctuation">.</span><span class="identifier">pack</span><span class="grouping">(</span><span class="identifier">side</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">BOTTOM</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">toolbar</span><span class="punctuation">.</span><span class="identifier">update</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">clear</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Clear the plots from RAM """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Clearing graph from RAM: %s"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span><span class="punctuation">.</span><span class="identifier">clf</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">del</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span>


<span class="keyword">class</span> <span class="identifier">TrainingGraph</span><span class="grouping">(</span><span class="identifier">GraphBase</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-many-ancestors</span>
    <span class="comment">""" Live graph to be displayed during training. """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>  <span class="comment"># Thread for LongRunningTask</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_displayed_keys</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">add_callback</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">add_callback</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Add the variable trace to update graph on recent button or save iteration """</span>
        <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"refreshgraph"].trace("w"</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">refresh</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">build</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Update the plot area with loss values """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Building training graph"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">.</span><span class="identifier">draw</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built training graph"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">refresh</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=unused-argument</span>
        <span class="comment">""" Read loss data and apply to graph """</span>
        <span class="identifier">refresh_var</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_config</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">tk_vars</span><span class="grouping">[</span><span class="string-literal">"refreshgraph"</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">refresh_var</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="grouping">)</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="keyword">return</span>

        <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Updating plot data"</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span> <span class="arithmetic-assignment">=</span> <span class="identifier">LongRunningTask</span><span class="grouping">(</span><span class="identifier">target</span><span class="arithmetic-assignment">=</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">refresh</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span><span class="punctuation">.</span><span class="identifier">start</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">after</span><span class="grouping">(</span><span class="int-literal">1000</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">refresh</span><span class="grouping">)</span>
        <span class="keyword">elif</span> <span class="logical-operator">not</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span><span class="punctuation">.</span><span class="identifier">complete</span><span class="punctuation">.</span><span class="identifier">is_set</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Graph Data not yet available"</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">after</span><span class="grouping">(</span><span class="int-literal">1000</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">refresh</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Updating plot with data from background thread"</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span><span class="punctuation">.</span><span class="identifier">get_result</span><span class="grouping">(</span><span class="grouping">)</span>  <span class="comment"># Terminate the LongRunningTask object</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">thread</span> <span class="arithmetic-assignment">=</span> <span class="none-literal">None</span>

            <span class="identifier">dsp_keys</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">sorted</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">dsp_keys</span> <span class="relational-operator">!=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_displayed_keys</span><span class="punctuation">:</span>
                <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Reinitializing graph for keys change. Old keys: %s New keys: %s"</span><span class="punctuation">,</span>
                             <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_displayed_keys</span><span class="punctuation">,</span> <span class="identifier">dsp_keys</span><span class="grouping">)</span>
                <span class="identifier">initiate</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>
                <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_displayed_keys</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dsp_keys</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="identifier">initiate</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>

            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update_plot</span><span class="grouping">(</span><span class="identifier">initiate</span><span class="arithmetic-assignment">=</span><span class="identifier">initiate</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">.</span><span class="identifier">draw</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">refresh_var</span><span class="punctuation">.</span><span class="identifier">set</span><span class="grouping">(</span><span class="bool-literal">False</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">save_fig</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">location</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Save the figure to file """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Saving graph: '%s'"</span><span class="punctuation">,</span> <span class="identifier">location</span><span class="grouping">)</span>
        <span class="identifier">keys</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sorted</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">key</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="string-literal">"raw_", ""</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span><span class="punctuation">.</span><span class="identifier">stats</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span>
                       <span class="keyword">if</span> <span class="identifier">key</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"raw_"</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">filename</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">" - "</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">keys</span><span class="grouping">)</span>
        <span class="identifier">now</span> <span class="arithmetic-assignment">=</span> <span class="identifier">datetime</span><span class="punctuation">.</span><span class="identifier">datetime</span><span class="punctuation">.</span><span class="identifier">now</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">strftime</span><span class="grouping">(</span><span class="string-literal">"%Y%m%d_%H%M%S"</span><span class="grouping">)</span>
        <span class="identifier">filename</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">location</span><span class="punctuation">,</span> <span class="string-literal">"{}_{}.{}".format(filename, now, "png"</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span><span class="punctuation">.</span><span class="identifier">set_size_inches</span><span class="grouping">(</span><span class="int-literal">16</span><span class="punctuation">,</span> <span class="int-literal">9</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">fig</span><span class="punctuation">.</span><span class="identifier">savefig</span><span class="grouping">(</span><span class="identifier">filename</span><span class="punctuation">,</span> <span class="identifier">bbox_inches</span><span class="arithmetic-assignment">=</span><span class="string-literal">"tight"</span><span class="punctuation">,</span> <span class="identifier">dpi</span><span class="arithmetic-assignment">=</span><span class="int-literal">120</span><span class="grouping">)</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"Saved graph to {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Saved graph: '%s'"</span><span class="punctuation">,</span> <span class="identifier">filename</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">resize_fig</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">resize_fig</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Resize the figure back to the canvas """</span>
        <span class="keyword">class</span> <span class="identifier">Event</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-few-public-methods</span>
            <span class="comment">""" Event class that needs to be passed to plotcanvas.resize """</span>
            <span class="keyword">pass</span>  <span class="comment"># pylint: disable=unnecessary-pass</span>
        <span class="identifier">Event</span><span class="punctuation">.</span><span class="identifier">width</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">winfo_width</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">Event</span><span class="punctuation">.</span><span class="identifier">height</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">winfo_height</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">.</span><span class="identifier">resize</span><span class="grouping">(</span><span class="identifier">Event</span><span class="grouping">)</span>  <span class="comment"># pylint: disable=no-value-for-parameter</span>


<span class="keyword">class</span> <span class="identifier">SessionGraph</span><span class="grouping">(</span><span class="identifier">GraphBase</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint: disable=too-many-ancestors</span>
    <span class="comment">""" Session Graph for session pop-up """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">parent</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">scale</span> <span class="arithmetic-assignment">=</span> <span class="identifier">scale</span>

    <span class="keyword">def</span> <span class="identifier">build</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Build the session graph """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Building session graph"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">toolbar_place</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">.</span><span class="identifier">draw</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Built session graph"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">refresh</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">data</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Refresh graph data """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Refreshing session graph: (ylabel: '%s', scale: '%s')"</span><span class="punctuation">,</span> <span class="identifier">ylabel</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">calcs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">data</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">ylabel</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ylabel</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">set_yscale_type</span><span class="grouping">(</span><span class="identifier">scale</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Refreshed session graph"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">set_yscale_type</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" switch the y-scale and redraw """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Updating scale type: '%s'"</span><span class="punctuation">,</span> <span class="identifier">scale</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">scale</span> <span class="arithmetic-assignment">=</span> <span class="identifier">scale</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">update_plot</span><span class="grouping">(</span><span class="identifier">initiate</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">axes_set_yscale</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">scale</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">plotcanvas</span><span class="punctuation">.</span><span class="identifier">draw</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Updated scale type"</span><span class="grouping">)</span>

    </pre>
  </body>
</html>