<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="keyword">class</span> <span class="identifier">Matrix</span><span class="punctuation">:</span>
    <span class="comment">"""
    &lt;class Matrix&gt;
    Matrix structure.
    """</span>

    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">row</span><span class="punctuation">:</span> <span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">column</span><span class="punctuation">:</span> <span class="identifier">int</span><span class="punctuation">,</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">v</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">u</span><span class="invalid">e</span><span class="punctuation">:</span> <span class="identifier">float</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__init__&gt;
        Initialize matrix with given size and default value.

        Example:
        &gt;&gt;&gt; a = Matrix(2, 3, 1)
        &gt;&gt;&gt; a
        Matrix consist of 2 rows and 3 columns
        [1, 1, 1]
        [1, 1, 1]
        """</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span> <span class="arithmetic-assignment">=</span> <span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">column</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">array</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">[</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">v</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">u</span><span class="invalid">e</span> <span class="keyword">for</span> <span class="identifier">c</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">column</span><span class="grouping">)</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">r</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">row</span><span class="grouping">)</span><span class="grouping">]</span>

    <span class="keyword">def</span> <span class="identifier">__str__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__str__&gt;
        Return string representation of this matrix.
        """</span>

        <span class="comment"># Prefix</span>
        <span class="identifier">s</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Matrix consist of %d rows and %d columns\n"</span> <span class="arithmetic-operator">%</span> <span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span>

        <span class="comment"># Make string identifier</span>
        <span class="identifier">max_element_length</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
        <span class="keyword">for</span> <span class="identifier">row_vector</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">array</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">obj</span> <span class="relational-operator">in</span> <span class="identifier">row_vector</span><span class="punctuation">:</span>
                <span class="identifier">max_element_length</span> <span class="arithmetic-assignment">=</span> <span class="identifier">max</span><span class="grouping">(</span><span class="identifier">max_element_length</span><span class="punctuation">,</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">obj</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">string_format_identifier</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"%%%ds"</span> <span class="arithmetic-operator">%</span> <span class="grouping">(</span><span class="identifier">max_element_length</span><span class="punctuation">,</span><span class="grouping">)</span>

        <span class="comment"># Make string and return</span>
        <span class="keyword">def</span> <span class="identifier">single_line</span><span class="grouping">(</span><span class="identifier">row_vector</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">nonlocal</span> <span class="identifier">string_format_identifier</span>
            <span class="identifier">line</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"["</span>
            <span class="identifier">line</span> <span class="arithmetic-assignment">+=</span> <span class="string-literal">", "</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">string_format_identifier</span> <span class="arithmetic-operator">%</span> <span class="grouping">(</span><span class="identifier">obj</span><span class="punctuation">,</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">obj</span> <span class="relational-operator">in</span> <span class="identifier">row_vector</span><span class="grouping">)</span>
            <span class="identifier">line</span> <span class="arithmetic-assignment">+=</span> <span class="string-literal">"]"</span>
            <span class="keyword">return</span> <span class="identifier">line</span>

        <span class="identifier">s</span> <span class="arithmetic-assignment">+=</span> <span class="string-literal">"\n"</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">single_line</span><span class="grouping">(</span><span class="identifier">row_vector</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">row_vector</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">s</span>

    <span class="keyword">def</span> <span class="identifier">__repr__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">str</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">validateIndices</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">loc</span><span class="punctuation">:</span> <span class="identifier">tuple</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.validateIndices&gt;
        Check if given indices are valid to pick element from matrix.

        Example:
        &gt;&gt;&gt; a = Matrix(2, 6, 0)
        &gt;&gt;&gt; a.validateIndices((2, 7))
        False
        &gt;&gt;&gt; a.validateIndices((0, 0))
        True
        """</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="grouping">(</span><span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">loc</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">list</span><span class="punctuation">,</span> <span class="identifier">tuple</span><span class="grouping">)</span><span class="grouping">)</span> <span class="logical-operator">and</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">loc</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="bool-literal">False</span>
        <span class="keyword">elif</span> <span class="logical-operator">not</span> <span class="grouping">(</span><span class="int-literal">0</span> <span class="relational-operator">&lt;=</span> <span class="identifier">loc</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="relational-operator">&lt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span> <span class="logical-operator">and</span> <span class="int-literal">0</span> <span class="relational-operator">&lt;=</span> <span class="identifier">loc</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span> <span class="relational-operator">&lt;</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="bool-literal">False</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="bool-literal">True</span>

    <span class="keyword">def</span> <span class="identifier">__getitem__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">loc</span><span class="punctuation">:</span> <span class="identifier">tuple</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__getitem__&gt;
        Return array[row][column] where loc = (row, column).

        Example:
        &gt;&gt;&gt; a = Matrix(3, 2, 7)
        &gt;&gt;&gt; a[1, 0]
        7
        """</span>
        <span class="keyword">assert</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">validateIndices</span><span class="grouping">(</span><span class="identifier">loc</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">[</span><span class="identifier">loc</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">loc</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">]</span>

    <span class="keyword">def</span> <span class="identifier">__setitem__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">loc</span><span class="punctuation">:</span> <span class="identifier">tuple</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="punctuation">:</span> <span class="identifier">float</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__setitem__&gt;
        Set array[row][column] = value where loc = (row, column).

        Example:
        &gt;&gt;&gt; a = Matrix(2, 3, 1)
        &gt;&gt;&gt; a[1, 2] = 51
        &gt;&gt;&gt; a
        Matrix consist of 2 rows and 3 columns
        [ 1,  1,  1]
        [ 1,  1, 51]
        """</span>
        <span class="keyword">assert</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">validateIndices</span><span class="grouping">(</span><span class="identifier">loc</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">array</span><span class="grouping">[</span><span class="identifier">loc</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">loc</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">value</span>

    <span class="keyword">def</span> <span class="identifier">__add__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">another</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__add__&gt;
        Return self + another.

        Example:
        &gt;&gt;&gt; a = Matrix(2, 1, -4)
        &gt;&gt;&gt; b = Matrix(2, 1, 3)
        &gt;&gt;&gt; a+b
        Matrix consist of 2 rows and 1 columns
        [-1]
        [-1]
        """</span>

        <span class="comment"># Validation</span>
        <span class="keyword">assert</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">another</span><span class="punctuation">,</span> <span class="identifier">Matrix</span><span class="grouping">)</span>
        <span class="keyword">assert</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span> <span class="relational-operator">==</span> <span class="identifier">another</span><span class="punctuation">.</span><span class="identifier">row</span> <span class="logical-operator">and</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span> <span class="relational-operator">==</span> <span class="identifier">another</span><span class="punctuation">.</span><span class="identifier">column</span>

        <span class="comment"># Add</span>
        <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">r</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">c</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">result</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="identifier">another</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">result</span>

    <span class="keyword">def</span> <span class="identifier">__neg__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__neg__&gt;
        Return -self.

        Example:
        &gt;&gt;&gt; a = Matrix(2, 2, 3)
        &gt;&gt;&gt; a[0, 1] = a[1, 0] = -2
        &gt;&gt;&gt; -a
        Matrix consist of 2 rows and 2 columns
        [-3,  2]
        [ 2, -3]
        """</span>

        <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">r</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">c</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">result</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="arithmetic-operator">-</span><span class="identifier">self</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">result</span>

    <span class="keyword">def</span> <span class="identifier">__sub__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">another</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">return</span> <span class="identifier">self</span> <span class="arithmetic-operator">+</span> <span class="grouping">(</span><span class="arithmetic-operator">-</span><span class="identifier">another</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">__mul__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">another</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.__mul__&gt;
        Return self * another.

        Example:
        &gt;&gt;&gt; a = Matrix(2, 3, 1)
        &gt;&gt;&gt; a[0,2] = a[1,2] = 3
        &gt;&gt;&gt; a * -2
        Matrix consist of 2 rows and 3 columns
        [-2, -2, -6]
        [-2, -2, -6]
        """</span>

        <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">another</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">int</span><span class="punctuation">,</span> <span class="identifier">float</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># Scalar multiplication</span>
            <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span>
            <span class="keyword">for</span> <span class="identifier">r</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="keyword">for</span> <span class="identifier">c</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="identifier">result</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">another</span>
            <span class="keyword">return</span> <span class="identifier">result</span>
        <span class="keyword">elif</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">another</span><span class="punctuation">,</span> <span class="identifier">Matrix</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># Matrix multiplication</span>
            <span class="keyword">assert</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span> <span class="relational-operator">==</span> <span class="identifier">another</span><span class="punctuation">.</span><span class="identifier">row</span>
            <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="punctuation">,</span> <span class="identifier">another</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span>
            <span class="keyword">for</span> <span class="identifier">r</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="keyword">for</span> <span class="identifier">c</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">another</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
                        <span class="identifier">result</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span> <span class="arithmetic-assignment">+=</span> <span class="identifier">self</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">i</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">another</span><span class="grouping">[</span><span class="identifier">i</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span>
            <span class="keyword">return</span> <span class="identifier">result</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">TypeError</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"Unsupported type given for another ({type(another)})"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">transpose</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.transpose&gt;
        Return self^T.

        Example:
        &gt;&gt;&gt; a = Matrix(2, 3)
        &gt;&gt;&gt; for r in range(2):
        ...     for c in range(3):
        ...             a[r,c] = r*c
        ...
        &gt;&gt;&gt; a.transpose()
        Matrix consist of 3 rows and 2 columns
        [0, 0]
        [0, 1]
        [0, 2]
        """</span>

        <span class="identifier">result</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">r</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">c</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">result</span><span class="grouping">[</span><span class="identifier">c</span><span class="punctuation">,</span> <span class="identifier">r</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="grouping">[</span><span class="identifier">r</span><span class="punctuation">,</span> <span class="identifier">c</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">result</span>

    <span class="keyword">def</span> <span class="identifier">ShermanMorrison</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">u</span><span class="punctuation">,</span> <span class="identifier">v</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">"""
        &lt;method Matrix.ShermanMorrison&gt;
        Apply Sherman-Morrison formula in O(n^2).
        To learn this formula, please look this:
        https://en.wikipedia.org/wiki/Sherman%E2%80%93Morrison_formula
        This method returns (A + uv^T)^(-1) where A^(-1) is self. Returns None if it's
        impossible to calculate.
        Warning: This method doesn't check if self is invertible.
            Make sure self is invertible before execute this method.

        Example:
        &gt;&gt;&gt; ainv = Matrix(3, 3, 0)
        &gt;&gt;&gt; for i in range(3): ainv[i,i] = 1
        ...
        &gt;&gt;&gt; u = Matrix(3, 1, 0)
        &gt;&gt;&gt; u[0,0], u[1,0], u[2,0] = 1, 2, -3
        &gt;&gt;&gt; v = Matrix(3, 1, 0)
        &gt;&gt;&gt; v[0,0], v[1,0], v[2,0] = 4, -2, 5
        &gt;&gt;&gt; ainv.ShermanMorrison(u, v)
        Matrix consist of 3 rows and 3 columns
        [  1.2857142857142856, -0.14285714285714285,   0.3571428571428571]
        [  0.5714285714285714,   0.7142857142857143,   0.7142857142857142]
        [ -0.8571428571428571,  0.42857142857142855,  -0.0714285714285714]
        """</span>

        <span class="comment"># Size validation</span>
        <span class="keyword">assert</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">u</span><span class="punctuation">,</span> <span class="identifier">Matrix</span><span class="grouping">)</span> <span class="logical-operator">and</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">v</span><span class="punctuation">,</span> <span class="identifier">Matrix</span><span class="grouping">)</span>
        <span class="keyword">assert</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">row</span> <span class="relational-operator">==</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">column</span> <span class="relational-operator">==</span> <span class="identifier">u</span><span class="punctuation">.</span><span class="identifier">row</span> <span class="relational-operator">==</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">row</span>  <span class="comment"># u, v should be column vector</span>
        <span class="keyword">assert</span> <span class="identifier">u</span><span class="punctuation">.</span><span class="identifier">column</span> <span class="relational-operator">==</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">column</span> <span class="relational-operator">==</span> <span class="int-literal">1</span>  <span class="comment"># u, v should be column vector</span>

        <span class="comment"># Calculate</span>
        <span class="identifier">vT</span> <span class="arithmetic-assignment">=</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">transpose</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">numerator_factor</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">vT</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span> <span class="arithmetic-operator">*</span> <span class="identifier">u</span><span class="grouping">)</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span>
        <span class="keyword">if</span> <span class="identifier">numerator_factor</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="keyword">return</span> <span class="none-literal">None</span>  <span class="comment"># It's not invertable</span>
        <span class="keyword">return</span> <span class="identifier">self</span> <span class="arithmetic-operator">-</span> <span class="grouping">(</span><span class="grouping">(</span><span class="identifier">self</span> <span class="arithmetic-operator">*</span> <span class="identifier">u</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="grouping">(</span><span class="identifier">vT</span> <span class="arithmetic-operator">*</span> <span class="identifier">self</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="grouping">(</span><span class="float-literal">1.0</span> <span class="arithmetic-operator">/</span> <span class="identifier">numerator_factor</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="comment"># Testing</span>
<span class="keyword">if</span> <span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"__main__"</span><span class="punctuation">:</span>

    <span class="keyword">def</span> <span class="identifier">test1</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment"># a^(-1)</span>
        <span class="identifier">ainv</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="int-literal">3</span><span class="punctuation">,</span> <span class="int-literal">3</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="int-literal">3</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">ainv</span><span class="grouping">[</span><span class="identifier">i</span><span class="punctuation">,</span> <span class="identifier">i</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"a^(-1) is {ainv}"</span><span class="grouping">)</span>
        <span class="comment"># u, v</span>
        <span class="identifier">u</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="int-literal">3</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span>
        <span class="identifier">u</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">u</span><span class="grouping">[</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">u</span><span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">3</span>
        <span class="identifier">v</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Matrix</span><span class="grouping">(</span><span class="int-literal">3</span><span class="punctuation">,</span> <span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span>
        <span class="identifier">v</span><span class="grouping">[</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">v</span><span class="grouping">[</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">v</span><span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">4</span><span class="punctuation">,</span> <span class="arithmetic-operator">-</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">5</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"u is {u}"</span><span class="grouping">)</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"v is {v}"</span><span class="grouping">)</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"uv^T is %s"</span> <span class="arithmetic-operator">%</span> <span class="grouping">(</span><span class="identifier">u</span> <span class="arithmetic-operator">*</span> <span class="identifier">v</span><span class="punctuation">.</span><span class="identifier">transpose</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="comment"># Sherman Morrison</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"(a + uv^T)^(-1) is {ainv.ShermanMorrison(u, v)}"</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">test2</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">import</span> <span class="identifier">doctest</span>

        <span class="identifier">doctest</span><span class="punctuation">.</span><span class="identifier">testmod</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="identifier">test2</span><span class="grouping">(</span><span class="grouping">)</span>

    </pre>
  </body>
</html>