<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">"""
FP-GraphMiner - A Fast Frequent Pattern Mining Algorithm for Network Graphs

A novel Frequent Pattern Graph Mining algorithm, FP-GraphMiner, that compactly
represents a set of network graphs as a Frequent Pattern Graph (or FP-Graph).
This graph can be used to efficiently mine frequent subgraphs including maximal
frequent subgraphs and maximum common subgraphs.

URL: https://www.researchgate.net/publication/235255851
"""</span>
<span class="comment"># fmt: off</span>
<span class="identifier">edge_array</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
    <span class="grouping">[</span><span class="string-literal">'ab-e1', 'ac-e3', 'ad-e5', 'bc-e4', 'bd-e2', 'be-e6', 'bh-e12', 'cd-e2', 'ce-e4'</span><span class="punctuation">,</span>
     <span class="string-literal">'de-e1', 'df-e8', 'dg-e5', 'dh-e10', 'ef-e3', 'eg-e2', 'fg-e6', 'gh-e6', 'hi-e3'</span><span class="grouping">]</span><span class="punctuation">,</span>
    <span class="grouping">[</span><span class="string-literal">'ab-e1', 'ac-e3', 'ad-e5', 'bc-e4', 'bd-e2', 'be-e6', 'cd-e2', 'de-e1', 'df-e8'</span><span class="punctuation">,</span>
     <span class="string-literal">'ef-e3', 'eg-e2', 'fg-e6'</span><span class="grouping">]</span><span class="punctuation">,</span>
    <span class="grouping">[</span><span class="string-literal">'ab-e1', 'ac-e3', 'bc-e4', 'bd-e2', 'de-e1', 'df-e8', 'dg-e5', 'ef-e3', 'eg-e2'</span><span class="punctuation">,</span>
     <span class="string-literal">'eh-e12', 'fg-e6', 'fh-e10', 'gh-e6'</span><span class="grouping">]</span><span class="punctuation">,</span>
    <span class="grouping">[</span><span class="string-literal">'ab-e1', 'ac-e3', 'bc-e4', 'bd-e2', 'bh-e12', 'cd-e2', 'df-e8', 'dh-e10'</span><span class="grouping">]</span><span class="punctuation">,</span>
    <span class="grouping">[</span><span class="string-literal">'ab-e1', 'ac-e3', 'ad-e5', 'bc-e4', 'bd-e2', 'cd-e2', 'ce-e4', 'de-e1', 'df-e8'</span><span class="punctuation">,</span>
     <span class="string-literal">'dg-e5', 'ef-e3', 'eg-e2', 'fg-e6'</span><span class="grouping">]</span>
<span class="grouping">]</span>
<span class="comment"># fmt: on</span>


<span class="keyword">def</span> <span class="identifier">get_distinct_edge</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Return Distinct edges from edge array of multiple graphs
    &gt;&gt;&gt; sorted(get_distinct_edge(edge_array))
    ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h']
    """</span>
    <span class="identifier">distinct_edge</span> <span class="arithmetic-assignment">=</span> <span class="identifier">set</span><span class="grouping">(</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">edge_array</span><span class="punctuation">:</span>
        <span class="keyword">for</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">row</span><span class="punctuation">:</span>
            <span class="identifier">distinct_edge</span><span class="punctuation">.</span><span class="identifier">add</span><span class="grouping">(</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span>
    <span class="keyword">return</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">distinct_edge</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">get_bitcode</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="punctuation">,</span> <span class="identifier">distinct_edge</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Return bitcode of distinct_edge
    """</span>
    <span class="identifier">bitcode</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="string-literal">"0"</span><span class="grouping">]</span> <span class="arithmetic-operator">*</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">i</span><span class="punctuation">,</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">for</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">row</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">distinct_edge</span> <span class="relational-operator">in</span> <span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">:</span>
                <span class="identifier">bitcode</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"1"</span>
                <span class="keyword">break</span>
    <span class="keyword">return</span> <span class="string-literal">""</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">bitcode</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">get_frequency_table</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Returns Frequency Table
    """</span>
    <span class="identifier">distinct_edge</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_distinct_edge</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span>
    <span class="identifier">frequency_table</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="keyword">for</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">distinct_edge</span><span class="punctuation">:</span>
        <span class="identifier">bit</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_bitcode</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="punctuation">,</span> <span class="identifier">item</span><span class="grouping">)</span>
        <span class="comment"># print('bit',bit)</span>
        <span class="comment"># bt=''.join(bit)</span>
        <span class="identifier">s</span> <span class="arithmetic-assignment">=</span> <span class="identifier">bit</span><span class="punctuation">.</span><span class="identifier">count</span><span class="grouping">(</span><span class="string-literal">"1"</span><span class="grouping">)</span>
        <span class="identifier">frequency_table</span><span class="grouping">[</span><span class="identifier">item</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">s</span><span class="punctuation">,</span> <span class="identifier">bit</span><span class="grouping">]</span>
    <span class="comment"># Store [Distinct edge, WT(Bitcode), Bitcode] in descending order</span>
    <span class="identifier">sorted_frequency_table</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span>
        <span class="grouping">[</span><span class="identifier">k</span><span class="punctuation">,</span> <span class="identifier">v</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">v</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">]</span>
        <span class="keyword">for</span> <span class="identifier">k</span><span class="punctuation">,</span> <span class="identifier">v</span> <span class="relational-operator">in</span> <span class="identifier">sorted</span><span class="grouping">(</span><span class="identifier">frequency_table</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="arithmetic-assignment">=</span><span class="keyword">lambda</span> <span class="identifier">v</span><span class="punctuation">:</span> <span class="identifier">v</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">reverse</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
    <span class="grouping">]</span>
    <span class="keyword">return</span> <span class="identifier">sorted_frequency_table</span>


<span class="keyword">def</span> <span class="identifier">get_nodes</span><span class="grouping">(</span><span class="identifier">frequency_table</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Returns nodes
    format nodes={bitcode:edges that represent the bitcode}
    &gt;&gt;&gt; get_nodes([['ab', 5, '11111'], ['ac', 5, '11111'], ['df', 5, '11111'],
    ...            ['bd', 5, '11111'], ['bc', 5, '11111']])
    {'11111': ['ab', 'ac', 'df', 'bd', 'bc']}
    """</span>
    <span class="identifier">nodes</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="grouping">}</span>
    <span class="keyword">for</span> <span class="identifier">i</span><span class="punctuation">,</span> <span class="identifier">item</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="identifier">frequency_table</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">nodes</span><span class="punctuation">.</span><span class="identifier">setdefault</span><span class="grouping">(</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">2</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">item</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span>
    <span class="keyword">return</span> <span class="identifier">nodes</span>


<span class="keyword">def</span> <span class="identifier">get_cluster</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Returns cluster
    format cluster:{WT(bitcode):nodes with same WT}
    """</span>
    <span class="identifier">cluster</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="grouping">}</span>
    <span class="keyword">for</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">nodes</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">cluster</span><span class="punctuation">.</span><span class="identifier">setdefault</span><span class="grouping">(</span><span class="identifier">key</span><span class="punctuation">.</span><span class="identifier">count</span><span class="grouping">(</span><span class="string-literal">"1"</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="grouping">{</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">[</span><span class="identifier">key</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">value</span>
    <span class="keyword">return</span> <span class="identifier">cluster</span>


<span class="keyword">def</span> <span class="identifier">get_support</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Returns support
    &gt;&gt;&gt; get_support({5: {'11111': ['ab', 'ac', 'df', 'bd', 'bc']},
    ...              4: {'11101': ['ef', 'eg', 'de', 'fg'], '11011': ['cd']},
    ...              3: {'11001': ['ad'], '10101': ['dg']},
    ...              2: {'10010': ['dh', 'bh'], '11000': ['be'], '10100': ['gh'],
    ...                  '10001': ['ce']},
    ...              1: {'00100': ['fh', 'eh'], '10000': ['hi']}})
    [100.0, 80.0, 60.0, 40.0, 20.0]
    """</span>
    <span class="keyword">return</span> <span class="grouping">[</span><span class="identifier">i</span> <span class="arithmetic-operator">*</span> <span class="int-literal">100</span> <span class="arithmetic-operator">/</span> <span class="identifier">len</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">cluster</span><span class="grouping">]</span>


<span class="keyword">def</span> <span class="identifier">print_all</span><span class="grouping">(</span><span class="grouping">)</span> <span class="misc">-&gt;</span> <span class="none-literal">None</span><span class="punctuation">:</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"\nNodes\n"</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">nodes</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="grouping">)</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"\nSupport\n"</span><span class="grouping">)</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">support</span><span class="grouping">)</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"\n Cluster \n"</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">sorted</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">reverse</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="grouping">)</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"\n Graph\n"</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span> <span class="relational-operator">in</span> <span class="identifier">graph</span><span class="punctuation">.</span><span class="identifier">items</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">value</span><span class="grouping">)</span>
    <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"\n Edge List of Frequent subgraphs \n"</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">edge_list</span> <span class="relational-operator">in</span> <span class="identifier">freq_subgraph_edge_list</span><span class="punctuation">:</span>
        <span class="identifier">print</span><span class="grouping">(</span><span class="identifier">edge_list</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">create_edge</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="punctuation">,</span> <span class="identifier">graph</span><span class="punctuation">,</span> <span class="identifier">cluster</span><span class="punctuation">,</span> <span class="identifier">c1</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    create edge between the nodes
    """</span>
    <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">cluster</span><span class="grouping">[</span><span class="identifier">c1</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">count</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">0</span>
        <span class="identifier">c2</span> <span class="arithmetic-assignment">=</span> <span class="identifier">c1</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span>
        <span class="keyword">while</span> <span class="identifier">c2</span> <span class="relational-operator">&lt;</span> <span class="identifier">max</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">j</span> <span class="relational-operator">in</span> <span class="identifier">cluster</span><span class="grouping">[</span><span class="identifier">c2</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="comment">"""
                creates edge only if the condition satisfies
                """</span>
                <span class="keyword">if</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">i</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span> <span class="bitwise-operator">&</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">j</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">i</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="keyword">if</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span> <span class="relational-operator">in</span> <span class="identifier">graph</span><span class="punctuation">:</span>
                        <span class="identifier">graph</span><span class="grouping">[</span><span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span><span class="grouping">)</span>
                    <span class="keyword">else</span><span class="punctuation">:</span>
                        <span class="identifier">graph</span><span class="grouping">[</span><span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">nodes</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span><span class="grouping">]</span>
                    <span class="identifier">count</span> <span class="arithmetic-assignment">+=</span> <span class="int-literal">1</span>
            <span class="keyword">if</span> <span class="identifier">count</span> <span class="relational-operator">==</span> <span class="int-literal">0</span><span class="punctuation">:</span>
                <span class="identifier">c2</span> <span class="arithmetic-assignment">=</span> <span class="identifier">c2</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span>
            <span class="keyword">else</span><span class="punctuation">:</span>
                <span class="keyword">break</span>


<span class="keyword">def</span> <span class="identifier">construct_graph</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="punctuation">,</span> <span class="identifier">nodes</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">X</span> <span class="arithmetic-assignment">=</span> <span class="identifier">cluster</span><span class="grouping">[</span><span class="identifier">max</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">]</span>
    <span class="identifier">cluster</span><span class="grouping">[</span><span class="identifier">max</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Header"</span>
    <span class="identifier">graph</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="grouping">}</span>
    <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">X</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="grouping">[</span><span class="string-literal">"Header"</span><span class="grouping">]</span><span class="grouping">)</span> <span class="relational-operator">in</span> <span class="identifier">graph</span><span class="punctuation">:</span>
            <span class="identifier">graph</span><span class="grouping">[</span><span class="identifier">tuple</span><span class="grouping">(</span><span class="grouping">[</span><span class="string-literal">"Header"</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">X</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="identifier">graph</span><span class="grouping">[</span><span class="identifier">tuple</span><span class="grouping">(</span><span class="grouping">[</span><span class="string-literal">"Header"</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">X</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">]</span>
    <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">X</span><span class="punctuation">:</span>
        <span class="identifier">graph</span><span class="grouping">[</span><span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">X</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">[</span><span class="string-literal">"Header"</span><span class="grouping">]</span><span class="grouping">]</span>
    <span class="identifier">i</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span>
    <span class="keyword">while</span> <span class="identifier">i</span> <span class="relational-operator">&lt;</span> <span class="identifier">max</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="grouping">)</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="punctuation">:</span>
        <span class="identifier">create_edge</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="punctuation">,</span> <span class="identifier">graph</span><span class="punctuation">,</span> <span class="identifier">cluster</span><span class="punctuation">,</span> <span class="identifier">i</span><span class="grouping">)</span>
        <span class="identifier">i</span> <span class="arithmetic-assignment">=</span> <span class="identifier">i</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span>
    <span class="keyword">return</span> <span class="identifier">graph</span>


<span class="keyword">def</span> <span class="identifier">myDFS</span><span class="grouping">(</span><span class="identifier">graph</span><span class="punctuation">,</span> <span class="identifier">start</span><span class="punctuation">,</span> <span class="identifier">end</span><span class="punctuation">,</span> <span class="identifier">path</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    find different DFS walk from given node to Header node
    """</span>
    <span class="identifier">path</span> <span class="arithmetic-assignment">=</span> <span class="identifier">path</span> <span class="arithmetic-operator">+</span> <span class="grouping">[</span><span class="identifier">start</span><span class="grouping">]</span>
    <span class="keyword">if</span> <span class="identifier">start</span> <span class="relational-operator">==</span> <span class="identifier">end</span><span class="punctuation">:</span>
        <span class="identifier">paths</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">path</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">node</span> <span class="relational-operator">in</span> <span class="identifier">graph</span><span class="grouping">[</span><span class="identifier">start</span><span class="grouping">]</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">node</span><span class="grouping">)</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="identifier">path</span><span class="punctuation">:</span>
            <span class="identifier">myDFS</span><span class="grouping">(</span><span class="identifier">graph</span><span class="punctuation">,</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">node</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">end</span><span class="punctuation">,</span> <span class="identifier">path</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">find_freq_subgraph_given_support</span><span class="grouping">(</span><span class="identifier">s</span><span class="punctuation">,</span> <span class="identifier">cluster</span><span class="punctuation">,</span> <span class="identifier">graph</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    find edges of multiple frequent subgraphs
    """</span>
    <span class="identifier">k</span> <span class="arithmetic-assignment">=</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">s</span> <span class="arithmetic-operator">/</span> <span class="int-literal">100</span> <span class="arithmetic-operator">*</span> <span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="grouping">)</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="grouping">)</span><span class="grouping">)</span>
    <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">cluster</span><span class="grouping">[</span><span class="identifier">k</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">myDFS</span><span class="grouping">(</span><span class="identifier">graph</span><span class="punctuation">,</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="grouping">[</span><span class="identifier">k</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="grouping">[</span><span class="string-literal">"Header"</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">freq_subgraphs_edge_list</span><span class="grouping">(</span><span class="identifier">paths</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    returns Edge list for frequent subgraphs
    """</span>
    <span class="identifier">freq_sub_EL</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
    <span class="keyword">for</span> <span class="identifier">edges</span> <span class="relational-operator">in</span> <span class="identifier">paths</span><span class="punctuation">:</span>
        <span class="identifier">EL</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="keyword">for</span> <span class="identifier">j</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">edges</span><span class="grouping">)</span> <span class="arithmetic-operator">-</span> <span class="int-literal">1</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">temp</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="identifier">edges</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="keyword">for</span> <span class="identifier">e</span> <span class="relational-operator">in</span> <span class="identifier">temp</span><span class="punctuation">:</span>
                <span class="identifier">edge</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">e</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">e</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">)</span>
                <span class="identifier">EL</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">edge</span><span class="grouping">)</span>
        <span class="identifier">freq_sub_EL</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">EL</span><span class="grouping">)</span>
    <span class="keyword">return</span> <span class="identifier">freq_sub_EL</span>


<span class="keyword">def</span> <span class="identifier">preprocess</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Preprocess the edge array
    &gt;&gt;&gt; preprocess([['ab-e1', 'ac-e3', 'ad-e5', 'bc-e4', 'bd-e2', 'be-e6', 'bh-e12',
    ...              'cd-e2', 'ce-e4', 'de-e1', 'df-e8', 'dg-e5', 'dh-e10', 'ef-e3',
    ...              'eg-e2', 'fg-e6', 'gh-e6', 'hi-e3']])

    """</span>
    <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="keyword">for</span> <span class="identifier">j</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">t</span> <span class="arithmetic-assignment">=</span> <span class="identifier">edge_array</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span><span class="punctuation">.</span><span class="identifier">split</span><span class="grouping">(</span><span class="string-literal">"-"</span><span class="grouping">)</span>
            <span class="identifier">edge_array</span><span class="grouping">[</span><span class="identifier">i</span><span class="grouping">]</span><span class="grouping">[</span><span class="identifier">j</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">t</span>


<span class="keyword">if</span> <span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"__main__"</span><span class="punctuation">:</span>
    <span class="identifier">preprocess</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span>
    <span class="identifier">frequency_table</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_frequency_table</span><span class="grouping">(</span><span class="identifier">edge_array</span><span class="grouping">)</span>
    <span class="identifier">nodes</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_nodes</span><span class="grouping">(</span><span class="identifier">frequency_table</span><span class="grouping">)</span>
    <span class="identifier">cluster</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_cluster</span><span class="grouping">(</span><span class="identifier">nodes</span><span class="grouping">)</span>
    <span class="identifier">support</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_support</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="grouping">)</span>
    <span class="identifier">graph</span> <span class="arithmetic-assignment">=</span> <span class="identifier">construct_graph</span><span class="grouping">(</span><span class="identifier">cluster</span><span class="punctuation">,</span> <span class="identifier">nodes</span><span class="grouping">)</span>
    <span class="identifier">find_freq_subgraph_given_support</span><span class="grouping">(</span><span class="int-literal">60</span><span class="punctuation">,</span> <span class="identifier">cluster</span><span class="punctuation">,</span> <span class="identifier">graph</span><span class="grouping">)</span>
    <span class="identifier">paths</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
    <span class="identifier">freq_subgraph_edge_list</span> <span class="arithmetic-assignment">=</span> <span class="identifier">freq_subgraphs_edge_list</span><span class="grouping">(</span><span class="identifier">paths</span><span class="grouping">)</span>
    <span class="identifier">print_all</span><span class="grouping">(</span><span class="grouping">)</span>

    </pre>
  </body>
</html>