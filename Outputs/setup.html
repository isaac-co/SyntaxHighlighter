<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#! /usr/bin/env python</span>
<span class="comment">#</span>
<span class="comment"># Copyright (C) 2007-2009 Cournapeau David &lt;cournape@gmail.com&gt;</span>
<span class="comment">#               2010 Fabian Pedregosa &lt;fabian.pedregosa@inria.fr&gt;</span>
<span class="comment"># License: 3-clause BSD</span>

<span class="keyword">import</span> <span class="identifier">sys</span>
<span class="keyword">import</span> <span class="identifier">os</span>
<span class="keyword">import</span> <span class="identifier">platform</span>
<span class="keyword">import</span> <span class="identifier">shutil</span>

<span class="comment"># We need to import setuptools before because it monkey-patches distutils</span>
<span class="keyword">import</span> <span class="identifier">setuptools</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="identifier">distutils</span><span class="punctuation">.</span><span class="identifier">command</span><span class="punctuation">.</span><span class="identifier">clean</span> <span class="keyword">import</span> <span class="identifier">clean</span> <span class="keyword">as</span> <span class="identifier">Clean</span>
<span class="keyword">from</span> <span class="identifier">distutils</span><span class="punctuation">.</span><span class="identifier">command</span><span class="punctuation">.</span><span class="identifier">sdist</span> <span class="keyword">import</span> <span class="identifier">sdist</span>

<span class="keyword">import</span> <span class="identifier">traceback</span>
<span class="keyword">import</span> <span class="invalid">i</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">l</span><span class="invalid">i</span><span class="invalid">b</span>
<span class="keyword">try</span><span class="punctuation">:</span>
    <span class="keyword">import</span> <span class="identifier">builtins</span>
<span class="keyword">except</span> <span class="invalid">I</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">E</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">r</span><span class="punctuation">:</span>
    <span class="comment"># Python 2 compat: just to be able to declare that Python &gt;=3.7 is needed.</span>
    <span class="keyword">import</span> <span class="identifier">__builtin__</span> <span class="keyword">as</span> <span class="identifier">builtins</span>

<span class="comment"># This is a bit (!) hackish: we are setting a global variable so that the</span>
<span class="comment"># main sklearn __init__ can detect if it is being loaded by the setup</span>
<span class="comment"># routine, to avoid attempting to load components that aren't built yet:</span>
<span class="comment"># the numpy distutils extensions that are used by scikit-learn to</span>
<span class="comment"># recursively build the compiled extensions in sub-packages is based on the</span>
<span class="comment"># Python import machinery.</span>
<span class="identifier">builtins</span><span class="punctuation">.</span><span class="identifier">__SKLEARN_SETUP__</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">True</span>


<span class="identifier">DISTNAME</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'scikit-learn'</span>
<span class="identifier">DESCRIPTION</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'A set of python modules for machine learning and data mining'</span>
<span class="keyword">with</span> <span class="identifier">open</span><span class="grouping">(</span><span class="string-literal">'README.rst'</span><span class="grouping">)</span> <span class="keyword">as</span> <span class="identifier">f</span><span class="punctuation">:</span>
    <span class="identifier">LONG_DESCRIPTION</span> <span class="arithmetic-assignment">=</span> <span class="identifier">f</span><span class="punctuation">.</span><span class="identifier">read</span><span class="grouping">(</span><span class="grouping">)</span>
<span class="identifier">MAINTAINER</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'Andreas Mueller'</span>
<span class="identifier">MAINTAINER_EMAIL</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'amueller@ais.uni-bonn.de'</span>
<span class="identifier">URL</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'http://scikit-learn.org'</span>
<span class="identifier">DOWNLOAD_URL</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'https://pypi.org/project/scikit-learn/#files'</span>
<span class="identifier">LICENSE</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">'new BSD'</span>
<span class="identifier">PROJECT_URLS</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">'Bug Tracker': 'https://github.com/scikit-learn/scikit-learn/issues'</span><span class="punctuation">,</span>
    <span class="string-literal">'Documentation': 'https://scikit-learn.org/stable/documentation.html'</span><span class="punctuation">,</span>
    <span class="string-literal">'Source Code': 'https://github.com/scikit-learn/scikit-learn'</span>
<span class="grouping">}</span>

<span class="comment"># We can actually import a restricted version of sklearn that</span>
<span class="comment"># does not need the compiled code</span>
<span class="keyword">import</span> <span class="identifier">sklearn</span>
<span class="keyword">import</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">_min_dependencies</span> <span class="keyword">as</span> <span class="identifier">min_deps</span>  <span class="comment"># noqa</span>
<span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">externals</span><span class="punctuation">.</span><span class="identifier">_packaging</span><span class="punctuation">.</span><span class="identifier">version</span> <span class="keyword">import</span> <span class="identifier">parse</span> <span class="keyword">as</span> <span class="identifier">parse_version</span>  <span class="comment"># noqa</span>


<span class="identifier">VERSION</span> <span class="arithmetic-assignment">=</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">__version__</span>


<span class="comment"># For some commands, use setuptools</span>
<span class="identifier">SETUPTOOLS_COMMANDS</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span>
    <span class="string-literal">'develop', 'release', 'bdist_egg', 'bdist_rpm'</span><span class="punctuation">,</span>
    <span class="string-literal">'bdist_wininst', 'install_egg_info', 'build_sphinx'</span><span class="punctuation">,</span>
    <span class="string-literal">'egg_info', 'easy_install', 'upload', 'bdist_wheel'</span><span class="punctuation">,</span>
    <span class="string-literal">'--single-version-externally-managed'</span><span class="punctuation">,</span>
<span class="grouping">}</span>
<span class="keyword">if</span> <span class="identifier">SETUPTOOLS_COMMANDS</span><span class="punctuation">.</span><span class="identifier">intersection</span><span class="grouping">(</span><span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">argv</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">extra_setuptools_args</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span>
        <span class="identifier">zip_safe</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>  <span class="comment"># the package can run out of an .egg file</span>
        <span class="identifier">include_package_data</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
        <span class="identifier">extras_require</span><span class="arithmetic-assignment">=</span><span class="grouping">{</span>
            <span class="identifier">key</span><span class="punctuation">:</span> <span class="identifier">min_deps</span><span class="punctuation">.</span><span class="identifier">tag_to_packages</span><span class="grouping">[</span><span class="identifier">key</span><span class="grouping">]</span> <span class="keyword">for</span>
            <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="grouping">[</span><span class="string-literal">'examples', 'docs', 'tests', 'benchmark'</span><span class="grouping">]</span>
        <span class="grouping">}</span><span class="punctuation">,</span>
    <span class="grouping">)</span>
<span class="keyword">else</span><span class="punctuation">:</span>
    <span class="identifier">extra_setuptools_args</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>


<span class="comment"># Custom clean command to remove build artifacts</span>

<span class="keyword">class</span> <span class="identifier">CleanCommand</span><span class="grouping">(</span><span class="identifier">Clean</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">description</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"Remove build artifacts from the source tree"</span>

    <span class="keyword">def</span> <span class="identifier">run</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">Clean</span><span class="punctuation">.</span><span class="identifier">run</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>
        <span class="comment"># Remove c files if we are not within a sdist package</span>
        <span class="identifier">cwd</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">abspath</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">dirname</span><span class="grouping">(</span><span class="identifier">__file__</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">remove_c_files</span> <span class="arithmetic-assignment">=</span> <span class="logical-operator">not</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">exists</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">cwd</span><span class="punctuation">,</span> <span class="string-literal">'PKG-INFO'</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">remove_c_files</span><span class="punctuation">:</span>
            <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">'Will remove generated .c files'</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">exists</span><span class="grouping">(</span><span class="string-literal">'build'</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">shutil</span><span class="punctuation">.</span><span class="identifier">rmtree</span><span class="grouping">(</span><span class="string-literal">'build'</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">dirpath</span><span class="punctuation">,</span> <span class="identifier">dirnames</span><span class="punctuation">,</span> <span class="identifier">filenames</span> <span class="relational-operator">in</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">walk</span><span class="grouping">(</span><span class="string-literal">'sklearn'</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">filename</span> <span class="relational-operator">in</span> <span class="identifier">filenames</span><span class="punctuation">:</span>
                <span class="keyword">if</span> <span class="identifier">any</span><span class="grouping">(</span><span class="identifier">filename</span><span class="punctuation">.</span><span class="identifier">endswith</span><span class="grouping">(</span><span class="identifier">suffix</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">suffix</span> <span class="relational-operator">in</span>
                       <span class="grouping">(</span><span class="string-literal">".so", ".pyd", ".dll", ".pyc"</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">unlink</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">dirpath</span><span class="punctuation">,</span> <span class="identifier">filename</span><span class="grouping">)</span><span class="grouping">)</span>
                    <span class="keyword">continue</span>
                <span class="identifier">extension</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">splitext</span><span class="grouping">(</span><span class="identifier">filename</span><span class="grouping">)</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span>
                <span class="keyword">if</span> <span class="identifier">remove_c_files</span> <span class="logical-operator">and</span> <span class="identifier">extension</span> <span class="relational-operator">in</span> <span class="grouping">[</span><span class="string-literal">'.c', '.cpp'</span><span class="grouping">]</span><span class="punctuation">:</span>
                    <span class="identifier">pyx_file</span> <span class="arithmetic-assignment">=</span> <span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="identifier">filename</span><span class="punctuation">,</span> <span class="identifier">extension</span><span class="punctuation">,</span> <span class="string-literal">'.pyx'</span><span class="grouping">)</span>
                    <span class="keyword">if</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">exists</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">dirpath</span><span class="punctuation">,</span> <span class="identifier">pyx_file</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                        <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">unlink</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">dirpath</span><span class="punctuation">,</span> <span class="identifier">filename</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="keyword">for</span> <span class="identifier">dirname</span> <span class="relational-operator">in</span> <span class="identifier">dirnames</span><span class="punctuation">:</span>
                <span class="keyword">if</span> <span class="identifier">dirname</span> <span class="relational-operator">==</span> <span class="string-literal">'__pycache__'</span><span class="punctuation">:</span>
                    <span class="identifier">shutil</span><span class="punctuation">.</span><span class="identifier">rmtree</span><span class="grouping">(</span><span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">dirpath</span><span class="punctuation">,</span> <span class="identifier">dirname</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="identifier">cmdclass</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="string-literal">'clean': CleanCommand, 'sdist'</span><span class="punctuation">:</span> <span class="identifier">sdist</span><span class="grouping">}</span>

<span class="comment"># Custom build_ext command to set OpenMP compile flags depending on os and</span>
<span class="comment"># compiler. Also makes it possible to set the parallelism level via</span>
<span class="comment"># and environment variable (useful for the wheel building CI).</span>
<span class="comment"># build_ext has to be imported after setuptools</span>
<span class="keyword">try</span><span class="punctuation">:</span>
    <span class="keyword">from</span> <span class="identifier">numpy</span><span class="punctuation">.</span><span class="identifier">distutils</span><span class="punctuation">.</span><span class="identifier">command</span><span class="punctuation">.</span><span class="identifier">build_ext</span> <span class="keyword">import</span> <span class="identifier">build_ext</span>  <span class="comment"># noqa</span>

    <span class="keyword">class</span> <span class="identifier">build_ext_subclass</span><span class="grouping">(</span><span class="identifier">build_ext</span><span class="grouping">)</span><span class="punctuation">:</span>

        <span class="keyword">def</span> <span class="identifier">finalize_options</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">finalize_options</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parallel</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                <span class="comment"># Do not override self.parallel if already defined by</span>
                <span class="comment"># command-line flag (--parallel or -j)</span>

                <span class="identifier">parallel</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">environ</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"SKLEARN_BUILD_PARALLEL"</span><span class="grouping">)</span>
                <span class="keyword">if</span> <span class="identifier">parallel</span><span class="punctuation">:</span>
                    <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parallel</span> <span class="arithmetic-assignment">=</span> <span class="identifier">int</span><span class="grouping">(</span><span class="identifier">parallel</span><span class="grouping">)</span>
            <span class="keyword">if</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parallel</span><span class="punctuation">:</span>
                <span class="identifier">print</span><span class="grouping">(</span><span class="string-literal">"setting parallel=%d "</span> <span class="arithmetic-operator">%</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parallel</span><span class="grouping">)</span>

        <span class="keyword">def</span> <span class="identifier">build_extensions</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">_build_utils</span><span class="punctuation">.</span><span class="identifier">openmp_helpers</span> <span class="keyword">import</span> <span class="identifier">get_openmp_flag</span>

            <span class="keyword">if</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">_OPENMP_SUPPORTED</span><span class="punctuation">:</span>
                <span class="identifier">openmp_flag</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_openmp_flag</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">compiler</span><span class="grouping">)</span>

                <span class="keyword">for</span> <span class="identifier">e</span> <span class="relational-operator">in</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">extensions</span><span class="punctuation">:</span>
                    <span class="identifier">e</span><span class="punctuation">.</span><span class="identifier">extra_compile_args</span> <span class="arithmetic-assignment">+=</span> <span class="identifier">openmp_flag</span>
                    <span class="identifier">e</span><span class="punctuation">.</span><span class="identifier">extra_link_args</span> <span class="arithmetic-assignment">+=</span> <span class="identifier">openmp_flag</span>

            <span class="identifier">build_ext</span><span class="punctuation">.</span><span class="identifier">build_extensions</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span>

    <span class="identifier">cmdclass</span><span class="grouping">[</span><span class="string-literal">'build_ext'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">build_ext_subclass</span>

<span class="keyword">except</span> <span class="invalid">I</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">E</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">r</span><span class="punctuation">:</span>
    <span class="comment"># Numpy should not be a dependency just to be able to introspect</span>
    <span class="comment"># that python 3.7 is required.</span>
    <span class="keyword">pass</span>


<span class="comment"># Optional wheelhouse-uploader features</span>
<span class="comment"># To automate release of binary packages for scikit-learn we need a tool</span>
<span class="comment"># to download the packages generated by travis and appveyor workers (with</span>
<span class="comment"># version number matching the current release) and upload them all at once</span>
<span class="comment"># to PyPI at release time.</span>
<span class="comment"># The URL of the artifact repositories are configured in the setup.cfg file.</span>

<span class="identifier">WHEELHOUSE_UPLOADER_COMMANDS</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="string-literal">'fetch_artifacts', 'upload_all'</span><span class="grouping">}</span>
<span class="keyword">if</span> <span class="identifier">WHEELHOUSE_UPLOADER_COMMANDS</span><span class="punctuation">.</span><span class="identifier">intersection</span><span class="grouping">(</span><span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">argv</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="keyword">import</span> <span class="identifier">wheelhouse_uploader</span><span class="punctuation">.</span><span class="identifier">cmd</span>

    <span class="identifier">cmdclass</span><span class="punctuation">.</span><span class="identifier">update</span><span class="grouping">(</span><span class="identifier">vars</span><span class="grouping">(</span><span class="identifier">wheelhouse_uploader</span><span class="punctuation">.</span><span class="identifier">cmd</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">configuration</span><span class="grouping">(</span><span class="identifier">parent_package</span><span class="arithmetic-assignment">=</span><span class="string-literal">''</span><span class="punctuation">,</span> <span class="identifier">top_path</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="keyword">if</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">exists</span><span class="grouping">(</span><span class="string-literal">'MANIFEST'</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">remove</span><span class="grouping">(</span><span class="string-literal">'MANIFEST'</span><span class="grouping">)</span>

    <span class="keyword">from</span> <span class="identifier">numpy</span><span class="punctuation">.</span><span class="identifier">distutils</span><span class="punctuation">.</span><span class="identifier">misc_util</span> <span class="keyword">import</span> <span class="identifier">Configuration</span>
    <span class="keyword">from</span> <span class="identifier">sklearn</span><span class="punctuation">.</span><span class="identifier">_build_utils</span> <span class="keyword">import</span> <span class="identifier">_check_cython_version</span>

    <span class="identifier">config</span> <span class="arithmetic-assignment">=</span> <span class="identifier">Configuration</span><span class="grouping">(</span><span class="none-literal">None</span><span class="punctuation">,</span> <span class="identifier">parent_package</span><span class="punctuation">,</span> <span class="identifier">top_path</span><span class="grouping">)</span>

    <span class="comment"># Avoid non-useful msg:</span>
    <span class="comment"># "Ignoring attempt to set 'name' (from ... "</span>
    <span class="identifier">config</span><span class="punctuation">.</span><span class="identifier">set_options</span><span class="grouping">(</span><span class="identifier">ignore_setup_xxx_py</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
                       <span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">u</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">_</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">c</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">g</span><span class="invalid">u</span><span class="invalid">r</span><span class="invalid">a</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
                       <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">l</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">a</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">_</span><span class="invalid">o</span><span class="invalid">p</span><span class="invalid">t</span><span class="invalid">i</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">s</span><span class="invalid">_</span><span class="invalid">t</span><span class="invalid">o</span><span class="invalid">_</span><span class="invalid">s</span><span class="invalid">u</span><span class="invalid">b</span><span class="invalid">p</span><span class="invalid">a</span><span class="invalid">c</span><span class="invalid">k</span><span class="invalid">a</span><span class="invalid">g</span><span class="invalid">e</span><span class="invalid">s</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
                       <span class="identifier">quiet</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>

    <span class="comment"># Cython is required by config.add_subpackage for templated extensions</span>
    <span class="comment"># that need the tempita sub-submodule. So check that we have the correct</span>
    <span class="comment"># version of Cython so as to be able to raise a more informative error</span>
    <span class="comment"># message from the start if it's not the case.</span>
    <span class="identifier">_check_cython_version</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="identifier">config</span><span class="punctuation">.</span><span class="identifier">add_subpackage</span><span class="grouping">(</span><span class="string-literal">'sklearn'</span><span class="grouping">)</span>

    <span class="keyword">return</span> <span class="identifier">config</span>


<span class="keyword">def</span> <span class="identifier">check_package_status</span><span class="grouping">(</span><span class="identifier">package</span><span class="punctuation">,</span> <span class="identifier">min_version</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">"""
    Returns a dictionary containing a boolean specifying whether given package
    is up-to-date, along with the version string (empty string if
    not installed).
    """</span>
    <span class="identifier">package_status</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="grouping">}</span>
    <span class="keyword">try</span><span class="punctuation">:</span>
        <span class="identifier">module</span> <span class="arithmetic-assignment">=</span> <span class="invalid">i</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">l</span><span class="invalid">i</span><span class="invalid">b</span><span class="punctuation">.</span><span class="invalid">i</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">m</span><span class="invalid">o</span><span class="invalid">d</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">e</span><span class="grouping">(</span><span class="identifier">package</span><span class="grouping">)</span>
        <span class="identifier">package_version</span> <span class="arithmetic-assignment">=</span> <span class="identifier">module</span><span class="punctuation">.</span><span class="identifier">__version__</span>
        <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'up_to_date'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">parse_version</span><span class="grouping">(</span>
            <span class="identifier">package_version</span><span class="grouping">)</span> <span class="relational-operator">&gt;=</span> <span class="identifier">parse_version</span><span class="grouping">(</span><span class="identifier">min_version</span><span class="grouping">)</span>
        <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'version'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">package_version</span>
    <span class="keyword">except</span> <span class="invalid">I</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">E</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">r</span><span class="punctuation">:</span>
        <span class="identifier">traceback</span><span class="punctuation">.</span><span class="identifier">print_exc</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'up_to_date'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="bool-literal">False</span>
        <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'version'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">""</span>

    <span class="identifier">req_str</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"scikit-learn requires {} &gt;= {}.\n"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span>
        <span class="identifier">package</span><span class="punctuation">,</span> <span class="identifier">min_version</span><span class="grouping">)</span>

    <span class="identifier">instructions</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="string-literal">"Installation instructions are available on the "</span>
                    <span class="string-literal">"scikit-learn website: "</span>
                    <span class="string-literal">"http://scikit-learn.org/stable/install.html\n"</span><span class="grouping">)</span>

    <span class="keyword">if</span> <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'up_to_date'</span><span class="grouping">]</span> <span class="relational-operator">is</span> <span class="bool-literal">False</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'version'</span><span class="grouping">]</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="invalid">I</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">E</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">r</span><span class="grouping">(</span><span class="string-literal">"Your installation of {} "</span>
                              <span class="string-literal">"{} is out-of-date.\n{}{}"</span>
                              <span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">package</span><span class="punctuation">,</span> <span class="identifier">package_status</span><span class="grouping">[</span><span class="string-literal">'version'</span><span class="grouping">]</span><span class="punctuation">,</span>
                                      <span class="identifier">req_str</span><span class="punctuation">,</span> <span class="identifier">instructions</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="invalid">I</span><span class="invalid">m</span><span class="invalid">p</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">t</span><span class="invalid">E</span><span class="invalid">r</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">r</span><span class="grouping">(</span><span class="string-literal">"{} is not "</span>
                              <span class="string-literal">"installed.\n{}{}"</span>
                              <span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">package</span><span class="punctuation">,</span> <span class="identifier">req_str</span><span class="punctuation">,</span> <span class="identifier">instructions</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="keyword">def</span> <span class="identifier">setup_package</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="identifier">metadata</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">name</span><span class="arithmetic-assignment">=</span><span class="identifier">DISTNAME</span><span class="punctuation">,</span>
                    <span class="identifier">maintainer</span><span class="arithmetic-assignment">=</span><span class="identifier">MAINTAINER</span><span class="punctuation">,</span>
                    <span class="identifier">maintainer_email</span><span class="arithmetic-assignment">=</span><span class="identifier">MAINTAINER_EMAIL</span><span class="punctuation">,</span>
                    <span class="identifier">description</span><span class="arithmetic-assignment">=</span><span class="identifier">DESCRIPTION</span><span class="punctuation">,</span>
                    <span class="identifier">license</span><span class="arithmetic-assignment">=</span><span class="identifier">LICENSE</span><span class="punctuation">,</span>
                    <span class="identifier">url</span><span class="arithmetic-assignment">=</span><span class="identifier">URL</span><span class="punctuation">,</span>
                    <span class="identifier">download_url</span><span class="arithmetic-assignment">=</span><span class="identifier">DOWNLOAD_URL</span><span class="punctuation">,</span>
                    <span class="identifier">project_urls</span><span class="arithmetic-assignment">=</span><span class="identifier">PROJECT_URLS</span><span class="punctuation">,</span>
                    <span class="identifier">version</span><span class="arithmetic-assignment">=</span><span class="identifier">VERSION</span><span class="punctuation">,</span>
                    <span class="identifier">long_description</span><span class="arithmetic-assignment">=</span><span class="identifier">LONG_DESCRIPTION</span><span class="punctuation">,</span>
                    <span class="invalid">c</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">i</span><span class="invalid">f</span><span class="invalid">i</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">s</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="string-literal">'Intended Audience :: Science/Research'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Intended Audience :: Developers'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'License :: OSI Approved'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Programming Language :: C'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Programming Language :: Python'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Topic :: Software Development'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Topic :: Scientific/Engineering'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Development Status :: 5 - Production/Stable'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Operating System :: Microsoft :: Windows'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Operating System :: POSIX'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Operating System :: Unix'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Operating System :: MacOS'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Programming Language :: Python :: 3'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Programming Language :: Python :: 3.7'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Programming Language :: Python :: 3.8'</span><span class="punctuation">,</span>
                                 <span class="string-literal">'Programming Language :: Python :: 3.9'</span><span class="punctuation">,</span>
                                 <span class="grouping">(</span><span class="string-literal">'Programming Language :: Python :: '</span>
                                  <span class="string-literal">'Implementation :: CPython'</span><span class="grouping">)</span><span class="punctuation">,</span>
                                 <span class="grouping">(</span><span class="string-literal">'Programming Language :: Python :: '</span>
                                  <span class="string-literal">'Implementation :: PyPy'</span><span class="grouping">)</span>
                                 <span class="grouping">]</span><span class="punctuation">,</span>
                    <span class="identifier">cmdclass</span><span class="arithmetic-assignment">=</span><span class="identifier">cmdclass</span><span class="punctuation">,</span>
                    <span class="identifier">python_requires</span><span class="arithmetic-assignment">=</span><span class="string-literal">"&gt;=3.7"</span><span class="punctuation">,</span>
                    <span class="identifier">install_requires</span><span class="arithmetic-assignment">=</span><span class="identifier">min_deps</span><span class="punctuation">.</span><span class="identifier">tag_to_packages</span><span class="grouping">[</span><span class="string-literal">'install'</span><span class="grouping">]</span><span class="punctuation">,</span>
                    <span class="identifier">package_data</span><span class="arithmetic-assignment">=</span><span class="grouping">{</span><span class="string-literal">'': ['*.pxd'</span><span class="grouping">]</span><span class="grouping">}</span><span class="punctuation">,</span>
                    <span class="arithmetic-operator">**</span><span class="identifier">extra_setuptools_args</span><span class="grouping">)</span>

    <span class="identifier">commands</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">arg</span> <span class="keyword">for</span> <span class="identifier">arg</span> <span class="relational-operator">in</span> <span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">argv</span><span class="grouping">[</span><span class="int-literal">1</span><span class="punctuation">:</span><span class="grouping">]</span> <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">arg</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">'-'</span><span class="grouping">)</span><span class="grouping">]</span>
    <span class="keyword">if</span> <span class="identifier">all</span><span class="grouping">(</span><span class="identifier">command</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">'egg_info', 'dist_info', 'clean', 'check'</span><span class="grouping">)</span>
           <span class="keyword">for</span> <span class="identifier">command</span> <span class="relational-operator">in</span> <span class="identifier">commands</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment"># These actions are required to succeed without Numpy for example when</span>
        <span class="comment"># pip is used to install Scikit-learn when Numpy is not yet present in</span>
        <span class="comment"># the system.</span>

        <span class="comment"># These commands use setup from setuptools</span>
        <span class="keyword">from</span> <span class="identifier">setuptools</span> <span class="keyword">import</span> <span class="identifier">setup</span>

        <span class="identifier">metadata</span><span class="grouping">[</span><span class="string-literal">'version'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">VERSION</span>
    <span class="keyword">else</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">version_info</span> <span class="relational-operator">&lt;</span> <span class="grouping">(</span><span class="int-literal">3</span><span class="punctuation">,</span> <span class="int-literal">6</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">RuntimeError</span><span class="grouping">(</span>
                <span class="string-literal">"Scikit-learn requires Python 3.7 or later. The current"</span>
                <span class="string-literal">" Python version is %s installed in %s."</span>
                <span class="arithmetic-operator">%</span> <span class="grouping">(</span><span class="identifier">platform</span><span class="punctuation">.</span><span class="identifier">python_version</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">executable</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="identifier">check_package_status</span><span class="grouping">(</span><span class="string-literal">'numpy'</span><span class="punctuation">,</span> <span class="identifier">min_deps</span><span class="punctuation">.</span><span class="identifier">NUMPY_MIN_VERSION</span><span class="grouping">)</span>

        <span class="identifier">check_package_status</span><span class="grouping">(</span><span class="string-literal">'scipy'</span><span class="punctuation">,</span> <span class="identifier">min_deps</span><span class="punctuation">.</span><span class="identifier">SCIPY_MIN_VERSION</span><span class="grouping">)</span>

        <span class="comment"># These commands require the setup from numpy.distutils because they</span>
        <span class="comment"># may use numpy.distutils compiler classes.</span>
        <span class="keyword">from</span> <span class="identifier">numpy</span><span class="punctuation">.</span><span class="identifier">distutils</span><span class="punctuation">.</span><span class="identifier">core</span> <span class="keyword">import</span> <span class="identifier">setup</span>

        <span class="identifier">metadata</span><span class="grouping">[</span><span class="string-literal">'configuration'</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">configuration</span>

    <span class="identifier">setup</span><span class="grouping">(</span><span class="arithmetic-operator">**</span><span class="identifier">metadata</span><span class="grouping">)</span>


<span class="keyword">if</span> <span class="identifier">__name__</span> <span class="relational-operator">==</span> <span class="string-literal">"__main__"</span><span class="punctuation">:</span>
    <span class="identifier">setup_package</span><span class="grouping">(</span><span class="grouping">)</span>

    </pre>
  </body>
</html>