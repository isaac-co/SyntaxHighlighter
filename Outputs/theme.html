<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#!/usr/bin/env python3</span>
<span class="comment">""" functions for implementing themes in Faceswap's GUI """</span>
<span class="keyword">import</span> <span class="identifier">logging</span>
<span class="keyword">import</span> <span class="identifier">os</span>
<span class="keyword">import</span> <span class="identifier">tkinter</span> <span class="keyword">as</span> <span class="identifier">tk</span>
<span class="keyword">from</span> <span class="identifier">tkinter</span> <span class="keyword">import</span> <span class="identifier">ttk</span>

<span class="keyword">import</span> <span class="identifier">numpy</span> <span class="keyword">as</span> <span class="identifier">np</span>

<span class="keyword">from</span> <span class="identifier">lib</span><span class="punctuation">.</span><span class="identifier">serializer</span> <span class="keyword">import</span> <span class="identifier">get_serializer</span>
<span class="keyword">from</span> <span class="identifier">lib</span><span class="punctuation">.</span><span class="identifier">utils</span> <span class="keyword">import</span> <span class="identifier">FaceswapError</span>


<span class="identifier">logger</span> <span class="arithmetic-assignment">=</span> <span class="identifier">logging</span><span class="punctuation">.</span><span class="identifier">getLogger</span><span class="grouping">(</span><span class="identifier">__name__</span><span class="grouping">)</span>  <span class="comment"># pylint: disable=invalid-name</span>


<span class="keyword">class</span> <span class="identifier">Style</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-few-public-methods</span>
    <span class="comment">""" Set the overarching theme and customize widgets.

    Parameters
    ----------
    default_font: tuple
        The name and size of the default font
    root: :class:`tkinter.Tk`
        The root tkinter object
    path_cache: str
        The path to the GUI's cache
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">t</span><span class="punctuation">,</span> <span class="identifier">root</span><span class="punctuation">,</span> <span class="identifier">path_cache</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_root</span> <span class="arithmetic-assignment">=</span> <span class="identifier">root</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span> <span class="arithmetic-assignment">=</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">n</span><span class="invalid">t</span>
        <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span> <span class="arithmetic-assignment">=</span> <span class="identifier">os</span><span class="punctuation">.</span><span class="identifier">path</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">path_cache</span><span class="punctuation">,</span> <span class="string-literal">"themes", "default.json"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_serializer</span><span class="grouping">(</span><span class="string-literal">"json"</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">load</span><span class="grouping">(</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ttk</span><span class="punctuation">.</span><span class="identifier">Style</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_Widgets</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_set_styles</span><span class="grouping">(</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">property</span>
    <span class="keyword">def</span> <span class="identifier">user_theme</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" dict: The currently selected user theme. """</span>
        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span>

    <span class="keyword">def</span> <span class="identifier">_set_styles</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Configure widget theme and styles """</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_config_settings_group</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="comment"># Command page</span>
        <span class="identifier">theme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span><span class="grouping">[</span><span class="string-literal">"command_tabs"</span><span class="grouping">]</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">notebook</span><span class="grouping">(</span><span class="string-literal">"CPanel"</span><span class="punctuation">,</span>
                               <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"frame_border"</span><span class="grouping">]</span><span class="punctuation">,</span>
                               <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"tab_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                               <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"tab_selected"</span><span class="grouping">]</span><span class="punctuation">,</span>
                               <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"tab_hover"</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="comment"># Settings Popup</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="string-literal">"SPanel.Header1.TLabel"</span><span class="punctuation">,</span>
                              <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="int-literal">4</span><span class="punctuation">,</span> <span class="string-literal">"bold"</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="string-literal">"SPanel.Header2.TLabel"</span><span class="punctuation">,</span>
                              <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span> <span class="arithmetic-operator">+</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="string-literal">"bold"</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="comment"># Console</span>
        <span class="identifier">theme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span><span class="grouping">[</span><span class="string-literal">"console"</span><span class="grouping">]</span>
        <span class="identifier">console_sbar</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">tuple</span><span class="grouping">(</span><span class="identifier">theme</span><span class="grouping">[</span><span class="identifier">f</span><span class="string-literal">"scrollbar_{area}_{state}"</span><span class="grouping">]</span>
                                   <span class="keyword">for</span> <span class="identifier">state</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"normal", "disabled", "active"</span><span class="grouping">)</span><span class="grouping">)</span>
                             <span class="keyword">for</span> <span class="identifier">area</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"background", "foreground", "border"</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">scrollbar</span><span class="grouping">(</span><span class="string-literal">"Console"</span><span class="punctuation">,</span>
                                <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"scrollbar_trough"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"scrollbar_border"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                <span class="arithmetic-operator">*</span><span class="identifier">console_sbar</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="grouping">(</span><span class="string-literal">"Console"</span><span class="punctuation">,</span>
                            <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"background_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"border_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">borderwidth</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_config_settings_group</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Configures the style of the control panel entry boxes. Used for inputting Faceswap
        options or controlling plugin settings. """</span>
        <span class="identifier">theme</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span><span class="grouping">[</span><span class="string-literal">"group_panel"</span><span class="grouping">]</span>
        <span class="keyword">for</span> <span class="identifier">panel_type</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"CPanel", "SPanel"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">if</span> <span class="identifier">panel_type</span> <span class="relational-operator">==</span> <span class="string-literal">"SPanel"</span><span class="punctuation">:</span>  <span class="comment"># Merge in Settings Panel overrides</span>
                <span class="identifier">theme</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="arithmetic-operator">**</span><span class="identifier">theme</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span><span class="grouping">[</span><span class="string-literal">"group_settings"</span><span class="grouping">]</span><span class="grouping">}</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{panel_type}.Holder.TFrame"</span><span class="punctuation">,</span>
                                  <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"panel_background"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="comment"># Header Colors on option/group controls</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{panel_type}.Group.TLabelframe.Label"</span><span class="punctuation">,</span>
                                  <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"header_color"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{panel_type}.Groupheader.TLabel"</span><span class="punctuation">,</span>
                                  <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"header_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                  <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"header_font"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                  <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="string-literal">"bold"</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="comment"># Widgets and specific areas</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_group_panel_widgets</span><span class="grouping">(</span><span class="identifier">panel_type</span><span class="punctuation">,</span> <span class="identifier">theme</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_group_panel_infoheader</span><span class="grouping">(</span><span class="identifier">panel_type</span><span class="punctuation">,</span> <span class="identifier">theme</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">slider</span><span class="grouping">(</span><span class="identifier">panel_type</span><span class="punctuation">,</span>
                                 <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                 <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_active"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                 <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_user_theme</span><span class="grouping">[</span><span class="string-literal">"group_panel"]["group_background"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">backgrounds</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                           <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_disabled"</span><span class="grouping">]</span><span class="punctuation">,</span>
                           <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_active"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="invalid">s</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_disabled"</span><span class="grouping">]</span><span class="punctuation">,</span>
                           <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                           <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_disabled"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">borders</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"header_color"], theme["control_color"], theme["header_color"</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">scrollbar</span><span class="grouping">(</span><span class="identifier">panel_type</span><span class="punctuation">,</span>
                                    <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"scrollbar_trough"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                    <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"scrollbar_border"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                    <span class="identifier">backgrounds</span><span class="punctuation">,</span>
                                    <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="invalid">s</span><span class="punctuation">,</span>
                                    <span class="identifier">borders</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">combobox</span><span class="grouping">(</span><span class="identifier">panel_type</span><span class="punctuation">,</span>
                                   <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_active"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"control_disabled"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"header_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"group_background"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"group_font"</span><span class="grouping">]</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_group_panel_infoheader</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">theme</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Set the theme for the information header box that appears at the top of each group
        panel

        Parameters
        ----------
        key: str
            The section that the slider will belong to
        theme: dict
            The user configuration theme options
        """</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.InfoHeader"</span><span class="punctuation">,</span>
                            <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"info_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"info_border"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">borderwidth</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.InfoHeader.TLabel"</span><span class="punctuation">,</span>
                              <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"info_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                              <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"info_font"</span><span class="grouping">]</span><span class="punctuation">,</span>
                              <span class="identifier">font</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_font</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="string-literal">"bold"</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.InfoBody.TLabel"</span><span class="punctuation">,</span>
                              <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"info_color"</span><span class="grouping">]</span><span class="punctuation">,</span>
                              <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"info_font"</span><span class="grouping">]</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_group_panel_widgets</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">theme</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Configure the foreground and background colors of common widgets.

        Parameters
        ----------
        key: str
            The section that the slider will belong to
        theme: dict
            The user configuration theme options
        """</span>
        <span class="comment"># Put a border on a group's sub-frame</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_widgets</span><span class="punctuation">.</span><span class="identifier">frame</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Subframe.Group"</span><span class="punctuation">,</span>
                            <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"group_background"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"group_border"</span><span class="grouping">]</span><span class="punctuation">,</span>
                            <span class="identifier">borderwidth</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>

        <span class="comment"># Background and Foreground of widgets and labels</span>
        <span class="keyword">for</span> <span class="identifier">lbl</span> <span class="relational-operator">in</span> <span class="grouping">[</span><span class="string-literal">"TLabel", "TFrame", "TLabelframe", "TCheckbutton", "TRadiobutton"</span><span class="punctuation">,</span>
                    <span class="string-literal">"TLabelframe.Label"</span><span class="grouping">]</span><span class="punctuation">:</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Group.{lbl}"</span><span class="punctuation">,</span>
                                  <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"group_background"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                  <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">theme</span><span class="grouping">[</span><span class="string-literal">"group_font"</span><span class="grouping">]</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">_Widgets</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Create custom ttk widget layouts for themed widgets.

    Parameters
    ----------
    style: :class:`ttk.Style`
        The master style object
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">style</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_TkImage</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span> <span class="arithmetic-assignment">=</span> <span class="identifier">style</span>

    <span class="keyword">def</span> <span class="identifier">combobox</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">control_color</span><span class="punctuation">,</span> <span class="identifier">active_color</span><span class="punctuation">,</span> <span class="identifier">arrow_color</span><span class="punctuation">,</span> <span class="identifier">control_border</span><span class="punctuation">,</span> <span class="identifier">field_color</span><span class="punctuation">,</span>
                 <span class="identifier">field_border</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Combo-boxes are fairly complex to style.

        Parameters
        ----------
        key: str
            The section that the slider will belong to
        control_color: str
            The color of inactive combo pull down button
        active_color: str
            The color of combo pull down button when it is hovered or pressed
        arrow_color: str
            The color of the combo pull down arrow
        control_border: str
            The color of the combo pull down button border
        field_color: str
            The color of the input field's background
        field_border: str
            The color of the input field's border
        """</span>
        <span class="comment"># All the stock down arrow images are bad</span>
        <span class="identifier">images</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">state</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"active", "normal"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">images</span><span class="grouping">[</span><span class="identifier">f</span><span class="string-literal">"arrow_{state}"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span>
                <span class="grouping">(</span><span class="int-literal">20</span><span class="punctuation">,</span> <span class="int-literal">20</span><span class="grouping">)</span><span class="punctuation">,</span>
                <span class="identifier">control_color</span> <span class="keyword">if</span> <span class="identifier">state</span> <span class="relational-operator">==</span> <span class="string-literal">"normal"</span> <span class="keyword">else</span> <span class="identifier">active_color</span><span class="punctuation">,</span>
                <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">arrow_color</span><span class="punctuation">,</span>
                <span class="identifier">pattern</span><span class="arithmetic-assignment">=</span><span class="string-literal">"arrow"</span><span class="punctuation">,</span>
                <span class="identifier">thickness</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span>
                <span class="identifier">border_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                <span class="identifier">border_color</span><span class="arithmetic-assignment">=</span><span class="identifier">control_border</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Combobox.downarrow"</span><span class="punctuation">,</span>
                                   <span class="string-literal">"image"</span><span class="punctuation">,</span>
                                   <span class="identifier">images</span><span class="grouping">[</span><span class="string-literal">"arrow_normal"</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="grouping">(</span><span class="string-literal">"active", images["arrow_active"</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                                   <span class="grouping">(</span><span class="string-literal">"pressed", images["arrow_active"</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                                   <span class="identifier">sticky</span><span class="arithmetic-assignment">=</span><span class="string-literal">"e"</span><span class="punctuation">,</span>
                                   <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="int-literal">20</span><span class="grouping">)</span>

        <span class="comment"># None of the themes give us the border control we need, so create an image</span>
        <span class="identifier">box</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">16</span><span class="punctuation">,</span> <span class="int-literal">16</span><span class="grouping">)</span><span class="punctuation">,</span>
                                     <span class="identifier">field_color</span><span class="punctuation">,</span>
                                     <span class="identifier">border_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                                     <span class="identifier">border_color</span><span class="arithmetic-assignment">=</span><span class="identifier">field_border</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Combobox.field"</span><span class="punctuation">,</span>
                                   <span class="string-literal">"image"</span><span class="punctuation">,</span>
                                   <span class="identifier">box</span><span class="punctuation">,</span>
                                   <span class="identifier">border</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                                   <span class="identifier">padding</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">6</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="comment"># Set a layout so we can access required params</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">layout</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TCombobox"</span><span class="punctuation">,</span> <span class="grouping">[</span>
            <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Combobox.field"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="grouping">[</span>
                    <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Combobox.downarrow", {"side": "right", "sticky": "ns"</span><span class="grouping">}</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Combobox.padding"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                        <span class="string-literal">"expand": "1"</span><span class="punctuation">,</span>
                        <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                        <span class="string-literal">"children": [(f"{key}.Combobox.focus"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                            <span class="string-literal">"expand": "1"</span><span class="punctuation">,</span>
                            <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                            <span class="string-literal">"children": [(f"{key}.Combobox.textarea", {"sticky": "nswe"</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">,</span>
                <span class="string-literal">"sticky": "nswe"</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">frame</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">background</span><span class="punctuation">,</span> <span class="identifier">border</span><span class="punctuation">,</span> <span class="identifier">borderwidth</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create a custom frame widget for controlling background and border colors.

        Parameters
        ----------
        key: str
            The section that the Frame will belong to
        background: str
            The hex code for the background of the frame
        border: str
            The hex code for the border of the frame
        """</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Frame.border", "from", "alt"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">layout</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TFrame"</span><span class="punctuation">,</span>
                           <span class="grouping">[</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Frame.border", {"sticky": "nswe"</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TFrame"</span><span class="punctuation">,</span>
                              <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">background</span><span class="punctuation">,</span>
                              <span class="identifier">relief</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">SOLID</span><span class="punctuation">,</span>
                              <span class="identifier">borderwidth</span><span class="arithmetic-assignment">=</span><span class="identifier">borderwidth</span><span class="punctuation">,</span>
                              <span class="identifier">bordercolor</span><span class="arithmetic-assignment">=</span><span class="identifier">border</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">notebook</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">frame_border</span><span class="punctuation">,</span> <span class="identifier">tab_color</span><span class="punctuation">,</span> <span class="identifier">tab_selected</span><span class="punctuation">,</span> <span class="identifier">tab_hover</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create a custom notebook widget so we can control the colors.

        Parameters
        ----------
        key: str
            The section that the scrollbar will belong to
        frame_border: str
            The border color around the tab's contents
        tab_color: str
            The color of non selected tabs
        tab_selected: str
            The color of selected tabs
        tab_hover: str
            The color of hovered tabs
        """</span>
        <span class="comment"># TODO This lags out the GUI, so need to test where this is failing prior to implementing</span>
        <span class="identifier">client</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">8</span><span class="punctuation">,</span> <span class="int-literal">8</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">frame_border</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Notebook.client", "image"</span><span class="punctuation">,</span> <span class="identifier">client</span><span class="punctuation">,</span> <span class="identifier">border</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>

        <span class="identifier">tabs</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">8</span><span class="punctuation">,</span> <span class="int-literal">8</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">color</span><span class="grouping">)</span>
                <span class="keyword">for</span> <span class="identifier">color</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="identifier">tab_color</span><span class="punctuation">,</span> <span class="identifier">tab_selected</span><span class="punctuation">,</span> <span class="identifier">tab_hover</span><span class="grouping">)</span><span class="grouping">]</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Notebook.tab"</span><span class="punctuation">,</span>
                                   <span class="string-literal">"image"</span><span class="punctuation">,</span>
                                   <span class="identifier">tabs</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span>
                                   <span class="grouping">(</span><span class="string-literal">"selected"</span><span class="punctuation">,</span> <span class="identifier">tabs</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                                   <span class="grouping">(</span><span class="string-literal">"active"</span><span class="punctuation">,</span> <span class="identifier">tabs</span><span class="grouping">[</span><span class="int-literal">2</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                                   <span class="identifier">padding</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="punctuation">,</span>
                                   <span class="identifier">border</span><span class="arithmetic-assignment">=</span><span class="int-literal">3</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">layout</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TNotebook", [(f"{key}.Notebook.client", {"sticky": "nswe"</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">layout</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TNotebook.Tab"</span><span class="punctuation">,</span> <span class="grouping">[</span>
            <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Notebook.tab"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="grouping">[</span>
                    <span class="grouping">(</span><span class="string-literal">"Notebook.padding"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                        <span class="string-literal">"side": "top"</span><span class="punctuation">,</span>
                        <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                        <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="grouping">[</span>
                            <span class="grouping">(</span><span class="string-literal">"Notebook.focus"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                                <span class="string-literal">"side": "top"</span><span class="punctuation">,</span>
                                <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                                <span class="string-literal">"children": [("Notebook.label", {"side": "top", "sticky": ""</span><span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span>
                            <span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span>
                    <span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span>
            <span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TNotebook"</span><span class="punctuation">,</span> <span class="identifier">tabmargins</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TNotebook.Tab"</span><span class="punctuation">,</span> <span class="identifier">padding</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">6</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">6</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">expand</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.TNotebook.Tab", expand=("selected"</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="punctuation">,</span> <span class="int-literal">4</span><span class="punctuation">,</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">scrollbar</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">trough_color</span><span class="punctuation">,</span> <span class="identifier">border_color</span><span class="punctuation">,</span> <span class="identifier">control_backgrounds</span><span class="punctuation">,</span> <span class="identifier">control_foregrounds</span><span class="punctuation">,</span>
                  <span class="identifier">control_borders</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create a custom scroll bar widget so we can control the colors.

        Parameters
        ----------
        key: str
            The section that the scrollbar will belong to
        theme: dict
            The theme options for a scroll bar. The dict should contain the keys: `background`,
            `foreground`, `border`, with each item containing a tuple of the colors for the states
            `normal`, `disabled` and `active` respectively
        trough_color: str
            The hex code for the scrollbar trough color
        border_color: str
            The hex code for the scrollbar border color
        control_backgrounds: tuple
            Tuple of length 3 for the button and slider colors for the states `normal`,
            `disabled`, `active`
        control_foregrounds: tuple
            Tuple of length 3 for the button arrow colors for the states `normal`,
            `disabled`, `active`
        control_borders: tuple
            Tuple of length 3 for the borders of the buttons and slider for the states `normal`,
            `disabled`, `active`
        """</span>
        <span class="identifier">logger</span><span class="punctuation">.</span><span class="identifier">debug</span><span class="grouping">(</span><span class="string-literal">"Creating scrollbar: (key: %s, trough_color: %s, border_color: %s, "</span>
                     <span class="string-literal">"control_backgrounds: %s, control_foregrounds: %s, control_borders: %s)"</span><span class="punctuation">,</span>
                     <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">trough_color</span><span class="punctuation">,</span> <span class="identifier">border_color</span><span class="punctuation">,</span> <span class="identifier">control_backgrounds</span><span class="punctuation">,</span> <span class="identifier">control_foregrounds</span><span class="punctuation">,</span>
                     <span class="identifier">control_borders</span><span class="grouping">)</span>
        <span class="identifier">images</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">idx</span><span class="punctuation">,</span> <span class="identifier">state</span> <span class="relational-operator">in</span> <span class="identifier">enumerate</span><span class="grouping">(</span><span class="grouping">(</span><span class="string-literal">"normal", "disabled", "active"</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="comment"># Create arrow and slider widgets for each state</span>
            <span class="identifier">img_args</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">16</span><span class="punctuation">,</span> <span class="int-literal">16</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">control_backgrounds</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="keyword">for</span> <span class="identifier">dir_</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"up", "down"</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">images</span><span class="grouping">[</span><span class="identifier">f</span><span class="string-literal">"img_{dir_}_{state}"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span>
                    <span class="arithmetic-operator">*</span><span class="identifier">img_args</span><span class="punctuation">,</span>
                    <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="identifier">control_foregrounds</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span><span class="punctuation">,</span>
                    <span class="identifier">pattern</span><span class="arithmetic-assignment">=</span><span class="string-literal">"arrow"</span><span class="punctuation">,</span>
                    <span class="identifier">direction</span><span class="arithmetic-assignment">=</span><span class="identifier">dir_</span><span class="punctuation">,</span>
                    <span class="identifier">thickness</span><span class="arithmetic-assignment">=</span><span class="int-literal">4</span><span class="punctuation">,</span>
                    <span class="identifier">border_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                    <span class="identifier">border_color</span><span class="arithmetic-assignment">=</span><span class="identifier">control_borders</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span><span class="grouping">)</span>
            <span class="identifier">images</span><span class="grouping">[</span><span class="identifier">f</span><span class="string-literal">"img_thumb_{state}"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span>
                <span class="arithmetic-operator">*</span><span class="identifier">img_args</span><span class="punctuation">,</span>
                <span class="identifier">border_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
                <span class="identifier">border_color</span><span class="arithmetic-assignment">=</span><span class="identifier">control_borders</span><span class="grouping">[</span><span class="identifier">idx</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="keyword">for</span> <span class="identifier">element</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"thumb", "uparrow", "downarrow"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="comment"># Create the elements with the new images</span>
            <span class="identifier">lookup</span> <span class="arithmetic-assignment">=</span> <span class="identifier">element</span><span class="punctuation">.</span><span class="identifier">replace</span><span class="grouping">(</span><span class="string-literal">"arrow", ""</span><span class="grouping">)</span>
            <span class="identifier">args</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.Scrollbar.{element}"</span><span class="punctuation">,</span>
                    <span class="string-literal">"image"</span><span class="punctuation">,</span>
                    <span class="identifier">images</span><span class="grouping">[</span><span class="identifier">f</span><span class="string-literal">"img_{lookup}_normal"</span><span class="grouping">]</span><span class="punctuation">,</span>
                    <span class="grouping">(</span><span class="string-literal">"disabled", images[f"img_{lookup}_disabled"</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="grouping">(</span><span class="string-literal">"pressed !disabled", images[f"img_{lookup}_active"</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="grouping">(</span><span class="string-literal">"active !disabled", images[f"img_{lookup}_active"</span><span class="grouping">]</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="identifier">kwargs</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="identifier">border</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="identifier">sticky</span><span class="arithmetic-assignment">=</span><span class="string-literal">"ns") if element == "thumb"</span> <span class="keyword">else</span> <span class="identifier">dict</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>

        <span class="comment"># Get a configurable trough</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.Scrollbar.trough", "from", "clam"</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">layout</span><span class="grouping">(</span>
            <span class="identifier">f</span><span class="string-literal">"{key}.Vertical.TScrollbar"</span><span class="punctuation">,</span>
            <span class="grouping">[</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.Scrollbar.trough"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                <span class="string-literal">"sticky": "ns"</span><span class="punctuation">,</span>
                <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="grouping">[</span>
                    <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.Scrollbar.uparrow", {"side": "top", "sticky": ""</span><span class="grouping">}</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.Scrollbar.downarrow", {"side": "bottom", "sticky": ""</span><span class="grouping">}</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.Scrollbar.thumb", {"expand": "1", "sticky": "nswe"</span><span class="grouping">}</span><span class="grouping">)</span>
                <span class="grouping">]</span>
            <span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Vertical.TScrollbar"</span><span class="punctuation">,</span>
                              <span class="identifier">troughcolor</span><span class="arithmetic-assignment">=</span><span class="identifier">trough_color</span><span class="punctuation">,</span>
                              <span class="identifier">bordercolor</span><span class="arithmetic-assignment">=</span><span class="identifier">border_color</span><span class="punctuation">,</span>
                              <span class="identifier">troughrelief</span><span class="arithmetic-assignment">=</span><span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">SOLID</span><span class="punctuation">,</span>
                              <span class="identifier">troughborderwidth</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">slider</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">key</span><span class="punctuation">,</span> <span class="identifier">control_color</span><span class="punctuation">,</span> <span class="identifier">active_color</span><span class="punctuation">,</span> <span class="identifier">trough_color</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Take a copy of the default ttk.Scale widget and replace the slider element with a
        version we can control the color and shape of.

        Parameters
        ----------
        key: str
            The section that the slider will belong to
        control_color: str
            The color of inactive slider and up down buttons
        active_color: str
            The color of slider and up down buttons when they are hovered or pressed
        trough_color: str
            The color of the scroll bar's trough
        """</span>
        <span class="identifier">img_slider</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="int-literal">25</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">control_color</span><span class="grouping">)</span>
        <span class="identifier">img_slider_alt</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_images</span><span class="punctuation">.</span><span class="identifier">get_image</span><span class="grouping">(</span><span class="grouping">(</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="int-literal">25</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">active_color</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.Scale.trough", "from", "alt"</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">element_create</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.Scale.slider"</span><span class="punctuation">,</span>
                                   <span class="string-literal">"image"</span><span class="punctuation">,</span>
                                   <span class="identifier">img_slider</span><span class="punctuation">,</span>
                                   <span class="grouping">(</span><span class="string-literal">"active"</span><span class="punctuation">,</span> <span class="identifier">img_slider_alt</span><span class="grouping">)</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">layout</span><span class="grouping">(</span>
            <span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.TScale"</span><span class="punctuation">,</span>
            <span class="grouping">[</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Scale.focus"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                <span class="string-literal">"expand": "1"</span><span class="punctuation">,</span>
                <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="grouping">[</span>
                    <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.Scale.trough"</span><span class="punctuation">,</span> <span class="grouping">{</span>
                        <span class="string-literal">"expand": "1"</span><span class="punctuation">,</span>
                        <span class="string-literal">"sticky": "nswe"</span><span class="punctuation">,</span>
                        <span class="string-literal">"children"</span><span class="punctuation">:</span> <span class="grouping">[</span>
                            <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.Scale.track", {"sticky": "we"</span><span class="grouping">}</span><span class="grouping">)</span><span class="punctuation">,</span>
                            <span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.Scale.slider", {"side": "left", "sticky": ""</span><span class="grouping">}</span><span class="grouping">)</span>
                            <span class="grouping">]</span>
                        <span class="grouping">}</span><span class="grouping">)</span>
                <span class="grouping">]</span>
            <span class="grouping">}</span><span class="grouping">)</span><span class="grouping">]</span><span class="grouping">)</span>

        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_style</span><span class="punctuation">.</span><span class="identifier">configure</span><span class="grouping">(</span><span class="identifier">f</span><span class="string-literal">"{key}.Horizontal.TScale"</span><span class="punctuation">,</span>
                              <span class="identifier">background</span><span class="arithmetic-assignment">=</span><span class="identifier">trough_color</span><span class="punctuation">,</span>
                              <span class="identifier">groovewidth</span><span class="arithmetic-assignment">=</span><span class="int-literal">4</span><span class="punctuation">,</span>
                              <span class="identifier">troughcolor</span><span class="arithmetic-assignment">=</span><span class="identifier">trough_color</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">_TkImage</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>  <span class="comment"># pylint:disable=too-few-public-methods</span>
    <span class="comment">""" Create a tk image for a given pattern and shape.
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_cache</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>  <span class="comment"># We need to keep a reference to every image created</span>

    <span class="comment"># Numpy array patterns</span>
    <span class="punctuation">@</span><span class="invalid">c</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">h</span><span class="invalid">o</span><span class="invalid">d</span>
    <span class="keyword">def</span> <span class="identifier">_get_solid</span><span class="grouping">(</span><span class="identifier">cls</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return a solid background color pattern.

        Parameters
        ----------
        dimensions: tuple
            The (`width`, `height`) of the desired tk image

        Returns
        -------
        :class:`numpy.ndarray`
            A 2D, UINT8 array of shape (height, width) of all zeros
        """</span>
        <span class="keyword">return</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">zeros</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">dtype</span><span class="arithmetic-assignment">=</span><span class="string-literal">"uint8"</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="invalid">c</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">h</span><span class="invalid">o</span><span class="invalid">d</span>
    <span class="keyword">def</span> <span class="identifier">_get_arrow</span><span class="grouping">(</span><span class="identifier">cls</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="punctuation">,</span> <span class="identifier">thickness</span><span class="punctuation">,</span> <span class="identifier">direction</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Return a background color with a "v" arrow in foreground color

        Parameters
        ----------
        dimensions: tuple
            The (`width`, `height`) of the desired tk image
        thickness: int
            The thickness of the pattern to be drawn
        direction: ["left", "up", "right", "down"]
            The direction that the pattern should be facing

        Returns
        -------
        :class:`numpy.ndarray`
            A 2D, UINT8 array of shape (height, width) of all zeros
        """</span>
        <span class="identifier">square_size</span> <span class="arithmetic-assignment">=</span> <span class="identifier">min</span><span class="grouping">(</span><span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">square_size</span> <span class="relational-operator">&lt;</span> <span class="int-literal">16</span> <span class="logical-operator">or</span> <span class="identifier">any</span><span class="grouping">(</span><span class="identifier">dim</span> <span class="arithmetic-operator">%</span> <span class="int-literal">2</span> <span class="relational-operator">!=</span> <span class="int-literal">0</span> <span class="keyword">for</span> <span class="identifier">dim</span> <span class="relational-operator">in</span> <span class="identifier">dimensions</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="keyword">raise</span> <span class="identifier">FaceswapError</span><span class="grouping">(</span><span class="string-literal">"For arrow image, the minimum size across any axis must be 8 and "</span>
                                <span class="string-literal">"dimensions must all be divisible by 2"</span><span class="grouping">)</span>
        <span class="identifier">crop_size</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">square_size</span> <span class="arithmetic-operator">//</span> <span class="int-literal">16</span><span class="grouping">)</span> <span class="arithmetic-operator">*</span> <span class="int-literal">16</span>
        <span class="identifier">draw_rows</span> <span class="arithmetic-assignment">=</span> <span class="identifier">int</span><span class="grouping">(</span><span class="int-literal">6</span> <span class="arithmetic-operator">*</span> <span class="identifier">crop_size</span> <span class="arithmetic-operator">/</span> <span class="int-literal">16</span><span class="grouping">)</span>
        <span class="identifier">start_row</span> <span class="arithmetic-assignment">=</span> <span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span> <span class="arithmetic-operator">//</span> <span class="int-literal">2</span> <span class="arithmetic-operator">-</span> <span class="identifier">draw_rows</span> <span class="arithmetic-operator">//</span> <span class="int-literal">2</span>
        <span class="identifier">initial_indent</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="int-literal">2</span> <span class="arithmetic-operator">*</span> <span class="grouping">(</span><span class="identifier">crop_size</span> <span class="arithmetic-operator">//</span> <span class="int-literal">16</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="grouping">(</span><span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">-</span> <span class="identifier">crop_size</span><span class="grouping">)</span> <span class="arithmetic-operator">//</span> <span class="int-literal">2</span><span class="grouping">)</span>

        <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">zeros</span><span class="grouping">(</span><span class="grouping">(</span><span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span><span class="punctuation">,</span> <span class="identifier">dtype</span><span class="arithmetic-assignment">=</span><span class="string-literal">"uint8"</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">i</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">start_row</span><span class="punctuation">,</span> <span class="identifier">start_row</span> <span class="arithmetic-operator">+</span> <span class="identifier">draw_rows</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">indent</span> <span class="arithmetic-assignment">=</span> <span class="identifier">initial_indent</span> <span class="arithmetic-operator">+</span> <span class="identifier">i</span> <span class="arithmetic-operator">-</span> <span class="identifier">start_row</span>
            <span class="identifier">join</span> <span class="arithmetic-assignment">=</span> <span class="grouping">(</span><span class="identifier">min</span><span class="grouping">(</span><span class="identifier">indent</span> <span class="arithmetic-operator">+</span> <span class="identifier">thickness</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">//</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="punctuation">,</span>
                    <span class="identifier">max</span><span class="grouping">(</span><span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">-</span> <span class="identifier">indent</span> <span class="arithmetic-operator">-</span> <span class="identifier">thickness</span><span class="punctuation">,</span> <span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">//</span> <span class="int-literal">2</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="identifier">retval</span><span class="grouping">[</span><span class="identifier">i</span><span class="punctuation">,</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">r_</span><span class="grouping">[</span><span class="identifier">indent</span><span class="punctuation">:</span><span class="identifier">join</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">join</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">:</span><span class="identifier">dimensions</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span> <span class="arithmetic-operator">-</span> <span class="identifier">indent</span><span class="grouping">]</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="int-literal">1</span>
        <span class="keyword">if</span> <span class="identifier">direction</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"right", "left"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">rot90</span><span class="grouping">(</span><span class="identifier">retval</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">direction</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"up", "left"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">retval</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">flip</span><span class="grouping">(</span><span class="identifier">retval</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">retval</span>

    <span class="keyword">def</span> <span class="identifier">get_image</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span>
                  <span class="identifier">dimensions</span><span class="punctuation">,</span>
                  <span class="identifier">background</span><span class="punctuation">,</span>
                  <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
                  <span class="identifier">pattern</span><span class="arithmetic-assignment">=</span><span class="string-literal">"solid"</span><span class="punctuation">,</span>
                  <span class="identifier">border_width</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span>
                  <span class="identifier">border_color</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
                  <span class="identifier">thickness</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span>
                  <span class="identifier">direction</span><span class="arithmetic-assignment">=</span><span class="string-literal">"down"</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Obtain a tk image.

        Generates the requested image and stores in cache.

        Parameters
        ----------
        dimensions: tuple
            The (`width`, `height`) of the desired tk image
        background: str
            The hex code for the background (main) color
        foreground: str, optional
            The hex code for the background (secondary) color. If ``None`` is provided then a
            solid background color image will be returned. Default: ``None``
        pattern: ["solid", "arrow"], optional
            The pattern to generate for the tk image. Default: `"solid"`
        border_width: int, optional
            The thickness of foreground border to apply. Default: 0
        border_color: int, optional
            The color of the border, if one is to be created. Default: ``None`` (use foreground
            color)
        thickness: int, optional
            The thickness of the pattern to be drawn. Default: `2`
        direction: ["left", "up", "right", "down"], optional
            The direction that the pattern should be facing. Default: `"down"`
        """</span>
        <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span> <span class="arithmetic-assignment">=</span> <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span> <span class="keyword">if</span> <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span> <span class="keyword">else</span> <span class="identifier">background</span>
        <span class="identifier">border_color</span> <span class="arithmetic-assignment">=</span> <span class="identifier">border_color</span> <span class="keyword">if</span> <span class="identifier">border_color</span> <span class="keyword">else</span> <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span>

        <span class="identifier">args</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">dimensions</span><span class="grouping">]</span>
        <span class="keyword">if</span> <span class="identifier">pattern</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"arrow"</span><span class="punctuation">:</span>
            <span class="identifier">args</span><span class="punctuation">.</span><span class="identifier">extend</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">thickness</span><span class="punctuation">,</span> <span class="identifier">direction</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">pattern</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"border"</span><span class="punctuation">:</span>
            <span class="identifier">args</span><span class="punctuation">.</span><span class="identifier">extend</span><span class="grouping">(</span><span class="grouping">[</span><span class="identifier">thickness</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">pattern</span> <span class="arithmetic-assignment">=</span> <span class="identifier">getattr</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">f</span><span class="string-literal">"_get_{pattern.lower()}"</span><span class="grouping">)</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="grouping">)</span>

        <span class="keyword">if</span> <span class="identifier">border_width</span> <span class="relational-operator">&gt;</span> <span class="int-literal">0</span><span class="punctuation">:</span>
            <span class="identifier">border</span> <span class="arithmetic-assignment">=</span> <span class="identifier">np</span><span class="punctuation">.</span><span class="identifier">ones_like</span><span class="grouping">(</span><span class="identifier">pattern</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="int-literal">1</span>
            <span class="identifier">border</span><span class="grouping">[</span><span class="identifier">border_width</span><span class="punctuation">:</span><span class="arithmetic-operator">-</span><span class="identifier">border_width</span><span class="punctuation">,</span>
                   <span class="identifier">border_width</span><span class="punctuation">:</span><span class="arithmetic-operator">-</span><span class="identifier">border_width</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">pattern</span><span class="grouping">[</span><span class="identifier">border_width</span><span class="punctuation">:</span><span class="arithmetic-operator">-</span><span class="identifier">border_width</span><span class="punctuation">,</span>
                                                         <span class="identifier">border_width</span><span class="punctuation">:</span><span class="arithmetic-operator">-</span><span class="identifier">border_width</span><span class="grouping">]</span>
            <span class="identifier">pattern</span> <span class="arithmetic-assignment">=</span> <span class="identifier">border</span>

        <span class="keyword">return</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_create_photoimage</span><span class="grouping">(</span><span class="identifier">background</span><span class="punctuation">,</span> <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="punctuation">,</span> <span class="identifier">border_color</span><span class="punctuation">,</span> <span class="identifier">pattern</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_create_photoimage</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">background</span><span class="punctuation">,</span> <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span><span class="punctuation">,</span> <span class="identifier">border</span><span class="punctuation">,</span> <span class="identifier">pattern</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create a tkinter PhotoImage and populate it with the requested color pattern.

        Parameters
        ----------
        background: str
            The hex code for the background (main) color
        foreground: str
            The hex code for the foreground (secondary) color
        border: str
            The hex code for the border color
        pattern: class:`numpy.ndarray`
            The pattern for the final image with background colors marked as 0 and foreground
            colors marked as 1
        """</span>
        <span class="identifier">image</span> <span class="arithmetic-assignment">=</span> <span class="identifier">tk</span><span class="punctuation">.</span><span class="identifier">PhotoImage</span><span class="grouping">(</span><span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="identifier">pattern</span><span class="punctuation">.</span><span class="identifier">shape</span><span class="grouping">[</span><span class="int-literal">1</span><span class="grouping">]</span><span class="punctuation">,</span> <span class="identifier">height</span><span class="arithmetic-assignment">=</span><span class="identifier">pattern</span><span class="punctuation">.</span><span class="identifier">shape</span><span class="grouping">[</span><span class="int-literal">0</span><span class="grouping">]</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_cache</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">image</span><span class="grouping">)</span>

        <span class="identifier">pixels</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"} {".join(" "</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">e</span><span class="invalid">g</span><span class="invalid">r</span><span class="invalid">o</span><span class="invalid">u</span><span class="invalid">n</span><span class="invalid">d</span>
                                     <span class="keyword">if</span> <span class="identifier">pxl</span> <span class="relational-operator">==</span> <span class="int-literal">1</span> <span class="keyword">else</span> <span class="identifier">border</span> <span class="keyword">if</span> <span class="identifier">pxl</span> <span class="relational-operator">==</span> <span class="int-literal">2</span> <span class="keyword">else</span> <span class="identifier">background</span>
                                     <span class="keyword">for</span> <span class="identifier">pxl</span> <span class="relational-operator">in</span> <span class="identifier">row</span><span class="grouping">)</span>
                            <span class="keyword">for</span> <span class="identifier">row</span> <span class="relational-operator">in</span> <span class="identifier">pattern</span><span class="grouping">)</span>
        <span class="identifier">image</span><span class="punctuation">.</span><span class="identifier">put</span><span class="grouping">(</span><span class="string-literal">"{" + pixels + "}"</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">image</span>

    </pre>
  </body>
</html>