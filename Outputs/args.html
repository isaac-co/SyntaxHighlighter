<html>
  <head>
    <title>Python Lexical Highliter</title>
    <link rel="stylesheet" href="token_colors.css">
  </head>
  <body>
    <pre><span class="comment">#!/usr/bin/env python3</span>
<span class="comment">""" The Command Line Argument options for faceswap.py """</span>

<span class="comment"># pylint:disable=too-many-lines</span>
<span class="keyword">import</span> <span class="identifier">argparse</span>
<span class="keyword">import</span> <span class="identifier">gettext</span>
<span class="keyword">import</span> <span class="identifier">logging</span>
<span class="keyword">import</span> <span class="identifier">re</span>
<span class="keyword">import</span> <span class="identifier">sys</span>
<span class="keyword">import</span> <span class="identifier">textwrap</span>

<span class="keyword">from</span> <span class="identifier">lib</span><span class="punctuation">.</span><span class="identifier">utils</span> <span class="keyword">import</span> <span class="identifier">get_backend</span>
<span class="keyword">from</span> <span class="identifier">lib</span><span class="punctuation">.</span><span class="identifier">gpu_stats</span> <span class="keyword">import</span> <span class="identifier">GPUStats</span>

<span class="keyword">from</span> <span class="identifier">plugins</span><span class="punctuation">.</span><span class="identifier">plugin_loader</span> <span class="keyword">import</span> <span class="identifier">PluginLoader</span>

<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">actions</span> <span class="keyword">import</span> <span class="grouping">(</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span> <span class="identifier">DirOrFileFullPaths</span><span class="punctuation">,</span> <span class="identifier">FileFullPaths</span><span class="punctuation">,</span> <span class="identifier">FilesFullPaths</span><span class="punctuation">,</span> <span class="identifier">MultiOption</span><span class="punctuation">,</span>
                      <span class="identifier">Radio</span><span class="punctuation">,</span> <span class="identifier">SaveFileFullPaths</span><span class="punctuation">,</span> <span class="identifier">Slider</span><span class="grouping">)</span>
<span class="keyword">from</span> <span class="punctuation">.</span><span class="identifier">launcher</span> <span class="keyword">import</span> <span class="identifier">ScriptExecutor</span>

<span class="identifier">logger</span> <span class="arithmetic-assignment">=</span> <span class="identifier">logging</span><span class="punctuation">.</span><span class="identifier">getLogger</span><span class="grouping">(</span><span class="identifier">__name__</span><span class="grouping">)</span>  <span class="comment"># pylint: disable=invalid-name</span>
<span class="identifier">_GPUS</span> <span class="arithmetic-assignment">=</span> <span class="identifier">GPUStats</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">cli_devices</span>

<span class="comment"># LOCALES</span>
<span class="identifier">_LANG</span> <span class="arithmetic-assignment">=</span> <span class="identifier">gettext</span><span class="punctuation">.</span><span class="identifier">translation</span><span class="grouping">(</span><span class="string-literal">"lib.cli.args", localedir="locales"</span><span class="punctuation">,</span> <span class="identifier">fallback</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span>
<span class="identifier">_</span> <span class="arithmetic-assignment">=</span> <span class="identifier">_LANG</span><span class="punctuation">.</span><span class="identifier">gettext</span>


<span class="keyword">class</span> <span class="identifier">FullHelpArgumentParser</span><span class="grouping">(</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">ArgumentParser</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Extends :class:`argparse.ArgumentParser` to output full help on bad arguments. """</span>
    <span class="keyword">def</span> <span class="identifier">error</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">message</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">print_help</span><span class="grouping">(</span><span class="identifier">sys</span><span class="punctuation">.</span><span class="identifier">stderr</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">exit</span><span class="grouping">(</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="string-literal">"{}: error: {}\n"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">prog</span><span class="punctuation">,</span> <span class="identifier">message</span><span class="grouping">)</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">SmartFormatter</span><span class="grouping">(</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">HelpFormatter</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Extends the class :class:`argparse.HelpFormatter` to allow custom formatting in help text.

    Adapted from: https://stackoverflow.com/questions/3853722

    Notes
    -----
    Prefix help text with "R|" to override default formatting and use explicitly defined formatting
    within the help text.
    Prefixing a new line within the help text with "L|" will turn that line into a list item in
    both the cli help text and the GUI.
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">prog</span><span class="punctuation">,</span> <span class="identifier">indent_increment</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span> <span class="identifier">max_help_position</span><span class="arithmetic-assignment">=</span><span class="int-literal">24</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">super</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">prog</span><span class="punctuation">,</span> <span class="identifier">indent_increment</span><span class="punctuation">,</span> <span class="identifier">max_help_position</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_whitespace_matcher_limited</span> <span class="arithmetic-assignment">=</span> <span class="identifier">re</span><span class="punctuation">.</span><span class="identifier">compile</span><span class="grouping">(</span><span class="identifier">r</span><span class="string-literal">'[ \r\f\v]+'</span><span class="punctuation">,</span> <span class="identifier">re</span><span class="punctuation">.</span><span class="invalid">A</span><span class="invalid">S</span><span class="invalid">C</span><span class="invalid">I</span><span class="invalid">I</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_split_lines</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Split the given text by the given display width.

        If the text is not prefixed with "R|" then the standard
        :func:`argparse.HelpFormatter._split_lines` function is used, otherwise raw
        formatting is processed,

        Parameters
        ----------
        text: str
            The help text that is to be formatted for display
        width: int
            The display width, in characters, for the help text
        """</span>
        <span class="keyword">if</span> <span class="identifier">text</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"R|"</span><span class="grouping">)</span><span class="punctuation">:</span>
            <span class="identifier">text</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_whitespace_matcher_limited</span><span class="punctuation">.</span><span class="identifier">sub</span><span class="grouping">(</span><span class="string-literal">' '</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="grouping">)</span><span class="punctuation">.</span><span class="identifier">strip</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">:</span><span class="grouping">]</span>
            <span class="identifier">output</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
            <span class="keyword">for</span> <span class="identifier">txt</span> <span class="relational-operator">in</span> <span class="identifier">text</span><span class="punctuation">.</span><span class="identifier">splitlines</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
                <span class="identifier">indent</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">""</span>
                <span class="keyword">if</span> <span class="identifier">txt</span><span class="punctuation">.</span><span class="identifier">startswith</span><span class="grouping">(</span><span class="string-literal">"L|"</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="identifier">indent</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"    "</span>
                    <span class="identifier">txt</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"  - {}"</span><span class="punctuation">.</span><span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="grouping">(</span><span class="identifier">txt</span><span class="grouping">[</span><span class="int-literal">2</span><span class="punctuation">:</span><span class="grouping">]</span><span class="grouping">)</span>
                <span class="identifier">output</span><span class="punctuation">.</span><span class="identifier">extend</span><span class="grouping">(</span><span class="identifier">textwrap</span><span class="punctuation">.</span><span class="identifier">wrap</span><span class="grouping">(</span><span class="identifier">txt</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="punctuation">,</span> <span class="identifier">subsequent_indent</span><span class="arithmetic-assignment">=</span><span class="identifier">indent</span><span class="grouping">)</span><span class="grouping">)</span>
            <span class="keyword">return</span> <span class="identifier">output</span>
        <span class="keyword">return</span> <span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">HelpFormatter</span><span class="punctuation">.</span><span class="identifier">_split_lines</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">text</span><span class="punctuation">,</span> <span class="identifier">width</span><span class="grouping">)</span>


<span class="keyword">class</span> <span class="identifier">FaceSwapArgs</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Faceswap argument parser functions that are universal to all commands.

    This is the parent class to all subsequent argparsers which holds global arguments that pertain
    to all commands.

    Process the incoming command line arguments, validates then launches the relevant faceswap
    script with the given arguments.

    Parameters
    ----------
    subparser: :class:`argparse._SubParsersAction`
        The subparser for the given command
    command: str
        The faceswap command that is to be executed
    description: str, optional
        The description for the given command. Default: "default"
    """</span>
    <span class="keyword">def</span> <span class="identifier">__init__</span><span class="grouping">(</span><span class="identifier">self</span><span class="punctuation">,</span> <span class="identifier">subparser</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="punctuation">,</span> <span class="identifier">description</span><span class="arithmetic-assignment">=</span><span class="string-literal">"default"</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">u</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">n</span><span class="invalid">t</span><span class="invalid">s</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_get_global_arguments</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">info</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_info</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_argument_list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">optional_arguments</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">get_optional_arguments</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_process_suppressions</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="logical-operator">not</span> <span class="identifier">subparser</span><span class="punctuation">:</span>
            <span class="keyword">return</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parser</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_create_parser</span><span class="grouping">(</span><span class="identifier">subparser</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="punctuation">,</span> <span class="identifier">description</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">_add_arguments</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">script</span> <span class="arithmetic-assignment">=</span> <span class="identifier">ScriptExecutor</span><span class="grouping">(</span><span class="identifier">command</span><span class="grouping">)</span>
        <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parser</span><span class="punctuation">.</span><span class="identifier">set_defaults</span><span class="grouping">(</span><span class="identifier">func</span><span class="arithmetic-assignment">=</span><span class="identifier">script</span><span class="punctuation">.</span><span class="identifier">execute_script</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_info</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the information text for the current command.

        This function should be overridden with the actual command help text for each
        commands' parser.

        Returns
        -------
        str
            The information text for this command.
        """</span>
        <span class="keyword">return</span> <span class="none-literal">None</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_argument_list</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the argument list for the current command.

        The argument list should be a list of dictionaries pertaining to each option for a command.
        This function should be overridden with the actual argument list for each command's
        argument list.

        See existing parsers for examples.

        Returns
        -------
        list
            The list of command line options for the given command
        """</span>
        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_optional_arguments</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the optional argument list for the current command.

        The optional arguments list is not always required, but is used when there are shared
        options between multiple commands (e.g. convert and extract). Only override if required.

        Returns
        -------
        list
            The list of optional command line options for the given command
        """</span>
        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_get_global_arguments</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the global Arguments list that are required for ALL commands in Faceswap.

        This method should NOT be overridden.

        Returns
        -------
        list
            The list of global command line options for all Faceswap commands.
        """</span>
        <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">if</span> <span class="identifier">_GPUS</span><span class="punctuation">:</span>
            <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
                <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-X", "--exclude-gpus"</span><span class="grouping">)</span><span class="punctuation">,</span>
                <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"exclude_gpus"</span><span class="punctuation">,</span>
                <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">MultiOption</span><span class="punctuation">,</span>
                <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
                <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
                <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="identifier">str</span><span class="grouping">(</span><span class="identifier">idx</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">idx</span> <span class="relational-operator">in</span> <span class="identifier">range</span><span class="grouping">(</span><span class="identifier">len</span><span class="grouping">(</span><span class="identifier">_GPUS</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">,</span>
                <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Global Options"</span><span class="grouping">)</span><span class="punctuation">,</span>
                <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Exclude GPUs from use by Faceswap. Select the number(s) which "</span>
                       <span class="string-literal">"correspond to any GPU(s) that you do not wish to be made available to "</span>
                       <span class="string-literal">"Faceswap. Selecting all GPUs here will force Faceswap into CPU mode."</span>
                       <span class="string-literal">"\nL|{}").format(" \nL|"</span><span class="punctuation">.</span><span class="identifier">join</span><span class="grouping">(</span><span class="identifier">_GPUS</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-C", "--configfile"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FileFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"ini"</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Global Options"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optionally overide the saved config with the path to a custom config file."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-L", "--loglevel"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">upper</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"loglevel"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="string-literal">"INFO"</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"INFO", "VERBOSE", "DEBUG", "TRACE"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Global Options"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Log level. Stick with INFO or VERBOSE unless you need to file an error "</span>
                   <span class="string-literal">"report. Be careful with TRACE as it will generate a lot of data"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-LF", "--logfile"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">SaveFileFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">'log'</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"logfile"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Global Options"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Path to store the logfile. Leave blank to store in the faceswap folder"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="comment"># These are hidden arguments to indicate that the GUI/Colab is being used</span>
        <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-gui", "--gui"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"redirect_gui"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">SUPPRESS</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-colab", "--colab"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"colab"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">SUPPRESS</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">s</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">_create_parser</span><span class="grouping">(</span><span class="identifier">subparser</span><span class="punctuation">,</span> <span class="identifier">command</span><span class="punctuation">,</span> <span class="identifier">description</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Create the parser for the selected command.

        Parameters
        ----------
        command: str
            The faceswap command that is to be executed
        description: str
            The description for the given command

        Returns
        -------
        :class:`~lib.cli.args.FullHelpArgumentParser`
            The parser for the given command
        """</span>
        <span class="identifier">parser</span> <span class="arithmetic-assignment">=</span> <span class="identifier">subparser</span><span class="punctuation">.</span><span class="identifier">add_parser</span><span class="grouping">(</span><span class="identifier">command</span><span class="punctuation">,</span>
                                      <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">description</span><span class="punctuation">,</span>
                                      <span class="identifier">description</span><span class="arithmetic-assignment">=</span><span class="identifier">description</span><span class="punctuation">,</span>
                                      <span class="identifier">epilog</span><span class="arithmetic-assignment">=</span><span class="string-literal">"Questions and feedback: https://faceswap.dev/forum"</span><span class="punctuation">,</span>
                                      <span class="invalid">f</span><span class="invalid">o</span><span class="invalid">r</span><span class="invalid">m</span><span class="invalid">a</span><span class="invalid">t</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">r</span><span class="invalid">_</span><span class="invalid">c</span><span class="invalid">l</span><span class="invalid">a</span><span class="invalid">s</span><span class="invalid">s</span><span class="arithmetic-assignment">=</span><span class="identifier">SmartFormatter</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">parser</span>

    <span class="keyword">def</span> <span class="identifier">_add_arguments</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Parse the list of dictionaries containing the command line arguments and convert to
        argparse parser arguments. """</span>
        <span class="identifier">options</span> <span class="arithmetic-assignment">=</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">u</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">n</span><span class="invalid">t</span><span class="invalid">s</span> <span class="arithmetic-operator">+</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">argument_list</span> <span class="arithmetic-operator">+</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">optional_arguments</span>
        <span class="keyword">for</span> <span class="identifier">option</span> <span class="relational-operator">in</span> <span class="identifier">options</span><span class="punctuation">:</span>
            <span class="identifier">args</span> <span class="arithmetic-assignment">=</span> <span class="identifier">option</span><span class="grouping">[</span><span class="string-literal">"opts"</span><span class="grouping">]</span>
            <span class="identifier">kwargs</span> <span class="arithmetic-assignment">=</span> <span class="grouping">{</span><span class="identifier">key</span><span class="punctuation">:</span> <span class="identifier">option</span><span class="grouping">[</span><span class="identifier">key</span><span class="grouping">]</span> <span class="keyword">for</span> <span class="identifier">key</span> <span class="relational-operator">in</span> <span class="identifier">option</span><span class="punctuation">.</span><span class="identifier">keys</span><span class="grouping">(</span><span class="grouping">)</span> <span class="keyword">if</span> <span class="identifier">key</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"opts", "group"</span><span class="grouping">)</span><span class="grouping">}</span>
            <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">parser</span><span class="punctuation">.</span><span class="identifier">add_argument</span><span class="grouping">(</span><span class="arithmetic-operator">*</span><span class="identifier">args</span><span class="punctuation">,</span> <span class="arithmetic-operator">**</span><span class="identifier">kwargs</span><span class="grouping">)</span>

    <span class="keyword">def</span> <span class="identifier">_process_suppressions</span><span class="grouping">(</span><span class="identifier">self</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Certain options are only available for certain backends.

        Suppresses command line options that are not available for the running backend.
        """</span>
        <span class="identifier">fs_backend</span> <span class="arithmetic-assignment">=</span> <span class="identifier">get_backend</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="keyword">for</span> <span class="identifier">opt_list</span> <span class="relational-operator">in</span> <span class="grouping">[</span><span class="identifier">self</span><span class="punctuation">.</span><span class="invalid">g</span><span class="invalid">l</span><span class="invalid">o</span><span class="invalid">b</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">r</span><span class="invalid">g</span><span class="invalid">u</span><span class="invalid">m</span><span class="invalid">e</span><span class="invalid">n</span><span class="invalid">t</span><span class="invalid">s</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">argument_list</span><span class="punctuation">,</span> <span class="identifier">self</span><span class="punctuation">.</span><span class="identifier">optional_arguments</span><span class="grouping">]</span><span class="punctuation">:</span>
            <span class="keyword">for</span> <span class="identifier">opts</span> <span class="relational-operator">in</span> <span class="identifier">opt_list</span><span class="punctuation">:</span>
                <span class="keyword">if</span> <span class="identifier">opts</span><span class="punctuation">.</span><span class="identifier">get</span><span class="grouping">(</span><span class="string-literal">"backend"</span><span class="punctuation">,</span> <span class="none-literal">None</span><span class="grouping">)</span> <span class="relational-operator">is</span> <span class="none-literal">None</span><span class="punctuation">:</span>
                    <span class="keyword">continue</span>
                <span class="identifier">opt_backend</span> <span class="arithmetic-assignment">=</span> <span class="identifier">opts</span><span class="punctuation">.</span><span class="identifier">pop</span><span class="grouping">(</span><span class="string-literal">"backend"</span><span class="grouping">)</span>
                <span class="keyword">if</span> <span class="identifier">isinstance</span><span class="grouping">(</span><span class="identifier">opt_backend</span><span class="punctuation">,</span> <span class="grouping">(</span><span class="identifier">list</span><span class="punctuation">,</span> <span class="identifier">tuple</span><span class="grouping">)</span><span class="grouping">)</span><span class="punctuation">:</span>
                    <span class="identifier">opt_backend</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">backend</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span> <span class="keyword">for</span> <span class="identifier">backend</span> <span class="relational-operator">in</span> <span class="identifier">opt_backend</span><span class="grouping">]</span>
                <span class="keyword">else</span><span class="punctuation">:</span>
                    <span class="identifier">opt_backend</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="identifier">opt_backend</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="grouping">(</span><span class="grouping">)</span><span class="grouping">]</span>
                <span class="keyword">if</span> <span class="identifier">fs_backend</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="identifier">opt_backend</span><span class="punctuation">:</span>
                    <span class="identifier">opts</span><span class="grouping">[</span><span class="string-literal">"help"</span><span class="grouping">]</span> <span class="arithmetic-assignment">=</span> <span class="identifier">argparse</span><span class="punctuation">.</span><span class="identifier">SUPPRESS</span>


<span class="keyword">class</span> <span class="identifier">ExtractConvertArgs</span><span class="grouping">(</span><span class="identifier">FaceSwapArgs</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Parent class to capture arguments that will be used in both extract and convert processes.

    Extract and Convert share a fair amount of arguments, so arguments that can be used in both of
    these processes should be placed here.

    No further processing is done in this class (this is handled by the children), this just
    captures the shared arguments.
    """</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_argument_list</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the argument list for shared Extract and Convert arguments.

        Returns
        -------
        list
            The list of command line options for the given Extract and Convert
        """</span>
        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-i", "--input-dir"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirOrFileFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"video"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"input_dir"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Data"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Input directory or video. Either a directory containing the image files you "</span>
                   <span class="string-literal">"wish to process or path to a video file. NB: This should be the source video/"</span>
                   <span class="string-literal">"frames NOT the source faces."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-o", "--output-dir"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"output_dir"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Data"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Output directory. This is where the converted files will be saved."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-al", "--alignments"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FileFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"alignments"</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"alignments_path"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Data"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optional path to an alignments file. Leave blank if the alignments file is "</span>
                   <span class="string-literal">"at the default location."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>


<span class="keyword">class</span> <span class="identifier">ExtractArgs</span><span class="grouping">(</span><span class="identifier">ExtractConvertArgs</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Creates the command line arguments for extraction.

    This class inherits base options from :class:`ExtractConvertArgs` where arguments that are used
    for both Extract and Convert should be placed.

    Commands explicit to Extract should be added in :func:`get_optional_arguments`
    """</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_info</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" The information text for the Extract command.

        Returns
        -------
        str
            The information text for the Extract command.
        """</span>
        <span class="keyword">return</span> <span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Extract faces from image or video sources.\n"</span>
                 <span class="string-literal">"Extraction plugins can be configured in the 'Settings' Menu"</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_optional_arguments</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the argument list unique to the Extract command.

        Returns
        -------
        list
            The list of optional command line options for the Extract command
        """</span>
        <span class="keyword">if</span> <span class="identifier">get_backend</span><span class="grouping">(</span><span class="grouping">)</span> <span class="relational-operator">==</span> <span class="string-literal">"cpu"</span><span class="punctuation">:</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">c</span><span class="invalid">t</span><span class="invalid">o</span><span class="invalid">r</span> <span class="arithmetic-assignment">=</span> <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">i</span><span class="invalid">g</span><span class="invalid">n</span><span class="invalid">e</span><span class="invalid">r</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"cv2-dnn"</span>
        <span class="keyword">else</span><span class="punctuation">:</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">c</span><span class="invalid">t</span><span class="invalid">o</span><span class="invalid">r</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"s3fd"</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">i</span><span class="invalid">g</span><span class="invalid">n</span><span class="invalid">e</span><span class="invalid">r</span> <span class="arithmetic-assignment">=</span> <span class="string-literal">"fan"</span>

        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-D", "--detector"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">t</span><span class="invalid">e</span><span class="invalid">c</span><span class="invalid">t</span><span class="invalid">o</span><span class="invalid">r</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_extractors</span><span class="grouping">(</span><span class="string-literal">"detect"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Detector to use. Some of these have configurable settings in "</span>
                   <span class="string-literal">"'/config/extract.ini' or 'Settings &gt; Configure Extract 'Plugins':"</span>
                   <span class="string-literal">"\nL|cv2-dnn: A CPU only extractor which is the least reliable and least "</span>
                   <span class="string-literal">"resource intensive. Use this if not using a GPU and time is important."</span>
                   <span class="string-literal">"\nL|mtcnn: Good detector. Fast on CPU, faster on GPU. Uses fewer resources "</span>
                   <span class="string-literal">"than other GPU detectors but can often return more false positives."</span>
                   <span class="string-literal">"\nL|s3fd: Best detector. Slow on CPU, faster on GPU. Can detect more faces "</span>
                   <span class="string-literal">"and fewer false positives than other GPU detectors, but is a lot more "</span>
                   <span class="string-literal">"resource intensive."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-A", "--aligner"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="invalid">_</span><span class="invalid">a</span><span class="invalid">l</span><span class="invalid">i</span><span class="invalid">g</span><span class="invalid">n</span><span class="invalid">e</span><span class="invalid">r</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_extractors</span><span class="grouping">(</span><span class="string-literal">"align"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Aligner to use."</span>
                   <span class="string-literal">"\nL|cv2-dnn: A CPU only landmark detector. Faster, less resource intensive, "</span>
                   <span class="string-literal">"but less accurate. Only use this if not using a GPU and time is important."</span>
                   <span class="string-literal">"\nL|fan: Best aligner. Fast on GPU, slow on CPU."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-M", "--masker"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">MultiOption</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="identifier">mask</span> <span class="keyword">for</span> <span class="identifier">mask</span> <span class="relational-operator">in</span> <span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_extractors</span><span class="grouping">(</span><span class="string-literal">"mask"</span><span class="grouping">)</span>
                     <span class="keyword">if</span> <span class="identifier">mask</span> <span class="logical-operator">not</span> <span class="relational-operator">in</span> <span class="grouping">(</span><span class="string-literal">"components", "extended"</span><span class="grouping">)</span><span class="grouping">]</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Additional Masker(s) to use. The masks generated here will all take up GPU "</span>
                   <span class="string-literal">"RAM. You can select none, one or multiple masks, but the extraction may take "</span>
                   <span class="string-literal">"longer the more you select. NB: The Extended and Components (landmark based) "</span>
                   <span class="string-literal">"masks are automatically generated on extraction."</span>
                   <span class="string-literal">"\nL|bisenet-fp: Relatively lightweight NN based mask that provides more "</span>
                   <span class="string-literal">"refined control over the area to be masked including full head masking "</span>
                   <span class="string-literal">"(configurable in mask settings)."</span>
                   <span class="string-literal">"\nL|vgg-clear: Mask designed to provide smart segmentation of mostly frontal "</span>
                   <span class="string-literal">"faces clear of obstructions. Profile faces and obstructions may result in "</span>
                   <span class="string-literal">"sub-par performance."</span>
                   <span class="string-literal">"\nL|vgg-obstructed: Mask designed to provide smart segmentation of mostly "</span>
                   <span class="string-literal">"frontal faces. The mask model has been specifically trained to recognize "</span>
                   <span class="string-literal">"some facial obstructions (hands and eyeglasses). Profile faces may result in "</span>
                   <span class="string-literal">"sub-par performance."</span>
                   <span class="string-literal">"\nL|unet-dfl: Mask designed to provide smart segmentation of mostly frontal "</span>
                   <span class="string-literal">"faces. The mask model has been trained by community members and will need "</span>
                   <span class="string-literal">"testing for further description. Profile faces may result in sub-par "</span>
                   <span class="string-literal">"performance."</span>
                   <span class="string-literal">"\nThe auto generated masks are as follows:"</span>
                   <span class="string-literal">"\nL|components: Mask designed to provide facial segmentation based on the "</span>
                   <span class="string-literal">"positioning of landmark locations. A convex hull is constructed around the "</span>
                   <span class="string-literal">"exterior of the landmarks to create a mask."</span>
                   <span class="string-literal">"\nL|extended: Mask designed to provide facial segmentation based on the "</span>
                   <span class="string-literal">"positioning of landmark locations. A convex hull is constructed around the "</span>
                   <span class="string-literal">"exterior of the landmarks and the mask is extended upwards onto the "</span>
                   <span class="string-literal">"forehead."</span>
                   <span class="string-literal">"\n(eg: `-M unet-dfl vgg-clear`, `--masker vgg-obstructed`)"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-nm", "--normalization"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"normalization"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="string-literal">"none"</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="grouping">[</span><span class="string-literal">"none", "clahe", "hist", "mean"</span><span class="grouping">]</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Performing normalization can help the aligner better align faces with "</span>
                   <span class="string-literal">"difficult lighting conditions at an extraction speed cost. Different methods "</span>
                   <span class="string-literal">"will yield different results on different sets. NB: This does not impact the "</span>
                   <span class="string-literal">"output face, just the input to the aligner."</span>
                   <span class="string-literal">"\nL|none: Don't perform normalization on the face."</span>
                   <span class="string-literal">"\nL|clahe: Perform Contrast Limited Adaptive Histogram Equalization on the "</span>
                   <span class="string-literal">"face."</span>
                   <span class="string-literal">"\nL|hist: Equalize the histograms on the RGB channels."</span>
                   <span class="string-literal">"\nL|mean: Normalize the face colors to the mean."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-rf", "--re-feed"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">10</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"re_feed"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"The number of times to re-feed the detected face into the aligner. Each time "</span>
                   <span class="string-literal">"the face is re-fed into the aligner the bounding box is adjusted by a small "</span>
                   <span class="string-literal">"amount. The final landmarks are then averaged from each iteration. Helps to "</span>
                   <span class="string-literal">"remove 'micro-jitter' but at the cost of slower extraction speed. The more "</span>
                   <span class="string-literal">"times the face is re-fed into the aligner, the less micro-jitter should occur "</span>
                   <span class="string-literal">"but the longer extraction will take."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-r", "--rotate-images"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"rotate_images"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"If a face isn't found, rotate the images to try to find a face. Can find "</span>
                   <span class="string-literal">"more faces at the cost of extraction speed. Pass in a single number to use "</span>
                   <span class="string-literal">"increments of that size up to 360, or pass in a list of numbers to enumerate "</span>
                   <span class="string-literal">"exactly what angles to check."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-min", "--min-size"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">1080</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">20</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"min_size"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Filters out faces detected below this size. Length, in pixels across the "</span>
                   <span class="string-literal">"diagonal of the bounding box. Set to 0 for off"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-n", "--nfilter"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FilesFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"image"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"nfilter"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optionally filter out people who you do not wish to process by passing in an "</span>
                   <span class="string-literal">"image of that person. Should be a front portrait with a single person in the "</span>
                   <span class="string-literal">"image. Multiple images can be added space separated. NB: Using face filter "</span>
                   <span class="string-literal">"will significantly decrease extraction speed and its accuracy cannot be "</span>
                   <span class="string-literal">"guaranteed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-f", "--filter"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FilesFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"image"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"filter"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optionally select people you wish to process by passing in an image of that "</span>
                   <span class="string-literal">"person. Should be a front portrait with a single person in the image. "</span>
                   <span class="string-literal">"Multiple images can be added space separated. NB: Using face filter will "</span>
                   <span class="string-literal">"significantly decrease extraction speed and its accuracy cannot be "</span>
                   <span class="string-literal">"guaranteed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-l", "--ref_threshold"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="float-literal">0.01</span><span class="punctuation">,</span> <span class="float-literal">0.99</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">float</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"ref_threshold"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.4</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"For use with the optional nfilter/filter files. Threshold for positive face "</span>
                   <span class="string-literal">"recognition. Lower values are stricter. NB: Using face filter will "</span>
                   <span class="string-literal">"significantly decrease extraction speed and its accuracy cannot be "</span>
                   <span class="string-literal">"guaranteed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-sz", "--size"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">256</span><span class="punctuation">,</span> <span class="int-literal">1024</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">64</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">512</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"output"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"The output size of extracted faces. Make sure that the model you intend to "</span>
                   <span class="string-literal">"train supports your required size. This will only need to be changed for "</span>
                   <span class="string-literal">"hi-res models."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-een", "--extract-every-n"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">100</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"extract_every_n"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"output"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Extract every 'nth' frame. This option will skip frames when extracting "</span>
                   <span class="string-literal">"faces. For example a value of 1 will extract faces from every frame, a value "</span>
                   <span class="string-literal">"of 10 will extract faces from every 10th frame."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-si", "--save-interval"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">1000</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">10</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"save_interval"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"output"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Automatically save the alignments file after a set amount of frames. By "</span>
                   <span class="string-literal">"default the alignments file is only saved at the end of the extraction "</span>
                   <span class="string-literal">"process. NB: If extracting in 2 passes then the alignments file will only "</span>
                   <span class="string-literal">"start to be saved out during the second pass. WARNING: Don't interrupt the "</span>
                   <span class="string-literal">"script when writing the file because it might get corrupted. Set to 0 to "</span>
                   <span class="string-literal">"turn off"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-dl", "--debug-landmarks"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"debug_landmarks"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"output"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Draw landmarks on the ouput faces for debugging purposes."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-sp", "--singleprocess"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">backend</span><span class="arithmetic-assignment">=</span><span class="string-literal">"nvidia"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Don't run extraction in parallel. Will run each part of the extraction "</span>
                   <span class="string-literal">"process separately (one after the other) rather than all at the smae time. "</span>
                   <span class="string-literal">"Useful if VRAM is at a premium."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-s", "--skip-existing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"skip_existing"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Skips frames that have already been extracted and exist in the alignments "</span>
                   <span class="string-literal">"file"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-sf", "--skip-existing-faces"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"skip_faces"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Skip frames that already have detected faces in the alignments file"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-ssf", "--skip-saving-faces"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"skip_saving_faces"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Skip saving the detected faces to disk. Just create an alignments file"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>


<span class="keyword">class</span> <span class="identifier">ConvertArgs</span><span class="grouping">(</span><span class="identifier">ExtractConvertArgs</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Creates the command line arguments for conversion.

    This class inherits base options from :class:`ExtractConvertArgs` where arguments that are used
    for both Extract and Convert should be placed.

    Commands explicit to Convert should be added in :func:`get_optional_arguments`
    """</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_info</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" The information text for the Convert command.

        Returns
        -------
        str
            The information text for the Convert command.
        """</span>
        <span class="keyword">return</span> <span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Swap the original faces in a source video/images to your final faces.\n"</span>
                 <span class="string-literal">"Conversion plugins can be configured in the 'Settings' Menu"</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_optional_arguments</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the argument list unique to the Convert command.

        Returns
        -------
        list
            The list of optional command line options for the Convert command
        """</span>

        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-ref", "--reference-video"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FileFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"video"</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"reference_video"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Data"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Only required if converting from images to video. Provide The original video "</span>
                   <span class="string-literal">"that the source frames were extracted from (for extracting the fps and "</span>
                   <span class="string-literal">"audio)."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-m", "--model-dir"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"model_dir"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Data"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Model directory. The directory containing the trained model you wish to use "</span>
                   <span class="string-literal">"for conversion."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-c", "--color-adjustment"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"color_adjustment"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="string-literal">"avg-color"</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_convert_plugins</span><span class="grouping">(</span><span class="string-literal">"color"</span><span class="punctuation">,</span> <span class="bool-literal">True</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Performs color adjustment to the swapped face. Some of these options have "</span>
                   <span class="string-literal">"configurable settings in '/config/convert.ini' or 'Settings &gt; Configure "</span>
                   <span class="string-literal">"Convert Plugins':"</span>
                   <span class="string-literal">"\nL|avg-color: Adjust the mean of each color channel in the swapped "</span>
                   <span class="string-literal">"reconstruction to equal the mean of the masked area in the original image."</span>
                   <span class="string-literal">"\nL|color-transfer: Transfers the color distribution from the source to the "</span>
                   <span class="string-literal">"target image using the mean and standard deviations of the L*a*b* "</span>
                   <span class="string-literal">"color space."</span>
                   <span class="string-literal">"\nL|manual-balance: Manually adjust the balance of the image in a variety of "</span>
                   <span class="string-literal">"color spaces. Best used with the Preview tool to set correct values."</span>
                   <span class="string-literal">"\nL|match-hist: Adjust the histogram of each color channel in the swapped "</span>
                   <span class="string-literal">"reconstruction to equal the histogram of the masked area in the original "</span>
                   <span class="string-literal">"image."</span>
                   <span class="string-literal">"\nL|seamless-clone: Use cv2's seamless clone function to remove extreme "</span>
                   <span class="string-literal">"gradients at the mask seam by smoothing colors. Generally does not give "</span>
                   <span class="string-literal">"very satisfactory results."</span>
                   <span class="string-literal">"\nL|none: Don't perform color adjustment."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-M", "--mask-type"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"mask_type"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="string-literal">"extended"</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_extractors</span><span class="grouping">(</span><span class="string-literal">"mask"</span><span class="punctuation">,</span>
                                                          <span class="identifier">add_none</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
                                                          <span class="identifier">extend_plugin</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="grouping">)</span> <span class="arithmetic-operator">+</span> <span class="grouping">[</span><span class="string-literal">"predicted"</span><span class="grouping">]</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Masker to use. NB: The mask you require must exist within the alignments "</span>
                   <span class="string-literal">"file. You can add additional masks with the Mask Tool."</span>
                   <span class="string-literal">"\nL|none: Don't use a mask."</span>
                   <span class="string-literal">"\nL|bisenet-fp-face: Relatively lightweight NN based mask that provides more "</span>
                   <span class="string-literal">"refined control over the area to be masked (configurable in mask settings). "</span>
                   <span class="string-literal">"Use this version of bisenet-fp if your model is trained with 'face' or "</span>
                   <span class="string-literal">"'legacy' centering."</span>
                   <span class="string-literal">"\nL|bisenet-fp-head: Relatively lightweight NN based mask that provides more "</span>
                   <span class="string-literal">"refined control over the area to be masked (configurable in mask settings). "</span>
                   <span class="string-literal">"Use this version of bisenet-fp if your model is trained with 'head' centering."</span>
                   <span class="string-literal">"\nL|components: Mask designed to provide facial segmentation based on the "</span>
                   <span class="string-literal">"positioning of landmark locations. A convex hull is constructed around the "</span>
                   <span class="string-literal">"exterior of the landmarks to create a mask."</span>
                   <span class="string-literal">"\nL|extended: Mask designed to provide facial segmentation based on the "</span>
                   <span class="string-literal">"positioning of landmark locations. A convex hull is constructed around the "</span>
                   <span class="string-literal">"exterior of the landmarks and the mask is extended upwards onto the forehead."</span>
                   <span class="string-literal">"\nL|vgg-clear: Mask designed to provide smart segmentation of mostly frontal "</span>
                   <span class="string-literal">"faces clear of obstructions. Profile faces and obstructions may result in "</span>
                   <span class="string-literal">"sub-par performance."</span>
                   <span class="string-literal">"\nL|vgg-obstructed: Mask designed to provide smart segmentation of mostly "</span>
                   <span class="string-literal">"frontal faces. The mask model has been specifically trained to recognize "</span>
                   <span class="string-literal">"some facial obstructions (hands and eyeglasses). Profile faces may result in "</span>
                   <span class="string-literal">"sub-par performance."</span>
                   <span class="string-literal">"\nL|unet-dfl: Mask designed to provide smart segmentation of mostly frontal "</span>
                   <span class="string-literal">"faces. The mask model has been trained by community members and will need "</span>
                   <span class="string-literal">"testing for further description. Profile faces may result in sub-par "</span>
                   <span class="string-literal">"performance."</span>
                   <span class="string-literal">"\nL|predicted: If the 'Learn Mask' option was enabled during training, this "</span>
                   <span class="string-literal">"will use the mask that was created by the trained model."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-w", "--writer"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="string-literal">"opencv"</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_convert_plugins</span><span class="grouping">(</span><span class="string-literal">"writer"</span><span class="punctuation">,</span> <span class="bool-literal">False</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Plugins"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|The plugin to use to output the converted images. The writers are "</span>
                   <span class="string-literal">"configurable in '/config/convert.ini' or 'Settings &gt; Configure Convert "</span>
                   <span class="string-literal">"Plugins:'"</span>
                   <span class="string-literal">"\nL|ffmpeg: [video] Writes out the convert straight to video. When the input "</span>
                   <span class="string-literal">"is a series of images then the '-ref' (--reference-video) parameter must be "</span>
                   <span class="string-literal">"set."</span>
                   <span class="string-literal">"\nL|gif: [animated image] Create an animated gif."</span>
                   <span class="string-literal">"\nL|opencv: [images] The fastest image writer, but less options and formats "</span>
                   <span class="string-literal">"than other plugins."</span>
                   <span class="string-literal">"\nL|pillow: [images] Slower than opencv, but has more options and supports "</span>
                   <span class="string-literal">"more formats."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-osc", "--output-scale"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">25</span><span class="punctuation">,</span> <span class="int-literal">400</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"output_scale"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">100</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Frame Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Scale the final output frames by this amount. 100%% will output the frames "</span>
                   <span class="string-literal">"at source dimensions. 50%% at half size 200%% at double size"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-fr", "--frame-ranges"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">,</span>
            <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Frame Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Frame ranges to apply transfer to e.g. For frames 10 to 50 and 90 to 100 use "</span>
                   <span class="string-literal">"--frame-ranges 10-50 90-100. Frames falling outside of the selected range "</span>
                   <span class="string-literal">"will be discarded unless '-k' (--keep-unchanged) is selected. NB: If you are "</span>
                   <span class="string-literal">"converting from images, then the filenames must end with the frame-number!"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-a", "--input-aligned-dir"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"input_aligned_dir"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"If you have not cleansed your alignments file, then you can filter out faces "</span>
                   <span class="string-literal">"by defining a folder here that contains the faces extracted from your input "</span>
                   <span class="string-literal">"files/video. If this folder is defined, then only faces that exist within "</span>
                   <span class="string-literal">"your alignments file and also exist within the specified folder will be "</span>
                   <span class="string-literal">"converted. Leaving this blank will convert all faces that exist within the "</span>
                   <span class="string-literal">"alignments file."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-n", "--nfilter"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FilesFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"image"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"nfilter"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optionally filter out people who you do not wish to process by passing in an "</span>
                   <span class="string-literal">"image of that person. Should be a front portrait with a single person in the "</span>
                   <span class="string-literal">"image. Multiple images can be added space separated. NB: Using face filter "</span>
                   <span class="string-literal">"will significantly decrease extraction speed and its accuracy cannot be "</span>
                   <span class="string-literal">"guaranteed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-f", "--filter"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FilesFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"image"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"filter"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">nargs</span><span class="arithmetic-assignment">=</span><span class="string-literal">"+"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optionally select people you wish to process by passing in an image of that "</span>
                   <span class="string-literal">"person. Should be a front portrait with a single person in the image. "</span>
                   <span class="string-literal">"Multiple images can be added space separated. NB: Using face filter will "</span>
                   <span class="string-literal">"significantly decrease extraction speed and its accuracy cannot be "</span>
                   <span class="string-literal">"guaranteed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-l", "--ref_threshold"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="float-literal">0.01</span><span class="punctuation">,</span> <span class="float-literal">0.99</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">2</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">float</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"ref_threshold"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="float-literal">0.4</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Face Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"For use with the optional nfilter/filter files. Threshold for positive face "</span>
                   <span class="string-literal">"recognition. Lower values are stricter. NB: Using face filter will "</span>
                   <span class="string-literal">"significantly decrease extraction speed and its accuracy cannot be "</span>
                   <span class="string-literal">"guaranteed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-j", "--jobs"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">40</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"jobs"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">0</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"The maximum number of parallel processes for performing conversion. "</span>
                   <span class="string-literal">"Converting images is system RAM heavy so it is possible to run out of memory "</span>
                   <span class="string-literal">"if you have a lot of processes and not enough RAM to accommodate them all. "</span>
                   <span class="string-literal">"Setting this to 0 will use the maximum available. No matter what you set "</span>
                   <span class="string-literal">"this to, it will never attempt to use more processes than are available on "</span>
                   <span class="string-literal">"your system. If singleprocess is enabled this setting will be ignored."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-t", "--trainer"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_models</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"[LEGACY] This only needs to be selected if a legacy model is being loaded or "</span>
                   <span class="string-literal">"if there are multiple models in the model folder"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-otf", "--on-the-fly"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"on_the_fly"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Enable On-The-Fly Conversion. NOT recommended. You should generate a clean "</span>
                   <span class="string-literal">"alignments file for your destination video. However, if you wish you can "</span>
                   <span class="string-literal">"generate the alignments on-the-fly by enabling this option. This will use "</span>
                   <span class="string-literal">"an inferior extraction pipeline and will lead to substandard results. If an "</span>
                   <span class="string-literal">"alignments file is found, this option will be ignored."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-k", "--keep-unchanged"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"keep_unchanged"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Frame Processing"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"When used with --frame-ranges outputs the unchanged frames that are not "</span>
                   <span class="string-literal">"processed instead of discarding them."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-s", "--swap-model"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"swap_model"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Swap the model. Instead converting from of A -&gt; B, converts B -&gt; A"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-sp", "--singleprocess"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"settings"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Disable multiprocessing. Slower but less resource intensive."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>


<span class="keyword">class</span> <span class="identifier">TrainArgs</span><span class="grouping">(</span><span class="identifier">FaceSwapArgs</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Creates the command line arguments for training. """</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_info</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" The information text for the Train command.

        Returns
        -------
        str
            The information text for the Train command.
        """</span>
        <span class="keyword">return</span> <span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Train a model on extracted original (A) and swap (B) faces.\n"</span>
                 <span class="string-literal">"Training models can take a long time. Anything from 24hrs to over a week\n"</span>
                 <span class="string-literal">"Model plugins can be configured in the 'Settings' Menu"</span><span class="grouping">)</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_argument_list</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the argument list for Train arguments.

        Returns
        -------
        list
            The list of command line options for training
        """</span>
        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="identifier">list</span><span class="grouping">(</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-A", "--input-A"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"input_a"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"faces"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Input directory. A directory containing training images for face A. This is "</span>
                   <span class="string-literal">"the original face, i.e. the face that you want to remove and replace with "</span>
                   <span class="string-literal">"face B."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-B", "--input-B"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"input_b"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"faces"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Input directory. A directory containing training images for face B. This is "</span>
                   <span class="string-literal">"the swap face, i.e. the face that you want to place onto the head of person "</span>
                   <span class="string-literal">"A."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-m", "--model-dir"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"model_dir"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">True</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"model"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Model directory. This is where the training data will be stored. You should "</span>
                   <span class="string-literal">"always specify a new folder for new models. If starting a new model, select "</span>
                   <span class="string-literal">"either an empty folder, or a folder which does not exist (which will be "</span>
                   <span class="string-literal">"created). If continuing to train an existing model, specify the location of "</span>
                   <span class="string-literal">"the existing model."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-l", "--load-weights"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">FileFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">filetypes</span><span class="arithmetic-assignment">=</span><span class="string-literal">"model"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"load_weights"</span><span class="punctuation">,</span>
            <span class="identifier">required</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"model"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Load the weights from a pre-existing model into a newly created model. "</span>
                   <span class="string-literal">"For most models this will load weights from the Encoder of the given model "</span>
                   <span class="string-literal">"into the encoder of the newly created model. Some plugins may have specific "</span>
                   <span class="string-literal">"configuration options allowing you to load weights from other layers. Weights "</span>
                   <span class="string-literal">"will only be loaded when creating a new model. This option will be ignored if "</span>
                   <span class="string-literal">"you are resuming an existing model. Generally you will also want to 'freeze-"</span>
                   <span class="string-literal">"weights' whilst the rest of your model catches up with your Encoder.\n"</span>
                   <span class="string-literal">"NB: Weights can only be loaded from models of the same plugin as you intend "</span>
                   <span class="string-literal">"to train."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-t", "--trainer"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Radio</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">str</span><span class="punctuation">.</span><span class="identifier">lower</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_default_model</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">choices</span><span class="arithmetic-assignment">=</span><span class="identifier">PluginLoader</span><span class="punctuation">.</span><span class="identifier">get_available_models</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"model"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"R|Select which trainer to use. Trainers can be configured from the Settings "</span>
                   <span class="string-literal">"menu or the config folder."</span>
                   <span class="string-literal">"\nL|original: The original model created by /u/deepfakes."</span>
                   <span class="string-literal">"\nL|dfaker: 64px in/128px out model from dfaker. Enable 'warp-to-landmarks' "</span>
                   <span class="string-literal">"for full dfaker method."</span>
                   <span class="string-literal">"\nL|dfl-h128: 128px in/out model from deepfacelab"</span>
                   <span class="string-literal">"\nL|dfl-sae: Adaptable model from deepfacelab"</span>
                   <span class="string-literal">"\nL|dlight: A lightweight, high resolution DFaker variant."</span>
                   <span class="string-literal">"\nL|iae: A model that uses intermediate layers to try to get better details"</span>
                   <span class="string-literal">"\nL|lightweight: A lightweight model for low-end cards. Don't expect great "</span>
                   <span class="string-literal">"results. Can train as low as 1.6GB with batch size 8."</span>
                   <span class="string-literal">"\nL|realface: A high detail, dual density model based on DFaker, with "</span>
                   <span class="string-literal">"customizable in/out resolution. The autoencoders are unbalanced so B&gt;A swaps "</span>
                   <span class="string-literal">"won't work so well. By andenixa et al. Very configurable."</span>
                   <span class="string-literal">"\nL|unbalanced: 128px in/out model from andenixa. The autoencoders are "</span>
                   <span class="string-literal">"unbalanced so B&gt;A swaps won't work so well. Very configurable."</span>
                   <span class="string-literal">"\nL|villain: 128px in/out model from villainguy. Very resource hungry (You "</span>
                   <span class="string-literal">"will require a GPU with a fair amount of VRAM). Good for details, but more "</span>
                   <span class="string-literal">"susceptible to color differences."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-su", "--summary"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"summary"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"model"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Output a summary of the model and exit. If a model folder is provided then a "</span>
                   <span class="string-literal">"summary of the saved model is displayed. Otherwise a summary of the model "</span>
                   <span class="string-literal">"that would be created by the chosen plugin and configuration settings is "</span>
                   <span class="string-literal">"displayed."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-f", "--freeze-weights"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"freeze_weights"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"model"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Freeze the weights of the model. Freezing weights means that some of the "</span>
                   <span class="string-literal">"parameters in the model will no longer continue to learn, but those that are "</span>
                   <span class="string-literal">"not frozen will continue to learn. For most models, this will freeze the "</span>
                   <span class="string-literal">"encoder, but some models may have configuration options for freezing other "</span>
                   <span class="string-literal">"layers."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-bs", "--batch-size"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">1</span><span class="punctuation">,</span> <span class="int-literal">256</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">1</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"batch_size"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">16</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"training"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Batch size. This is the number of images processed through the model for each "</span>
                   <span class="string-literal">"side per iteration. NB: As the model is fed 2 sides at a time, the actual "</span>
                   <span class="string-literal">"number of images within the model at any one time is double the number that "</span>
                   <span class="string-literal">"you set here. Larger batches require more GPU RAM."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-it", "--iterations"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">5000000</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">20000</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">1000000</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"training"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Length of training in iterations. This is only really used for automation. "</span>
                   <span class="string-literal">"There is no 'correct' number of iterations a model should be trained for. "</span>
                   <span class="string-literal">"You should stop training when you are happy with the previews. However, if "</span>
                   <span class="string-literal">"you want the model to stop automatically at a set number of iterations, you "</span>
                   <span class="string-literal">"can set that value here."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-d", "--distributed"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">backend</span><span class="arithmetic-assignment">=</span><span class="string-literal">"nvidia"</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"training"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Use the Tensorflow Mirrored Distrubution Strategy to train on multiple "</span>
                   <span class="string-literal">"GPUs."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-s", "--save-interval"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">10</span><span class="punctuation">,</span> <span class="int-literal">1000</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">10</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"save_interval"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">250</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Saving"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Sets the number of iterations between each model save."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-ss", "--snapshot-interval"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">0</span><span class="punctuation">,</span> <span class="int-literal">100000</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">5000</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"snapshot_interval"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">25000</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Saving"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Sets the number of iterations before saving a backup snapshot of the model "</span>
                   <span class="string-literal">"in it's current state. Set to 0 for off."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-tia", "--timelapse-input-A"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"timelapse_input_a"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"timelapse"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optional for creating a timelapse. Timelapse will save an image of your "</span>
                   <span class="string-literal">"selected faces into the timelapse-output folder at every save iteration. "</span>
                   <span class="string-literal">"This should be the input folder of 'A' faces that you would like to use for "</span>
                   <span class="string-literal">"creating the timelapse. You must also supply a --timelapse-output and a "</span>
                   <span class="string-literal">"--timelapse-input-B parameter."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-tib", "--timelapse-input-B"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"timelapse_input_b"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"timelapse"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optional for creating a timelapse. Timelapse will save an image of your "</span>
                   <span class="string-literal">"selected faces into the timelapse-output folder at every save iteration. "</span>
                   <span class="string-literal">"This should be the input folder of 'B' faces that you would like to use for "</span>
                   <span class="string-literal">"creating the timelapse. You must also supply a --timelapse-output and a "</span>
                   <span class="string-literal">"--timelapse-input-A parameter."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-to", "--timelapse-output"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">DirFullPaths</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"timelapse_output"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="none-literal">None</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"timelapse"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Optional for creating a timelapse. Timelapse will save an image of your "</span>
                   <span class="string-literal">"selected faces into the timelapse-output folder at every save iteration. If "</span>
                   <span class="string-literal">"the input folders are supplied but no output folder, it will default to your "</span>
                   <span class="string-literal">"model folder /timelapse/"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-ps", "--preview-scale"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="identifier">Slider</span><span class="punctuation">,</span>
            <span class="identifier">min_max</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="int-literal">25</span><span class="punctuation">,</span> <span class="int-literal">200</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">rounding</span><span class="arithmetic-assignment">=</span><span class="int-literal">25</span><span class="punctuation">,</span>
            <span class="identifier">type</span><span class="arithmetic-assignment">=</span><span class="identifier">int</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"preview_scale"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="int-literal">100</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"preview"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Percentage amount to scale the preview by. 100%% is the model output size."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-p", "--preview"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"preview"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"preview"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Show training preview output. in a separate window."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-w", "--write-image"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"write_image"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"preview"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Writes the training result to a file. The image will be stored in the root "</span>
                   <span class="string-literal">"of your FaceSwap folder."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-nl", "--no-logs"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"no_logs"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"training"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Disables TensorBoard logging. NB: Disabling logs means that you will not be "</span>
                   <span class="string-literal">"able to use the graph or analysis for this session in the GUI."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-wl", "--warp-to-landmarks"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"warp_to_landmarks"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"augmentation"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Warps training faces to closely matched Landmarks from the opposite face-set "</span>
                   <span class="string-literal">"rather than randomly warping the face. This is the 'dfaker' way of doing "</span>
                   <span class="string-literal">"warping."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-nf", "--no-flip"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"no_flip"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"augmentation"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"To effectively learn, a random set of images are flipped horizontally. "</span>
                   <span class="string-literal">"Sometimes it is desirable for this not to occur. Generally this should be "</span>
                   <span class="string-literal">"left off except for during 'fit training'."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-nac", "--no-augment-color"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"no_augment_color"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"augmentation"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Color augmentation helps make the model less susceptible to color "</span>
                   <span class="string-literal">"differences between the A and B sets, at an increased training time cost. "</span>
                   <span class="string-literal">"Enable this option to disable color augmentation."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-nw", "--no-warp"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"no_warp"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">group</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"augmentation"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Warping is integral to training the Neural Network. This option should only "</span>
                   <span class="string-literal">"be enabled towards the very end of training to try to bring out more detail. "</span>
                   <span class="string-literal">"Think of it as 'fine-tuning'. Enabling this option from the beginning is "</span>
                   <span class="string-literal">"likely to kill a model and lead to terrible results."</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>


<span class="keyword">class</span> <span class="identifier">GuiArgs</span><span class="grouping">(</span><span class="identifier">FaceSwapArgs</span><span class="grouping">)</span><span class="punctuation">:</span>
    <span class="comment">""" Creates the command line arguments for the GUI. """</span>

    <span class="punctuation">@</span><span class="identifier">staticmethod</span>
    <span class="keyword">def</span> <span class="identifier">get_argument_list</span><span class="grouping">(</span><span class="grouping">)</span><span class="punctuation">:</span>
        <span class="comment">""" Returns the argument list for GUI arguments.

        Returns
        -------
        list
            The list of command line options for the GUI
        """</span>
        <span class="identifier">argument_list</span> <span class="arithmetic-assignment">=</span> <span class="grouping">[</span><span class="grouping">]</span>
        <span class="identifier">argument_list</span><span class="punctuation">.</span><span class="identifier">append</span><span class="grouping">(</span><span class="identifier">dict</span><span class="grouping">(</span>
            <span class="identifier">opts</span><span class="arithmetic-assignment">=</span><span class="grouping">(</span><span class="string-literal">"-d", "--debug"</span><span class="grouping">)</span><span class="punctuation">,</span>
            <span class="identifier">action</span><span class="arithmetic-assignment">=</span><span class="string-literal">"store_true"</span><span class="punctuation">,</span>
            <span class="identifier">dest</span><span class="arithmetic-assignment">=</span><span class="string-literal">"debug"</span><span class="punctuation">,</span>
            <span class="invalid">d</span><span class="invalid">e</span><span class="invalid">f</span><span class="invalid">a</span><span class="invalid">u</span><span class="invalid">l</span><span class="invalid">t</span><span class="arithmetic-assignment">=</span><span class="bool-literal">False</span><span class="punctuation">,</span>
            <span class="identifier">help</span><span class="arithmetic-assignment">=</span><span class="identifier">_</span><span class="grouping">(</span><span class="string-literal">"Output to Shell console instead of GUI console"</span><span class="grouping">)</span><span class="grouping">)</span><span class="grouping">)</span>
        <span class="keyword">return</span> <span class="identifier">argument_list</span>

    </pre>
  </body>
</html>